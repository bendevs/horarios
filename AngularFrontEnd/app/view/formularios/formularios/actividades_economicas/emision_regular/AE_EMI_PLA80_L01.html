<script type="text/javascript">
    function conMayusculas(field) {
        field.value = field.value.toUpperCase()
    };
    //*** Este Codigo permite Validar que sea un campo Numerico
    function soloNumerico(variable){
        Numer=parseInt(variable);
        if (isNaN(Numer)){
            return "";
        }
        return Numer;
    }
    function valNumero(Control){
        Control.value=soloNumerico(Control.value);
    }
</script>

<script type="text/javascript">
    tinymce.remove("textarea");
    tinymce.init({  mode : "specific_textareas", setup: function (editor) {editor.on('change', function () {editor.save();});}, language : "es", editor_selector : /(mceEditorT)/,  height: 120,  theme: "modern",plugins: ["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern imagetools"  ]});
</script>

<script type="text/javascript">
    function frmAE80Controller($scope, $rootScope, $routeParams, $location, $http, Data, sessionService, CONFIG, LogGuardarInfo, DreamFactory,ngTableParams,$filter,sweet, $sce, registroLog,FileUploader, wsContribuyenteNatural,wsContribuyenteJuridico,wsLicencia, $window,wsRgistrarPubliciadad, $timeout, obtFechaHoraServer, wsBajaActividad,wsContribuyenteModificarJuridico, wsContribuyenteModificarEmpresa, wsContribuyenteModificarNatural, wsContribuyenteModificarAE) {

    $('.clockpicker').clockpicker();
    $scope.registraContribuyente   =   true;
    $scope.guardarae               =   true;

    $scope.informeRechazo          =   false;

    $scope.mostrarInformeR = function(){
        var svalorcombo =   $('#f04_res_solicitud_upaee').val();
        if(svalorcombo === 'PROCEDE'){
            $scope.informeRechazo          =   false;
        }else{
            $scope.informeRechazo          =   true;
        }
    }

    $scope.setContribuyente = function(datos) {
        /*CONTROLAR DATOS DE LAS PERSONA*/
        datos.user              =    (( (! datos.user) || typeof(datos.user) == 'undefined' || datos.user == null) ? ""   : datos.user.trim());
        datos.f01_telef_prop    =    (( (! datos.f01_telef_prop) || typeof(datos.f01_telef_prop) == 'undefined' || datos.f01_telef_prop == null) ? ""   : datos.f01_telef_prop.trim());
        datos.f01_dir_det_prop  =    (( (! datos.f01_dir_det_prop) || typeof(datos.f01_dir_det_prop) == 'undefined' || datos.f01_dir_det_prop == null) ? ""   : datos.f01_dir_det_prop.trim());

        //UASUARIO SESSION
        if(typeof sessionService.get('USUARIO') != 'undefined' && sessionService.get('USUARIO') != null){
            datos.user   =   sessionService.get('USUARIO').trim();
        }

        datos.ipusuario   =   "00:00:00";

        if($scope.ipCliente){
            datos.ipusuario =   $scope.ipCliente;
        }

        if(sFechaServer){
            datos.sFechaServer =   sFechaServer;
        }

        if(datos.f01_tipo_per=="N"){
            $scope.setContribuyenteNatural(datos);
        }else{
            $scope.setContribuyenteJuridico(datos);
        }
    };

    $scope.setModificarActividadEconomica = function(datos) {
        console.log("datos 1: ", datos);
        console.log("datos 2: ", $scope.datos);
        /*CONTROLAR DATOS DE LAS PERSONA*/
        datos.user              =    (( (! datos.user) || typeof(datos.user) == 'undefined' || datos.user == null) ? ""   : datos.user.trim());
        datos.f01_telef_prop    =    (( (! datos.f01_telef_prop) || typeof(datos.f01_telef_prop) == 'undefined' || datos.f01_telef_prop == null) ? ""   : datos.f01_telef_prop.trim());
        datos.f01_dir_det_prop  =    (( (! datos.f01_dir_det_prop) || typeof(datos.f01_dir_det_prop) == 'undefined' || datos.f01_dir_det_prop == null) ? ""   : datos.f01_dir_det_prop.trim());
        
        //UASUARIO SESSION
        if(typeof sessionService.get('USUARIO') != 'undefined' && sessionService.get('USUARIO') != null){
            datos.user   =   sessionService.get('USUARIO').trim();
        }

        datos.ipusuario   =   "00:00:00";

        if($scope.ipCliente){
            datos.ipusuario =   $scope.ipCliente;
        }

        if(sFechaServer){
            datos.sFechaServer =   sFechaServer;
        }
        
        if(datos.f01_tipo_per=="N"){
            $scope.modificarDataTramite = 'NATURAL';
            //alert("MODIFICAR ACTIVIDAD ECONOMICA NATURAL");
            //$scope.setContribuyenteNatural(datos);
            //MODIFICANDO SOLO LA ACTIVIDAD ECONOMICA
            $scope.registroActividad($scope.datos);
        }else{
            $scope.modificarDataTramite = 'JURIDICO';
            //alert("MODIFICAR  ACTIVIDAD ECONOMICA JURIDICO");
            //$scope.setContribuyenteJuridico(datos);
            //MODIFICANDO SOLO LA ACTIVIDAD ECONOMICA
            $scope.registroActividad($scope.datos);
        }
    };
        
    $scope.setModificarDatosContribuyente = function(datos) {
        /*CONTROLAR DATOS DE LAS PERSONA*/
        datos.user              =    (( (! datos.user) || typeof(datos.user) == 'undefined' || datos.user == null) ? ""   : datos.user.trim());
        datos.f01_telef_prop    =    (( (! datos.f01_telef_prop) || typeof(datos.f01_telef_prop) == 'undefined' || datos.f01_telef_prop == null) ? ""   : datos.f01_telef_prop.trim());
        datos.f01_dir_det_prop  =    (( (! datos.f01_dir_det_prop) || typeof(datos.f01_dir_det_prop) == 'undefined' || datos.f01_dir_det_prop == null) ? ""   : datos.f01_dir_det_prop.trim());
        
        //UASUARIO SESSION
        if(typeof sessionService.get('USUARIO') != 'undefined' && sessionService.get('USUARIO') != null){
            datos.user   =   sessionService.get('USUARIO').trim();
        }

        datos.ipusuario   =   "00:00:00";

        if($scope.ipCliente){
            datos.ipusuario =   $scope.ipCliente;
        }

        if(sFechaServer){
            datos.sFechaServer =   sFechaServer;
        }
        
        if(datos.f01_tipo_per=="N"){
            $scope.modificarDataTramite = 'CONTRIBUYENTE';
            //alert("MODIFICAR CONTRIBUYENTE NATURAL");
            $scope.setContribuyenteNatural(datos);
            //alert("natural");//modificar aqui
        }else{
            $scope.modificarDataTramite = 'CONTRIBUYENTE';
            //alert("MODIFICAR CONTRIBUYENTE JURIDICO");
            $scope.setContribuyenteJuridico(datos);
            //alert("juridico");//modificar aqui
        }
    };
        

    //55555
    $scope.validBtn401  =   false;
    $scope.validBtn402  =   false;
    $scope.validandoBotonesImpresion    =   function(){
        if($scope.datos.f01_tipo_per == 'N'){
            $scope.validBtn401  =   true;
        }else{
            $scope.validBtn402  =   true;
        }
    };

    /*$scope.iniciarFechaServidor = function () {
        var fechaactual = new fechaserver();
        fechaactual.fechahora(function(resultado){
            console.log("RESULTADO DE LA FECHA:-> 555 --> 11", JSON.parse(resultado).success.fecha);
            $scope.datos.fecha_sist = JSON.parse(resultado).success.fecha;
        });
    }*/



    $scope.ImprimirProforma = function (archivo) {
        $scope.varSpin = true;
        $scope.RegistroFUM={
            registrado:'OK',
            mensaje:''
        };
        var cadena= archivo;

        if (cadena.indexOf('?') != -1){
            separador = '?';
            arreglodecadena = cadena.split(separador);
            cadena = arreglodecadena[0];
            console.log('arreglo de la cadena',arreglodecadena[0]);
        }
        var tipoarch=cadena.substr(-4);
        console.log('substring: ',cadena.substr(-4));
        var imagen = cadena.indexOf('.jpeg');
        if(tipoarch == '.pdf'){
            $scope.archotro = false;
            $scope.archpdf = true;
            $('#visorFum object').attr('data',archivo);
            $timeout(function(){$scope.varSpin=false}, 1000);
        }
        else {
            var tipoimg = tipoarch.toUpperCase();
            console.log(tipoimg);
            if(tipoimg == '.JPG' || tipoimg == '.PNG' || tipoimg == '.BMP' || tipoimg == '.GIF') {
                $scope.archotro = true;
                $scope.archpdf = false;
                $scope.archivoP=archivo;
                $('#imgSalida').attr("src",archivo);
            }
            else { document.location = archivo; }
        }
        //MODAL
        $('#divPopup4').modal('show');
    };

    /*GENERANDO DOCUMENTOS PDF*/
    $scope.generarDocumentoPhp401402 = function (){
        var sFechaServer   =   obtFechaHoraServer.obtenerFecha();
        var sHoraServer    =   obtFechaHoraServer.obtenerHora();
        if(sFechaServer !=  "" && sHoraServer   !=  ""){
            var aDataDocs = new Array();
            aDataDocs.push(sFechaServer);
            aDataDocs.push(sHoraServer);
            $scope.aDataSserver =   aDataDocs;
        }

        console.log("ARRAY DE DATA: ", aDataDocs);

        console.log("CASO DE DE LA ACTIVIDAD:", $scope.casoActual.casoid);
        console.log("CASO DE DE LA ACTIVIDAD:", $scope.casoActual.casoactid);
        var idCasoActual        =   $scope.casoActual.casoid;
        var idActividadActual   =   $scope.casoActual.casoactid;
        $.blockUI();
        $.ajax({
            url:CONFIG.API_URL_DMS_2+'elaborar/elaborador/elaborar.php',
            type:"post",
            data:{
                "option":"ELABORAR",
                "idCaso":idCasoActual,
                "idActividad":idActividadActual,
                "sContenidoHtml":$scope.aDataSserver
            },
            success:function(response){
                console.log(response);
                var urlData = JSON.parse(response);
                console.log("MI URL DE DATOS 111111111111111111111:", urlData);
                $scope.urlData = urlData;
                console.log("DATOS ARCHIVO DATA:", $scope.urlData, " -> ",  urlData.length);
                 if(urlData.length > 0){
                    try{
                        $scope.ImprimirProforma($scope.urlData[0].url_archivo);
                        $.unblockUI();
                    }catch(e){}
                }
                $scope.$apply();
                $.unblockUI();
            }
        });
    };
    //55555

    //NUEVO - RENOVACION - CONTRIBUYENTE NATURAL
    $scope.setContribuyenteNatural = function(datos) {
        console.log("1) INICIO - DATOS REGISTRO CONTIBUYENTE NATURAL:",datos);
        setTimeout(function(){ $.blockUI(); },1000);
        var idActividadAnterior =   datos.f01_id_actividad_economica;
        if(idActividadAnterior  !=  "" && idActividadAnterior !=  null){//REGISTRAR ACTIVIDAD ECONOMICA - EXISTENTE//RENOVACION//MODIFICACION
            $scope.modificarContribuyenteNAE(datos);
        }else{//REGISTRAR CONTRIBYENTE JURIDICO - NUEVO NUEVO 
            $scope.registrarContribuyenteNAE(datos);
        }
    };
        
    //NUEVO - CONTRIBUYENTE
    $scope.registrarContribuyenteNAE = function(datos) {
        console.log("2) ENVIO DATOS - NUEVO CONTIBUYENTE NATURAL:",datos);        
        wsContribuyenteNatural.RegistrarNuevoContribuyenteGenesisNatural(datos).then(function(response){
            console.log("3) RESPUESTA - NUEVO CONTIBUYENTE NATURAL:",response);
            var sidcontribuyenten               = "";
            sidcontribuyenten                   = response.idPersona;
            $scope.datos.f01_id_contribuyente   = response.idPersona;
            $scope.datos.f01_num_pmc            = response.padron;

            if(sidcontribuyenten != "" && sidcontribuyenten != null){
                if($scope.f01_id_area_recuadadora){//AREA RECAUDACION
                    datos.f01_id_area_recuadadora   =   $scope.f01_id_area_recuadadora;
                }
                $scope.registroActividad($scope.datos);
            }
            
            console.log(response);
        });       

        setTimeout(function(){ $.unblockUI(); },1000);        
    };
        
    //RENOVACION - CONTRIBUYENTE
    $scope.modificarContribuyenteNAE = function(datos) {
        console.log("2) ENVIO DATOS - MODIFICAR DATOS CONTIBUYENTE NATURAL:",datos);
        datos.ipUsuario         =   $scope.ipCliente;
        datos.usuario           =   sessionService.get('USUARIO').trim();
        datos.funcionario       =   sessionService.get('USUARIO').trim();
        if($scope.f01_id_area_recuadadora){//AREA RECAUDACION
            datos.f01_id_area_recuadadora   =   $scope.f01_id_area_recuadadora;
        }
        wsContribuyenteModificarNatural.modificarPersona(datos).then(function(response){//DATOS DE LA PERSONA NATURAL            
            if(response){
                try{
                    console.log("3) RESPUESETA - MODIFICAR DATOS CONTIBUYENTE NATURAL:",response);
                    var saetipoform =   response['diffgr:diffgram']['NewDataSet']['respuesta']['descripcion'];
                    var saenumorden =   response['diffgr:diffgram']['NewDataSet']['respuesta']['resultado'];                    
					try{
						var srespModNatural	=	response['diffgr:diffgram']['NewDataSet']['respuesta'];    
						$scope.datos.f01_resp_modnatural    =   JSON.stringify(srespModNatural);
					}catch(e){}
					
                    if(typeof saetipoform != 'undefined' && saetipoform == '402' && typeof saenumorden != 'undefined' && saenumorden != ""){
                        var modDataTramite = $scope.modificarDataTramite;
                        if(modDataTramite == ''){//SI ES VACIO ENTONCES RENOVACION DE LICENCIA                            
                            $scope.registroActividad($scope.datos);
                        }else{//HABILITAR BOTONES
                            $scope.generaLicencia       = false;
                            //$scope.form400Registrado    = false;
                            $scope.licenciaRegistrado   = false;
                            //$scope.contUsuRegistrado    = true;
                        }
                    }else{
                        sweet.show('', 'Error al Modificar Datos !', 'error');                        
                    }
                }catch(e){
                    sweet.show('', 'Error al Modificar Datos !', 'error');
                }
            }
        });
        console.log(response);
        setTimeout(function(){ $.unblockUI(); },1000);        
    };

    //NUEVO - RENOVACION - CONTRIBUYENTE JURIDICO
    $scope.setContribuyenteJuridico = function(datos) {
        console.log("1) REGISTRAR CONTRIBUYENTE JURIDICO :", datos);
        setTimeout(function(){ $.blockUI(); },1000);
        var idActividadAnterior =   datos.f01_id_actividad_economica;
        if(idActividadAnterior  !=  "" && idActividadAnterior !=  null){//REGISTRAR ACTIVIDAD ECONOMICA - EXISTENTE//RENOVACION//MODIFICAR
            console.log("DATOS DEL CONTRIBUYENTE,", datos);
            
            
            $scope.modificarContribuyenteJAE(datos);
        }else{//REGISTRAR CONTRIBYENTE JURIDICO - NUEVO NUEVO
            $scope.registrarContribuyenteJAE(datos);
        }
    };
    
    //NUEVO - REPRESENTANTE LEGAL - EMPRESA - ACTIVIDAD ECONOMICA
    $scope.registrarContribuyenteJAE = function(datos, response) {
        wsContribuyenteJuridico.RegistrarNuevoContribuyenteGenesisJuridico(datos).then(function(response){
            //$scope.registrarContribuyenteJAE(datos, response);
            console.log("2) NUEVO: REGISTRAR CONTRIBUYENTE JURIDICO RESPUESTA :", response);        
            var sidcontribuyentej               =   "";
            sidcontribuyentej                   =   response.idEmpresa;//LA EMPRESA ES EL CONTRIBUYENTE
            $scope.datos.f01_id_contribuyente   =   response.idEmpresa;//LA EMPRESA ES EL CONTRIBUYENTE
            $scope.datos.f01_num_pmc            =   response.padron;
            $scope.datos.f01_id_representante_legal  =   response.idRepresentanteLegal;
            /*
            idEmpresa:"14738"
            idRepresentanteLegal:"15619"
            padron:"2CKCKRU40UQMS"
            */
            if(sidcontribuyentej != "" && sidcontribuyentej != null){
                if($scope.f01_id_area_recuadadora){
                    datos.f01_id_area_recuadadora   =   $scope.f01_id_area_recuadadora;
                }
                $scope.registroActividad($scope.datos);
            }
            
        });
        console.log(response);
        setTimeout(function(){ $.unblockUI(); },1000);
    };
        
    //RENOVACION - REPRESENTANTE LEGAL - EMPRESA - ACTIVIDAD ECONOMICA
    $scope.modificarContribuyenteJAE = function(datos) {
        console.log("2) RENOVAR: DATOS MODIFICAR CONTRIBUYENTE JURIDICO  :", datos);
        var empempresa      =   ((typeof(datos.f01_raz_soc_per_jur) == 'undefined' || datos.f01_raz_soc_per_jur == null) ? '' : datos.f01_raz_soc_per_jur);
        var empidEmpresa    =   ((typeof(datos.f01_id_contribuyente)== 'undefined' || datos.f01_id_contribuyente== null) ? '' : datos.f01_id_contribuyente);//id_contribuyente es empresa
        var emppmc          =   ((typeof(datos.f01_num_pmc)         == 'undefined' || datos.f01_num_pmc         == null) ? '' : datos.f01_num_pmc);
        
        datos.jtipoProceso  = 2;
        datos.justificacion = 'Modificacion de Datos del Representante Legal por Renovacion';
        if($scope.f01_id_area_recuadadora){
            datos.f01_id_area_recuadadora   =   $scope.f01_id_area_recuadadora;
        }
        
        datos.empidEmpresa  =   empidEmpresa;
        

        if(empempresa != "" && empempresa != null && empidEmpresa != "" && empidEmpresa != null && emppmc != "" && emppmc != null){
            wsContribuyenteModificarJuridico.modificarRepLegal(datos).then(function(response){//MODIFICAR REPRESENTANTE LEGAL
                if(response){
                    try{
                        console.log("3) RENOVAR: RESPUESTA MODIFICAR REPRESENTANTE LEGAL:", response);
                        var saetipoform =   response['diffgr:diffgram']['NewDataSet']['respuesta']['descripcion'];
                        var saenumorden =   response['diffgr:diffgram']['NewDataSet']['respuesta']['resultado'];
                        
						try{
							var srespModJuridico	=	response['diffgr:diffgram']['NewDataSet']['respuesta'];
							$scope.datos.f01_resp_replegal_modjuridico    =   JSON.stringify(srespModJuridico);
						}catch(e){}						
                        if(typeof saetipoform != 'undefined' && saetipoform == '402' && typeof saenumorden != 'undefined' && saenumorden != ""){
                            wsContribuyenteModificarEmpresa.modificarEmpresa(datos).then(function(response){//MODIFICAR EMPRESA
                                console.log("4) RENOVAR: RESPUESTA MODIFICAR EMPRESA:", response);
                                var saetipoform =   response['diffgr:diffgram']['NewDataSet']['respuesta']['descripcion'];
                                var saenumorden =   response['diffgr:diffgram']['NewDataSet']['respuesta']['resultado'];
								try{
									var srespEmpJuridico	=	response['diffgr:diffgram']['NewDataSet']['respuesta'];
									$scope.datos.f01_resp_emp_modjuridico    =   JSON.stringify(srespEmpJuridico);
								}catch(e){}										
                                
                                if(typeof saetipoform != 'undefined' && saetipoform == '402' && typeof saenumorden != 'undefined' && saenumorden != ""){
                                    var modDataTramite = $scope.modificarDataTramite;
                                    if(modDataTramite == ''){//SI ES VACIO ENTONCES RENOVACION DE LICENCIA
                                        $scope.registroActividad($scope.datos);
                                    }else{
                                        $scope.generaLicencia       = false;
                                        //$scope.form400Registrado    = false;
                                        $scope.licenciaRegistrado   = false;
                                        //$scope.contUsuRegistrado    = true;                                      
                                    }
                                }else{
                                    sweet.show('', 'Error al Modificar Datos !', 'error');                        
                                }
                            });
                        }else{
                            sweet.show('', 'Error al Modificar Datos !', 'error');                        
                        }
                    }catch(e){
                        sweet.show('', 'Error al Modificar Datos !', 'error');
                    }
                }
            });
        }else{
            setTimeout(function(){ sweet.show('', 'Datos incorrectos para Renovar', 'error'); },1000);
        }
        console.log(response);
        setTimeout(function(){ $.unblockUI(); },1000);
    };
        

    //AE - REGISTRAR ACTIVIDAD ECONOMICA
    $scope.registroActividad = function(datos) {
        var nit_persona;

        var fechaInicio             = datos.f01_fecha_ini_act.split('/');
        var resFechaInicio          = fechaInicio[2] +  "-" + fechaInicio[1] +  "-" +   fechaInicio[0];
        var fechaFin                = datos.f01_fecha_fin_act.split("/");
        var resFechaFin             = fechaFin[2] + "-" + fechaFin[1] + "-" +   fechaFin[0];
        var idActividadAnterior     = datos.f01_id_actividad_economica;
        var actividadDesarrollada   = "";

        $scope.modRegistro  =   null;
        $scope.boton        =   'new';

        if (datos.f01_tipo_per == 'N') {
            nit_persona = datos.f01_nit_prop;
        } else{
            nit_persona = datos.f01_nit;
        }

        //VALIDANDO DATOS NULOS
        datos.f01_nro_orden   =    (( (! datos.f01_nro_orden) || typeof(datos.f01_nro_orden) == 'undefined' || datos.f01_nro_orden == null) ? ""   : datos.f01_nro_orden);

        console.log("DATOS AE PARA REGISTRAR:", datos);

        setTimeout(function(){ $.blockUI(); },1000);

        //AREA RECAUDACION
        if($scope.f01_id_area_recuadadora){
            datos.f01_id_area_recuadadora   =   $scope.f01_id_area_recuadadora;
        }

        //UASUARIO SESSION
        if(typeof sessionService.get('USUARIO') != 'undefined' && sessionService.get('USUARIO') != null){
            datos.usuario   =   sessionService.get('USUARIO').trim();
        }

        datos.ipusuario   =   "00:00:00";

        if($scope.ipCliente){
            datos.ipusuario =   $scope.ipCliente;
        }

        /*VERIFICAR TIPO DE LIENCIA*/
        if(datos.f01_tipo_lic && datos.f01_tipo_lic == '2'){
            datos.actividadDesarrollada   =   datos.f01_categoria;
        }else if(datos.f01_tipo_lic && datos.f01_tipo_lic != '2'){
            datos.actividadDesarrollada   =   datos.f01_categoria;
        }
        
        /*MODIFICACION DATOS ACTIVIDAD ECONOMICA*/
        var modactividad    =   $scope.modificarDataTramite;

        if(idActividadAnterior  !=  "" && idActividadAnterior !=  null && typeof modactividad != 'undefined' && modactividad == ''){//RENOVAR
            datos.id_actividad_baja   =   idActividadAnterior;
            console.log("INICIO - BAJA ACTIVIDAD ECONOMICA");
            console.log("3.-) REGISTRAR ACTIVIDAD ECONOMICA ANTIGUO:", datos);
            wsBajaActividad.bajaActividadEconomica(datos).then(function(response){
                console.log("4.-) REGISTRAR ACTIVIDAD ECONOMICA  RESPUESTA :", response);
                if(Object.keys(response).length > 0 && response.resultado == 1){
                    //response = resp;
                    console.log("4 final.-) REGISTRAR ACTIVIDAD ECONOMICA JURIDICO RESPUESTA :", response);
                    var sidActividadEconomica   =   "";
                    sidActividadEconomica   =   response.idActividadEconomica; 
                    $scope.datos.f01_id_actividad_economica = response.idActividadEconomica;
                    //ACTULIAZANDO CAMPOS NECESARIOS PARA LA IMPRESION FORMULARIOS 401 O 402
                    $scope.datos.f01_nro_orden              =   response.nroOrdenAE;
                    $scope.datos.f01_tipo_form              =   response.form;

                    $scope.datos.f01_contri_act_registrado  =   true;
                    $scope.datos.f01_form_400_registrado    =   false;
                    $scope.datos.f01_licencia_registrado    =   false;

                    $scope.guardarDataForm();
                    console.log("REGISTRANDO PUBLICIDAD:", $scope.datos.swpublicidad);

                    if(sidActividadEconomica && sidActividadEconomica != ""){

                        $scope.generaLicencia       = false;
                        $scope.form400Registrado    = false;
                        $scope.licenciaRegistrado   = false;
                        $scope.contUsuRegistrado    = true;
                        /*only*/
                        $scope.only    = true;
                        $scope.desabilitado    = true;

                        if ($scope.datos.swpublicidad == 'CP') {
                            $scope.getRegistrarPublicidad($scope.datos);
                        } else{
                            //$scope.getLicencia($scope.datos);
                        }
                    }
                    console.log($scope.datos.f01_id_actividad_economica);
                }else{
                    sweet.show('', 'Actividad daacda de Baja ', 'error');
                }
            });
        }else if(idActividadAnterior  !=  "" && idActividadAnterior !=  null && typeof modactividad != 'undefined' && modactividad != ''){//MODIFICAR
            //alert("MODFICAR ACTIVIDAD ECONOMICA !!");
            console.log("datos.actividaddesarrollada: ",datos.actividadDesarrollada);
            console.log("Modificar datos juridico: ", datos);
            wsContribuyenteModificarAE.modificarActEco(datos).then(function(response){
                try{
                    var srespModActividad	=	response['diffgr:diffgram']['NewDataSet']['respuesta'];    
                    $scope.datos.f01_resp_mod_actividad    =   JSON.stringify(srespModActividad);
                }catch(e){}
            });
        }else{//REGISTRAR ACTIVIDAD ECONOMICA - NUEVO NUEVO
            console.log("INICIO - CREAR ACTIVIDAD ECONOMICA");
            var registraae  =   new registrarAE();

            registraae.idContribuyente          =   datos.f01_id_contribuyente;
            registraae.clase                    =   datos.f01_tipo_per;
            registraae.hojaRuta                 =   datos.AE_NRO_CASO;
            registraae.numeroOrden              =   datos.f01_nro_orden;
            registraae.nit                      =   nit_persona;
            registraae.cuentaEnergiaElectrica   =   datos.f01_cod_luz;
            registraae.idActividadDesarrollada  =   datos.actividadDesarrollada;
            registraae.denominacion             =   datos.f01_raz_soc;
            registraae.inicio                   =   resFechaInicio;
            registraae.fin                      =   resFechaFin;
            registraae.tipoVia                  =   datos.f01_tip_via_act;
            registraae.via                      =   datos.f01_num_act;
            registraae.numero                   =   datos.f01_num_act1;
            registraae.edificio                 =   datos.f01_edificio_act;
            registraae.bloque                   =   datos.f01_bloque_act;
            registraae.piso                     =   datos.f01_piso_act;
            registraae.departamento             =   datos.f01_dpto_of_loc;
            registraae.idZona                   =   datos.f01_zona_act;
            registraae.idDistrito               =   datos.f01_dist_act;
            registraae.entreCalles              =   "";
            registraae.telefono                 =   datos.f01_tel_act1;
            registraae.casilla                  =   datos.f01_casilla;
            registraae.codigoZona               =   datos.f01_idCodigoZona;
            registraae.superficie               =   datos.f01_sup;
            registraae.idCategoria              =   datos.f01_tipo_lic;//* f01_categoria ?
            registraae.productosElaborados      =   datos.f01_productosElaborados;
            registraae.actividadesSecundarias   =   datos.f01_actividadesSecundarias;
            registraae.establecimiento          =   datos.f01_estab_es;
            registraae.tipoActividad            =   datos.f01_tip_act;
            registraae.factor                   =   datos.f01_factor;
            registraae.horarioAtencion          =   datos.f01_de_hor+" - "+datos.f01_a_hor;
            registraae.capacidad                =   parseInt(datos.f01_cap_aprox);
            registraae.estado                   =   "V";
            registraae.tipoTransaccion          =   "R";
            registraae.usuario                  =   datos.usuario;
            registraae.ipUsuario                =   datos.ipusuario;
            registraae.equipo                   =   "GMLPSR0024";
            registraae.funcionario              =   datos.usuario;
            registraae.tipoFormulario           =   1;
            registraae.observaciones            =   datos.f01_observaciones_;

            console.log("3) REGISTRAR ACTIVIDAD ECONOMICA NUEVO:", registraae);

            registraae.registrar(function(resultado){
                var response = JSON.parse(resultado);
                console.log("4) REGISTRAR ACTIVIDAD ECONOMICA JURIDICO RESPUESTA :", response);
                response    =   response.success.dataSql;
                //console.log(response[0].idActividadEconomica);
                var sidActividadEconomica   =   "";
                sidActividadEconomica   =   response[0].idActividadEconomica;                
                $scope.datos.f01_id_actividad_economica = response[0].idActividadEconomica;
                //ACTULIAZANDO CAMPOS NECESARIOS PARA LA IMPRESION FORMULARIOS 401 O 402
                $scope.datos.f01_nro_orden              =   response[0].nroOrdenAE;
                $scope.datos.f01_tipo_form              =   response[0].tipoFormulario;

                $scope.datos.f01_contri_act_registrado  =   true;
                $scope.datos.f01_form_400_registrado    =   false;
                $scope.datos.f01_licencia_registrado    =   false;
                $scope.guardarDataForm();

                //f110_form_401_402,f01_nro_orden,f01_tipo_form
                console.log("REGISTRANDO PUBLICIDAD:", $scope.datos.swpublicidad);
                if(sidActividadEconomica && sidActividadEconomica != ""){
                    
                    //alert("REGISTRANDO PUBLICIDAD!!");
                    $scope.generaLicencia       = false;
                    $scope.form400Registrado    = false;
                    $scope.licenciaRegistrado   = false;
                    $scope.contUsuRegistrado    = true;

                    /*only*/
                    $scope.only    = true;
                    $scope.desabilitado    = true;

                    if ($scope.datos.swpublicidad == 'CP') {
                        //$scope.registrarPublicidad = false;
                        $scope.getRegistrarPublicidad($scope.datos);
                    } else{
                        //$scope.getLicencia($scope.datos);
                    };
                }
                console.log($scope.datos.f01_id_actividad_economica);
            });
        }
        setTimeout(function(){ $.unblockUI(); },1000);
    };

    //AE - GENERAR LICENCIA
    $scope.getLicencia = function(datos) {
        console.log("GENERANDO LICENCIA DATA : ", datos);
        console.log("ID_AREA_RECAUDACION : ", sessionService.get('ID_AREA_RECAUDACION'));
        console.log("US_GENESIS : ", sessionService.get('US_GENESIS'));
        console.log("IP USUARIO : ", $scope.ipCliente);
        $.blockUI();
        wsLicencia.generaLicenciaAEFechasNuevaActividad(datos.f01_id_actividad_economica, datos.f01_fecha_ini_act,datos.f01_fecha_fin_act, sessionService.get('ID_AREA_RECAUDACION'), sessionService.get('US_GENESIS'), $scope.ipCliente, "GMLPSR0024", sessionService.get('US_GENESIS')).then(function(response)
        {
            console.log("RESPUESTA LICENCIA:", response);
            if(response){
                if(response.resultado === 'SI'){
                    $scope.response = response;
                    $scope.guardarae = false;
                    $scope.registraContribuyente=true;
                    //$scope.licenciaRegistrado   =   true;
                    //$scope.form400Registrado    =   true;
                    $scope.datos.f01_licencia_registrado    =   true;
                    $scope.datos.f01_form_400_registrado    =   true;
                    //response[0].descripcion;
                    $window.open(response.descripcion);
                    console.log(response.descripcion);
                    //setTimeout(function(){ $.unblockUI(); },1000);
                    //ALMACENAR LICENCIA DE FUNCIONAMIENTO
                    $scope.almacenarLicenciaAE(response);
                    $scope.guardarDataForm();
                    $.unblockUI();
                }else{
                    $.unblockUI();
                    sweet.show('', response.descripcion, 'warning');
                }
            }else{
                sweet.show('', 'Ocurrio un error al Generar la Licencia', 'warning');
            }
        });
    };

    /*var fecha   =   new Date();
    if (fecha.getDate()<10)
        dia = "0" + fecha.getDate();
    else
        dia = fecha.getDate();
    if ((fecha.getMonth()+1)<10)
        mes = "0" + (fecha.getMonth() + 1);
    else
        mes = fecha.getMonth() + 1;

    $scope.datos.f01_fecha_ini_act  = dia + "/" + mes + "/" + fecha.getFullYear();
    $scope.datos.f01_fecha_imp      = dia + "/" + mes + "/" + fecha.getFullYear();
    $scope.datos.f01_fecha_fin_act  = dia + "/" + mes + "/" + (fecha.getFullYear()+2);*/

    var sFechaServer    =   obtFechaHoraServer.obtenerFecha();
    var sAnioServer     =   "";
    var sMesServer      =   "";
    var sDiaServer      =   "";

    $scope.datos.f01_fecha_ini_act  = sFechaServer;
    $scope.datos.f01_fecha_imp      = sFechaServer;
    if(sFechaServer){
        var sfech   =   sFechaServer.split("/");
        $scope.datos.f01_fecha_fin_act  = sfech[0] + "/" + sfech[1] + "/" + (parseInt(sfech[2]) + 2);
        sAnioServer     =   sfech[2];
        sMesServer      =   sfech[1];
        sDiaServer      =   sfech[0];
    }

    console.log("hora del sistema servidor 1:", $scope.datos.f01_fecha_ini_act);
    console.log("hora del sistema servidor 2:", $scope.datos.f01_fecha_imp);
    console.log("hora del sistema servidor 3:", $scope.datos.f01_fecha_fin_act);

    console.log("año del sistema servidor 1:", sAnioServer);
    console.log("mes del sistema servidor 2:", sMesServer);
    console.log("dia del sistema servidor 3:", sDiaServer);


    var formularioPersona = "";
    var telefonomodif = "";
    var celularmodif = "";
    var existe = "";
    var estcivil = "";
    var tipoPersonaModificar = "";
    var idTramite = "";
    var a = "";
    var b = "";
    var nombreimagen= "";
    var idArchivo = "";
    var tipoPersona = "";
    var tipoDocumento = "";
    var existeidArchivo = "";
    var direccionURL=CONFIG.IMG_URL+"/ciudadano/"+idTramite;
    var uploader = $scope.uploader;
    var datoObjectFinal = [];
    var datoObject = [];

    $scope.titulo = "Buscador";
    $scope.formularioNatural = null;
    $scope.formularioJuridico = null;
    //$scope.tipo_persona = "N";
    $rootScope.prsId=0;
    $rootScope._id = '';
    $rootScope.ciMod = '';
    $scope.img_ninguna=CONFIG.IMG_URL+"/uploads/im4g3nn0ne23133434290756564558453453460696847346.png";
    $scope.uploader = new FileUploader({});
    idCiu = sessionService.get("IDSOLICITANTE");
    sessionService.destroy("IDSOLICITANTE");

    $scope.cabeceraNatural = false;
    $scope.cabeceraJuridico = false;
    $scope.mostrarFormulario = false;
    $scope.naturalForm = false;
    $scope.juridicoForm = false;
    $scope.nombreViaCmb = false;
    $scope.nombreViaTxt = true;
    $scope.volverForm = false;

    $scope.tipoCategoria = true;
    $scope.btnGuardar = false;
    $scope.recuperarContri = 0;
    $scope.registraControbuyente = false;
    $scope.registrarActividad = true;
    $scope.generaLicencia = true;

    //////////////////////////////////////////////////////////////////////////////////////////////////////////
    /////////////////////////////////// RECUPERAR DATOS DE PERSONA NATURAL ///////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////
    $scope.verFormularioNatural = function (datos) {
        var paramPersona = {
            "procedure_name":"GENERAL.spDatosIdPersona",
            "body":{"params": [
                            {"name":"idPersona","param_type":"IN","value":datos.idContribuyente},
                            {"name":"tipo","param_type":"IN","value":"FULL"}
                            ]}
        };

        var obj=DreamFactory.api[CONFIG.SERVICEGENESIS].callStoredProcWithParams(paramPersona);
        obj.success(function(response){
            $.unblockUI();
            console.log("HOLA NATURAL");
            if(response.length > 0){

                var datos = {};
                $scope.tablaEmpresas = "mostrar";
                $scope.formularioNatural = "mostrar";
                $scope.formularioJuridico = null;
                $scope.tablaCiudadanos = null;
                $scope.tablaEmpresas = null;
                //$scope.desabilitado = "true";

                datos.f01_id_contribuyente = response[0].idPersona;
                datos.f01_id_actividad_economica = "";

                datos.f01_num_pmc = response[0].padron;
                datos.f01_tipo_per = "N";
                datos.f01_nit_prop = response[0].nit;
                datos.f01_tip_doc_prop = response[0].tipoIdentidad;
                datos.f01_num_dos_prop = response[0].identificacion;
                datos.f01_expedido_prop = response[0].expedicion;
                datos.f01_pri_nom_prop = response[0].primerNombre;
                datos.f01_seg_nom_prop = response[0].segundoNombre;
                datos.f01_ter_nom_prop = response[0].tercerNombre;
                datos.f01_ape_pat_prop = response[0].primerApellido;
                datos.f01_ape_mat_prop = response[0].segundoApellido;
                datos.f01_ape_cas_prop = response[0].tercerApellido;
                datos.f01_nac_prop = response[0].nacionalidad;
                datos.f01_fecha_nac = response[0].fechaNacimiento ;
                datos.f01_telef_prop = response[0].telefono;
                datos.f01_cel_prop = response[0].celular;
                datos.f01_email_prop = response[0].email;
                datos.f01_zon_prop = response[0].idZona;//
                datos.f01_zon_prop_descrip = response[0].zona;
                datos.f01_tip_via_prop = response[0].tipoVia;
                datos.f01_nom_via_prop = response[0].via;
                datos.f01_num_prop = response[0].numero;
                datos.f01_nom_edi_prop = response[0].edificio;
                datos.f01_bloq_prop = response[0].bloque;
                datos.f01_piso_prop = response[0].piso;
                datos.f01_depa_prop = response[0].departamento;
                datos.f01_dir_det_prop = response[0].direccionDetallada;

                $scope.datos = datos;

                sweet.show('', "Contribuyente encontrado", 'success');

                $scope.cabeceraNatural = true;
                $scope.cabeceraJuridico = false;
                $scope.mostrarFormulario = true;
                $scope.naturalForm = true;
                $scope.juridicoForm = false;


                $scope.tipoPersona = "OCULTAR";
                $scope.personaNatural = null;
                $scope.personaJuridica = null;
                $scope.tablaCiudadanos = null;
                $scope.tablaEmpresas = null;
                $scope.volverForm = true;
                $scope.btnGuardar = true;

                $rootScope.datosRequisitos = {};
                $rootScope.datosTecnicos = {};

                $scope.recuperarContri = 1;
            }
            else
            {
                sweet.show('', "No existen ninguno ciudadano", 'error');
                $scope.obtDatos = "";
                $scope.tablaCiudadanos = null;
                $scope.tablaEmpresas = null;
                $scope.formularioNatural = null;
                $scope.formularioJuridico = null;

                $scope.cabeceraNatural = false;
                $scope.cabeceraJuridico = false;
                $scope.mostrarFormulario = false;
                $scope.naturalForm = false;
                $scope.juridicoForm = false;
                $scope.volverForm = false;
                $scope.btnGuardar = false;
                $rootScope.datosRequisitos = {};
                $rootScope.datosTecnicos = {};
                $scope.recuperarContri = 0;

            }
        })
        obj.error(function(response){
            sweet.show('', "Datos no Encontrados !!!", 'warning');
            $.unblockUI();
        });
    };

    /////////////////////////////////// FIN RECUPERAR DATOS DE PERSONA NATURAL ///////////////////////////////////


    //////////////////////////////////////////////////////////////////////////////////////////////////////////
    /////////////////////////////////// RECUPERAR DATOS DE PERSONA NATURAL ///////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////
    $scope.verFormularioJuridico = function (datos) {
        //// 7815920
        //// 1015403021

        var paramPersonaJuridica = {
            "procedure_name":"GENERAL.spDatosIdEmpresa",
            "body":{"params": [
                {"name":"idContribuyente","param_type":"IN","value":datos.idContribuyente},
                {"name":"tipo","param_type":"IN","value":"FULL"}
            ]}
        };

        var obj=DreamFactory.api[CONFIG.SERVICEGENESIS].callStoredProcWithParams(paramPersonaJuridica);
        obj.success(function(response){
            console.log("HOLA JURIDICO",response);
            if(response.length > 0){

                /////////////////////////////////// representante legal ///////////////////////////////////

                    var paramRepLegal = {
                        "procedure_name":"GENERAL.spDatosRepresentanteLegalEmpresa",
                        "body":{"params": [
                                    {"name":"idContribuyente","param_type":"IN","value":datos.idContribuyente}
                        ]}
                    };

                    var obj=DreamFactory.api[CONFIG.SERVICEGENESIS].callStoredProcWithParams(paramRepLegal);
                    obj.success(function(responseLegal){
                        $.unblockUI();

                        if(response.length > 0){

                            var datos = {};
                            $scope.tablaEmpresas = "mostrar";
                            $scope.formularioNatural = "mostrar";
                            $scope.formularioJuridico = null;
                            $scope.tablaCiudadanos = null;
                            $scope.tablaEmpresas = null;
                            //$scope.desabilitado = "true";

                            console.log("DATOS OBETENIDOS",responseLegal);

                            datos.f01_id_contribuyente = response[0].idEmpresa;
                            datos.f01_id_actividad_economica = "";
                            datos.f01_num_pmc = response[0].padron;
                            //alert("natural: ",datos.f01_tipo_per);
                            datos.f01_tipo_per = "J";
                            datos.f01_num_doc_per_jur = response[0].nit;
                            
                            datos.f01_raz_soc_per_jur = response[0].empresa;
                            
                            datos.f01_id_representante_legal = responseLegal[0].idRepresentanteLegal;
                            datos.f01_tip_doc_rep = responseLegal[0].tipoIdentidad;
                            datos.f01_num_doc_rep = responseLegal[0].identificacion;
                            datos.f01_expedido_rep = responseLegal[0].expedicion;
                            datos.f01_pri_nom_rep = responseLegal[0].primerNombre;
                            datos.f01_seg_nom_rep = responseLegal[0].segundoNombre;
                            datos.f01_ter_nom_rep = responseLegal[0].tercerNombre;
                            datos.f01_ape_pat_rep = responseLegal[0].primerApellido;
                            datos.f01_ape_mat_rep = responseLegal[0].segundoApellido;
                            datos.f01_ape_cas_rep = responseLegal[0].tercerApellido;
                            datos.f01_telef_rep = response[0].telefono;
                            datos.f01_cel_rep = responseLegal[0].celular;
                            datos.f01_email_rep = responseLegal[0].correoElectronico;
                            datos.f01_zona_rep = parseInt(responseLegal[0].idZona);
                            datos.f01_zona_rep = responseLegal[0].zona;
                            datos.f01_tipo_viarep = responseLegal[0].tipoVia;
                            datos.f01_nom_via_rep = responseLegal[0].via;
                            datos.f01_num_rep = responseLegal[0].numeroVia;
                            datos.f01_ges_vig_pod = responseLegal[0].gestionPoder;
                            datos.f01_num_pod_leg = responseLegal[0].numeroPoder;
                            datos.f01_num_not = responseLegal[0].numeroNotaria;
                            $scope.datos = datos;
                            sweet.show('', "Contribuyente j encontrado", 'success');
                            $scope.cabeceraNatural = false;
                            $scope.cabeceraJuridico = true;
                            $scope.mostrarFormulario = true;
                            $scope.naturalForm = false;
                            $scope.juridicoForm = true;

                            $scope.tipoPersona = "OCULTAR";
                            $scope.personaNatural = null;
                            $scope.personaJuridica = null;
                            $scope.tablaCiudadanos = null;
                            $scope.tablaEmpresas = null;
                            $scope.volverForm = true;
                            $scope.btnGuardar = true;
                            $rootScope.datosRequisitos = {};
                            $rootScope.datosTecnicos = {};
                            $scope.recuperarContri = 1;
                        }
                        else
                        {
                            $scope.obtDatos = "";
                            $scope.tablaCiudadanos = null;
                            $scope.tablaEmpresas = null;
                            $scope.formularioNatural = null;
                            $scope.formularioJuridico = null;
                            $scope.cabeceraNatural = false;
                            $scope.cabeceraJuridico = false;
                            $scope.mostrarFormulario = false;
                            $scope.naturalForm = false;
                            $scope.juridicoForm = false;
                            sweet.show('', "No existen ninguno ciudadano", 'error');
                            $scope.volverForm = false;
                            $scope.btnGuardar = false;
                            $rootScope.datosRequisitos = {};
                            $rootScope.datosTecnicos = {};
                            $scope.recuperarContri = 0;
                        }
                    })
                    obj.error(function(response){
                        sweet.show('', "Datos no Encontrados !!!", 'warning');
                        $.unblockUI();
                    });

                /////////////////////////////////// representante legal ///////////////////////////////////
            }
            else
            {
                $scope.obtDatos = "";
                $scope.tablaCiudadanos = null;
                $scope.tablaEmpresas = null;
                $scope.formularioNatural = null;
                $scope.formularioJuridico = null;
                $scope.cabeceraNatural = false;
                $scope.cabeceraJuridico = false;
                $scope.mostrarFormulario = false;
                $scope.naturalForm = false;
                $scope.juridicoForm = false;
                sweet.show('', "No existen ninguno ciudadano", 'error');
            }
            $.unblockUI();
        })
        obj.error(function(response){
            sweet.show('', "Datos no Encontrados !!!", 'warning');
            $.unblockUI();
        });
    };

    /////////////////////////////////// FIN RECUPERAR DATOS DE PERSONA NATURAL ///////////////////////////////////
    $scope.nuevoForm = function () {
        $scope.datos= {};
        $rootScope.datosRequisitos = {};
        $rootScope.datosTecnicos = {};
        if($scope.tipoDePersona == "N")
        {
            $scope.tablaEmpresas = "mostrar";
            $scope.formularioNatural = "mostrar";
            $scope.formularioJuridico = null;
            $scope.tablaCiudadanos = null;
            $scope.tablaEmpresas = null;
            //$scope.desabilitado = false;
            $scope.cabeceraNatural = true;
            $scope.cabeceraJuridico = false;
            $scope.mostrarFormulario = true;
            $scope.naturalForm = true;
            $scope.juridicoForm = false;
            $scope.tipoPersona = "OCULTAR";
            $scope.personaNatural = null;
            $scope.personaJuridica = null;
            $scope.volverForm = true;
            $scope.datos.f01_tipo_per = "N";
            $scope.btnGuardar = true;
            $scope.recuperarContri = 0;
        }
        else
        {
            if($scope.tipoDePersona == "J")
            {
                $scope.tablaEmpresas = "mostrar";
                $scope.formularioNatural = "mostrar";
                $scope.formularioJuridico = null;
                $scope.tablaCiudadanos = null;
                $scope.tablaEmpresas = null;
                //$scope.desabilitado = false;
                $scope.cabeceraNatural = false;
                $scope.cabeceraJuridico = true;
                $scope.mostrarFormulario = true;
                $scope.naturalForm = false;
                $scope.juridicoForm = true;
                $scope.tipoPersona = "OCULTAR";
                $scope.personaNatural = null;
                $scope.personaJuridica = null;
                $scope.volverForm = true;
                //alert("natural2: ",$scope.datos.f01_tipo_per);
                $scope.datos.f01_tipo_per = "J";
                $scope.btnGuardar = true;

                $scope.recuperarContri = 0;
            }
        }
   };

    ////////////////////////////////////////////////////////////////////////////////////////////////
    /////////////////////////////////// CARGAR COMBOS FORMULARIO ///////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////
    // llamado a las zona - machositrito - distrito
    $scope.getMacrodistritos = function(){
        var parametros = {
            //"procedure_name":"ae.sp_lst_macrodistritos"            
            "procedure_name":"ae.sp_lst_macrodistritos_filtro",
            "body":{"params": [{"name":"id_macrodistrito","param_type":"IN","value": sessionService.get('US_IDMACRO')}]}                 
        };
        var ss =  DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(parametros).success(function (response){
            $scope.datosMacrodistritos= response;

            console.log("MACROOOOOO:::   ",$scope.datosMacrodistritos[0].macro);

            $scope.macrodistrito = $scope.datosMacrodistritos[0].macro;
            $scope.macrodistritoID = $scope.datosMacrodistritos[0].idmacro;

            $scope.getDistritos($scope.datosMacrodistritos[0].idmacro);
        });
        ss.error(function(results){
             alert("error");
        });
    }

    $scope.getDistritos = function(macro){
        var parametros = {
            "procedure_name":"ae.sp_lst_distritos",
            "body":{"params": [{"name":"id_macrodistrito","param_type":"IN","value":macro}]}            
        };
        var ss =  DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(parametros).success(function (response){
            $scope.datosDistritos = response;
            console.log("di   ",$scope.datos.f01_dist_act);
            for (var i = 0; i < $scope.datosDistritos.length; i++) {
                if ($scope.datosDistritos[i].iddistrito == $scope.datos.f01_dist_act) {
                    $scope.datos.f01_dist_act = $scope.datosDistritos[i].iddistrito;
                };
            };
        });
        ss.error(function(results){
             alert("error");
        });
    }

    $scope.getZonas = function(distrito){
        var parametros = {
            "procedure_name":"ae.sp_lst_zonas",
            "body":{"params": [{"name":"id_distrito","param_type":"IN","value":distrito}]}            
        };
        var ss =  DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(parametros).success(function (response){
            $scope.datosZonas = response;
            console.log(response);
            for (var i = 0; i < $scope.datosZonas.length; i++) {
                if ($scope.datosZonas[i].idzona == $scope.datos.f01_zona_act) {
                    $scope.datos.f01_zona_act = $scope.datosZonas[i].idzona;
                };
            };
        });
        ss.error(function(results){
             alert("error");
        });
    }

    $scope.getZonasCodigo = function(){
        var parametros = {
            "table_name":"ae._ae_codigoszonas",
            "filter":"codzon_gestion = " + sAnioServer + " and codzon_estado = 'V'"
            //"filter":"codzon_gestion = "+fecha.getFullYear()+" and codzon_estado = 'V'"
            //"filter":"codzon_gestion = 2007 and codzon_estado = 'V'"
        };
        var ss =  DreamFactory.api[CONFIG.SERVICE].getRecords(parametros).success(function (response){
            $scope.datosZonasCodigo= response.record;
        });
        ss.error(function(results){
             alert("error");
        });
    }

    $scope.getLicencias = function(){
        var parametros = {
             "procedure_name":"ae.sp_datos_licencia"            
        };
        var ss =  DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(parametros).success(function (response){
            $scope.datosLicencia= response;
            console.log($scope.datosLicencia);

            $scope.datos.f01_tipo_lic = parseInt($scope.datos.f01_tipo_lic);
            console.log($scope.datos.f01_tipo_lic);
        });
        ss.error(function(results){
             alert("error");
        });


        ////////////////////

        /*var parametros = {
            "procedure_name":"ae.sp_getrespuesta",
            "body":{"params": [{"name":"icategoria","param_type":"IN","value":1}]}
        };
        var ss =  DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(parametros).success(function (response){
            console.log("ross", response);
        });
        ss.error(function(results){
             alert("error");
        });*/
    }

    $scope.actividadDesarrolladaGrupo2 = function(){
        if ($scope.datos.f01_tipo_lic == 2 ) {
                $scope.divDos = true;
                $scope.divUnoTresCuatro = false;
        } else {
                $scope.divDos = false;
                $scope.divUnoTresCuatro = true;
        }
        
        var parametros = {
            "table_name":"ae._ae_actividad_desarrollada_134",
            "filter":"_estado = 'A'"
        };
        
        var ss =  DreamFactory.api[CONFIG.SERVICE].getRecords(parametros).success(function (response){
            $scope.actividadgrupo= response.record;
            console.log("$scope.actividadgrupo: ", $scope.actividadgrupo);
        });
        
        ss.error(function(results){
             alert("error");
        });
    }


    $scope.actividadDesarrollada134=function(idCatAgru){        
        if ($scope.datos.f01_tipo_lic == 2 ) {
                $scope.divDos = true;
                $scope.divUnoTresCuatro = false;
        } else {
                $scope.divDos = false;
                $scope.divUnoTresCuatro = true;
        }        
        var resQuery = {
            "procedure_name":"sp_actividad_desarrollada_grupo",
            "body":{
                    "params": [
                        {

                            "name": "idCatAgrupada",
                            "value": idCatAgru
                        }
                    ]
            }
        };
        DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(resQuery).success(function (response){
            //console.log(response);
            $scope.actividadesDesarrolladas = response;
            /*var promise = $scope.getTabla(response);
            promise.then(function(respuesta) {
                $scope.get_pre2(respuesta);
            }, function(reason) {
                alert('Failed: ' + reason);
            });*/
        });
    }
    
    $scope.escribirActividad = function(idCategoria, categoria){
        $scope.datos.f01_categoria= idCategoria;
        $scope.datos.f01_categoria_agrupada_descripcion= categoria;

    }
    
    $scope.tipoActividad = function(idLicencia){
        $scope.datos.f01_requisitos_actividad_economica = null;
        $rootScope.datosRequisitos = null;
        $scope.datos.f01_requisitos_tecnicos = null;
        $rootScope.datosTecnicos = null;

        if(idLicencia == 2)
        {
            $scope.getActividadDesarrollada();
            $scope.tipoCategoria = false;
            $scope.actividadDesarrollada = true;
            
            $scope.datos.f01_categoria_agrupada = "";
            $scope.datos.f01_categoria = "";
         
        }
        else
        {
            $scope.getCategorias(idLicencia);
            $scope.tipoCategoria = true;
            $scope.actividadDesarrollada = false;

            $scope.datos.f01_categoria_agrupada = "";
            $scope.datos.f01_categoria = "";
        }
    };

    $scope.getCategorias = function(idLicencia){
        console.log("TIPO LICENCIA: ", idLicencia);
        var parametros = {
            "procedure_name":"ae.sp_categoria_agrupada_licencia",
            "body":{"params": [{"name":"dependencia","param_type":"IN","value":idLicencia}]}           
        }; 
        var ss =  DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(parametros).success(function (response){
            if (response.length > 0 ) {
                $scope.desabilitt = false;
            }            
            console.log("11", response);
            $scope.datosCategoria= response;
        });
        ss.error(function(results){
             alert("error");
        });
    };
    ////////// id 20 solo para bebidas alcoholicas
    $scope.getActividadDesarrollada = function(){
        var parametros = {
            "procedure_name":"ae.sp_actividad_desarrollada_licencia",
            "body":{"params": [{"name":"dependencia","param_type":"IN","value":20}]}           
        }; 
        var ss =  DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(parametros).success(function (response){
            $scope.datosActividadDesarrollada= response;
        });
        ss.error(function(results){
             alert("error");
        });
    };
    //////////////////////////////////////////////////
    $scope.getRequisitosCategoria = function(idCategoria, persona){
        var aaaaa = {
            "procedure_name":"ae.sp_listarequisitos_documentales_categoria",
            "body":{
                "params": [
                    {"name":"dependencia","param_type":"IN","value":idCategoria},
                    {"name":"tipopersona","param_type":"IN","value":persona}
            ]}
        };
        var obj=DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(aaaaa);
        obj.success(function (datosRequisitosTmp) {
            console.log(datosRequisitosTmp.length);
            datoObjectFinal = [];
            for(j=0; j<datosRequisitosTmp.length; j++){
                datoObject = new Object(); 
                datoObject.resid = datosRequisitosTmp[j].idRequisito; 
                datoObject.resvalor = datosRequisitosTmp[j].descRequisito; 
                datoObject.estado=false;
                datoObjectFinal[j] = datoObject;
            }
            $scope.datos.f01_requisitos_actividad_economica = datoObjectFinal;
            $rootScope.datosRequisitos = datoObjectFinal;
            $scope.getRequisitosTecnicosCategoria(idCategoria,persona);
        })
        obj.error(function(error) {
            
        }); 
    };
        
    $scope.getRequisitosActividad = function(idCategoria, persona){        
        var aaaaa = {
            "procedure_name":"ae.sp_listarequisitos_documentales_actividad",
            "body":{
                "params": [
                    {"name":"dependencia","param_type":"IN","value":idCategoria},
                    {"name":"tipopersona","param_type":"IN","value":persona}
            ]}
        };
        var obj=DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(aaaaa);
        obj.success(function (datosRequisitosTmp) {
            console.log(datosRequisitosTmp.length);
            datoObjectFinal = [];
            for(j=0; j<datosRequisitosTmp.length; j++){
                datoObject = new Object();
                datoObject.resid = datosRequisitosTmp[j].idRequisito;
                datoObject.resvalor = datosRequisitosTmp[j].descRequisito;
                datoObject.estado=false;
                datoObjectFinal[j] = datoObject;
            }
            $scope.datos.f01_requisitos_actividad_economica = datoObjectFinal;
            $rootScope.datosRequisitos = datoObjectFinal;
            $scope.getRequisitosTecnicosActividad(idCategoria);
        })
        obj.error(function(error) {

        });


    };
    $scope.getRequisitosTecnicosCategoria = function(idCategoria, persona){
        var aaaaa = {
            "procedure_name":"ae.sp_listarequisitos_tecnicos_categoria",
            "body":{
                "params": [
                    {"name":"dependencia","param_type":"IN","value":idCategoria},
                    {"name":"tipopersona","param_type":"IN","value":persona}
            ]}
        };
        var obj=DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(aaaaa);
        obj.success(function (datosRequisitosTmp) {
            console.log(datosRequisitosTmp.length);
            datoObjectFinal = [];
            for(j=0; j<datosRequisitosTmp.length; j++){
                datoObject = new Object();
                datoObject.resid = datosRequisitosTmp[j].idRequisito;
                datoObject.resvalor = datosRequisitosTmp[j].descRequisito;
                datoObject.estado=false;
                datoObjectFinal[j] = datoObject;
            }
            $scope.datos.f01_requisitos_tecnicos = datoObjectFinal;
            $rootScope.datosTecnicos = datoObjectFinal;
        })
        obj.error(function(error) {

        });
    };

    $scope.getRequisitosTecnicosActividad = function(idCategoria, persona){
        var aaaaa = {
            "procedure_name":"ae.sp_listarequisitos_tecnicos_actividad",
            "body":{
                "params": [
                    {"name":"dependencia","param_type":"IN","value":idCategoria},
                    {"name":"tipopersona","param_type":"IN","value":persona}
            ]}
        };
        var obj=DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(aaaaa);
        obj.success(function (datosRequisitosTmp) {
            console.log(datosRequisitosTmp.length);
            datoObjectFinal = [];
            for(j=0; j<datosRequisitosTmp.length; j++){
                datoObject = new Object();
                datoObject.resid = datosRequisitosTmp[j].idRequisito;
                datoObject.resvalor = datosRequisitosTmp[j].descRequisito;
                datoObject.estado=false;
                datoObjectFinal[j] = datoObject;
            }
            $scope.datos.f01_requisitos_tecnicos = datoObjectFinal;
            $rootScope.datosTecnicos = datoObjectFinal;
        })
        obj.error(function(error) {

        });
    };

    $scope.getZonaMD = function() {
        $scope.aZonaMD = {};
        var parametros = {
            "procedure_name": "lstzonamacrodistritos"
        };
        DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(parametros).success(function(response) {
            if (response.length > 0) {
                $scope.aZonaMD = response;
            } else {
                $scope.aZonaMD = "";
            }
        }).error(function(response) {});
    };

    $scope.actualizaZonaMD = function(dato) {
        var resproductos = {
            "procedure_name":"lstmacrodistritos",
            "body":{"params": [{"name":"idz","param_type":"IN","value":dato}]}
        };
        var obj=DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(resproductos);
        obj.success(function (data) {
            $scope.macrod = data;
            $rootScope.txtMacrodistritoDistrito = $scope.macrod[0].ymdst_macrodistrito;
            $rootScope.idMacrodistritoDistrito = $scope.macrod[0].yzona_mdst_id;
            $scope.registro['zona_mdst_id'] = $scope.macrod[0].yzona_mdst_id;

            $rootScope.txtDistrito = $scope.macrod[0].ydst_distrito;
            $rootScope.idDistrito = $scope.macrod[0].yzona_dst_id;
            $scope.registro['yzona_dst_id'] = $scope.macrod[0].yzona_dst_id;

            $.unblockUI();
        })
        obj.error(function(error) {
            $scope.errors["error_usuarios"] = error;
        });
    };

    $scope.cargarZonaContribuyente = function() {
        var resproductos = {
            "procedure_name":"ae.sp_datos_zona_todo"
        };
        var obj=DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(resproductos);
        obj.success(function (data) {
            $scope.datosZonaTodo = data;
            console.log("ZONAS CONTRIBUYENTE 0.-",data);
            if(typeof $scope.datos.f01_id_zona_rep != 'undefined' && $scope.datos.f01_id_zona_rep != ""){
                $scope.datos.f01_id_zona_rep = parseInt($scope.datos.f01_id_zona_rep);
            }else if(typeof $scope.datos.f01_zon_prop  !=   'undefined' && $scope.datos.f01_zon_prop){
                $scope.datos.f01_zon_prop = parseInt($scope.datos.f01_zon_prop);
            }
        })
        obj.error(function(error) {
        });
    };

    $scope.datosTipoVia = [
        {"idVia" : "AV", "nomVia": "AVENIDA"},
        {"idVia" : "CA", "nomVia": "CALLE"},
        {"idVia" : "CL", "nomVia": "CALLEJON"},
        {"idVia" : "CN", "nomVia": "CANCHA"},
        {"idVia" : "PR", "nomVia": "PARQUE"},
        {"idVia" : "PL", "nomVia": "PLAZA"},
        {"idVia" : "PA", "nomVia": "PASAJE"},
        {"idVia" : "ND", "nomVia": "NO DEFINIDO"}];

    $scope.cargarTipoVia = function(tipoTrayecto, dato) {
        if(tipoTrayecto == "TM")
        {
            var resproductos = {
                "procedure_name":"ae.sp_lst_tipos_via_tm",
                "body":{"params": [{"name":"idzona","param_type":"IN","value":dato.f01_zona_act}]}
            };
            var obj=DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(resproductos);
            obj.success(function (data) {
                if(data.length > 0)
                {
                     $scope.datosTipoVia = [
                    {"idVia" : "AV", "nomVia": "AVENIDA"},
                    {"idVia" : "CA", "nomVia": "CALLE"},
                    {"idVia" : "CL", "nomVia": "CALLEJON"},
                    {"idVia" : "CN", "nomVia": "CANCHA"},
                    {"idVia" : "PR", "nomVia": "PARQUE"},
                    {"idVia" : "PL", "nomVia": "PLAZA"},
                    {"idVia" : "PA", "nomVia": "PASAJE"},
                    {"idVia" : "ND", "nomVia": "NO DEFINIDO"}];
                    $scope.nombreViaCmb = false;
                    $scope.nombreViaTxt = true;
                }
                else
                {
                    $scope.datosTipoVia = [
                    {"idVia" : "AV", "nomVia": "AVENIDA"},
                    {"idVia" : "CA", "nomVia": "CALLE"},
                    {"idVia" : "CL", "nomVia": "CALLEJON"},
                    {"idVia" : "CN", "nomVia": "CANCHA"},
                    {"idVia" : "PR", "nomVia": "PARQUE"},
                    {"idVia" : "PL", "nomVia": "PLAZA"},
                    {"idVia" : "PA", "nomVia": "PASAJE"},
                    {"idVia" : "ND", "nomVia": "NO DEFINIDO"}]
                    $scope.nombreViaCmb = false;
                    $scope.nombreViaTxt = true;
                }
            })
            obj.error(function(error) {
            });
        }
        else
        {
            $scope.datosTipoVia = [
            {"idVia" : "AV", "nomVia": "AVENIDA"},
            {"idVia" : "CA", "nomVia": "CALLE"},
            {"idVia" : "CL", "nomVia": "CALLEJON"},
            {"idVia" : "CN", "nomVia": "CANCHA"},
            {"idVia" : "PR", "nomVia": "PARQUE"},
            {"idVia" : "PL", "nomVia": "PLAZA"},
            {"idVia" : "PA", "nomVia": "PASAJE"},
            {"idVia" : "ND", "nomVia": "NO DEFINIDO"}];
            $scope.nombreViaCmb = false;
            $scope.nombreViaTxt = true;
        }
    };

    /*$scope.cargarNombVia = function(tipoVia, dato) {
        var resproductos = {
            "procedure_name":"ae.sp_lst_tipos_via_cmb",
            "body":{
                "params": [
                    {"name":"idzona","param_type":"IN","value":dato.f01_zona_act},
                    {"name":"tipovia","param_type":"IN","value":tipoVia},
                ]
            }
        };
        var obj=DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(resproductos);
        obj.success(function (data) {
            $scope.datosNombVia = data;
        })
        obj.error(function(error) {
        });        
    };*/
        
        
    $scope.cargarNombVia = function(tipoVia, dato) {
        var resproductos = {
            "procedure_name":"ae.sp_lst_tipos_via_cmb",
            "body":{
                "params": [
                    {"name":"idzona","param_type":"IN","value":dato.f01_zona_act},
                    {"name":"tipovia","param_type":"IN","value":tipoVia},
                ]
            }
        };
        var obj=DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(resproductos);
        obj.success(function (data) {
             if (data.length > 0) {
                console.log("-------------------------data-------------------------2110");
                console.log(dato);
                console.log("-------------------------data-------------------------2110");
                $scope.datosNombVia = data;
                $scope.nombreViaCmb = true;
                if (dato.f01_factor == "VA") { 
                    $scope.nombreViaTxt = true;
                } else {
                    $scope.nombreViaTxt = false;
                }
            } else{
                $scope.nombreViaCmb = true;
                $scope.nombreViaTxt = false;
            }; 
        })
        obj.error(function(error) {
        });
    };

    $scope.cargarNombViaTxt = function(valor) {
        console.log(valor);
        if (valor == "NINGUNO"){
            $scope.nombreViaTxt = true;
            $scope.tipoTrayecto = false;
            $scope.datos.f01_factor ="VA";
        } else {
            $scope.nombreViaTxt = false;
            $scope.tipoTrayecto = true;
        }
    };
        
    /////////////////////////////////// FIN CARGAR COMBOS FORMULARIO ///////////////////////////////////
    /// datos de publicidad
    // datos de la la publicidad ******************************************************************************************************************************************************************
    //     DATIOS PUBLICIDAD ->   categoria -> tipo de letrero  ***********************************************************************************************************************************

    $scope.lscategoria = function(){
        $scope.DataCategoria = {};
        var parametros = {
            "procedure_name":"pub.sp_categorialetrero"
        };
        DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(parametros).success(function (response){
            if(response.length > 0){
                $scope.DataCategoria = response;
            }else{
                $scope.msg = "Error !!";
            }
        }).error(function(results){
        });
    };


    /*var mes=fecha.getMonth()+1;
    if(mes.toString().length==1)
        mes='0'+mes;
    var dia=fecha.getDate();
    if(dia.toString().length==1)
        dia='0'+dia;*/

    var mes =   sMesServer;
    var dia =   sDiaServer;


    //$scope.fechactuall= dia+ "/"+mes+ "/"+ fecha.getFullYear() ;//+ " " + fecha.getHours() + ":" + fecha.getMinutes() + ":" + fecha.getSeconds();
    //$scope.fechadatoo  = "01/01/1900";

    $scope.publi=[];
    //$scope.publi.FECHAINICIO=$scope.fechactuall;
    //$scope.publi.FECHAFIN=$scope.fechadatoo;
    $scope.lssubcategoria = function(){
        //$scope.publi=[];
        //$scope.carass = [];
        $scope.publi.INT_CATE="II Fija";
        $scope.publi.idcate=6;
        /*$scope.TipoLetrero = {};
        var idcate = "";
        if($scope.DataCategoria){
            angular.forEach($scope.DataCategoria, function(value, key) {
                if(value.p_categoria == idcatee){
                    idcate = value.p_idcategoria;
                }
            });
        }
        $scope.datos.idcate=idcate;*/
        //console.log($scope.datos.idcate);
        var parametros = {
            //"procedure_name":"pub.sp_tipoletrero_general",
            "procedure_name":"pub.sp_tipoletrero"//,
            /*"body":{"params": [
                {"name":"idcategoria","param_type":"IN","value":idcate}
            ]}*/

        };
        DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(parametros).success(function (response){
            if(response.length > 0){
                $scope.TipoLetrero = response;
                //console.log($scope.TipoLetrero);
            }else{
                $scope.msg = "Error !!";
            }
        }).error(function(results){
        });
    };

    $scope.ltCaracteristica = function(idlee){
        $scope.lCaracteristica = {};
        var idcarac = "";
        if($scope.TipoLetrero){
            angular.forEach($scope.TipoLetrero, function(value, key) {
                if(value.p_descripcion == idlee){
                    idcarac = value.p_idtipoletrero;
                }
            });
        }
        //console.log(idlee);
        $scope.publi.idcarac=idcarac;
        //console.log("idTL -> ",idcarac);
        //console.log("idTL *> ",$scope.publi.idcarac);
        var parametros = {
            "procedure_name":"pub.sp_letrero_caracteristica",
            "body":{"params": [
                {"name":"p_idtipoletrero","param_type":"IN","value":idcarac}
            ]}
        };
        DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(parametros).success(function (response){
            if(response.length > 0){
                $scope.lCaracteristica = response;
                //console.log($scope.lCaracteristica);
            }else{
                $scope.msg = "Error !!";
            }
        }).error(function(results){
        });
    };
    $scope.actulizarCaracteristica = function(){
        var id_cara="";
        var distNombre  = $scope.publi.INT_CARA;
        if($scope.lCaracteristica){
            angular.forEach($scope.lCaracteristica, function(value, key) {
                if(value.p_caracteristica == distNombre){
                    id_cara  =   value.p_idcaracteristica;
                }
            });
        }
        console.log(id_cara);
        $scope.publi.id_cara  =  id_cara;
    };

    $scope.lsCaracteristica = function(){
        $scope.lsTipovia = {};
        var parametros = {
            "procedure_name":"general.sp_catalogo",
            "body":{"params": [
                {"name":"clasificador","param_type":"IN","value":9}
            ]}
        };
        DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(parametros).success(function (response){
            if(response.length > 0){
                $scope.lsTipovia = response;
                //console.log($scope.lsTipovia);
            }else{
                $scope.msg = "Error !!";
            }
        }).error(function(results){
        });
    };
    // detalles del elemento publicidad
    //$scope.caras = [];
    $scope.detalle = [];
    $scope.edit = {};
    $scope.addUser = function(user){

        //if($scope.datos.caras.length>0){
        if($scope.carass =='' || $scope.carass == null || $scope.carass =="undefined" ){
            $scope.carass = [];
            //console.log("-*->",$scope.carass)
        }else{
            //$scope.carass = $scope.publi.caras;
            console.log("--*>",$scope.carass)
        }
        $scope.carass.push({
            //id      : user.id,
            desc    : user.desc,
            sup     : user.sup
        });
        //console.log($scope.carass);
        $scope.user = "";
        $scope.detalle = [];
        //$scope.actulizarCaras();
    };
    $scope.deleteUser = function(user){
        $scope.carass.splice( $scope.carass.indexOf(user), 1 );
    };
    $scope.editUser = function(user){
        delete $scope.edit[user.id];
    };
    $scope.showEdition = function($event, id){
        $scope.edit[id] = true;
        var input = angular.element($event.currentTarget).parent().find("input")[0];
        setTimeout(function(){
            input.focus();
            input.select();
        }, 50);
        //$scope.actulizarCaras();
    };
    $scope.actulizarCaras= function () {
        $scope.publi.caras = $scope.carass;
        //console.log("*************",$scope.publi.caras);
    };
    $scope.toggleMin = function() {
        $scope.minDate = new Date('01/01/2015');// $scope.minDate ? null : new Date();
    };

    $scope.toggleMin();

    $scope.changeHandler = function () {
        console.log($scope.publi.FECHAINICIO);
        var mes=$scope.publi.FECHAINICIO.getMonth()+1;
        if(mes.toString().length==1)
            mes='0'+mes;
        $scope.publi.FECHAINICIO= "01/"+mes+ "/"+ $scope.publi.FECHAINICIO.getFullYear();
    };

   $scope.adicionarpublicidad = function(public){
        //$scope.publi.caras = $scope.carass;
        //console.log(public);
        if(public.INT_NRO_CARA =='' || public.INT_NRO_CARA == null || public.INT_CARA =='' || public.INT_CARA == null ||
        public.INT_CATE =='' || public.INT_CATE == null || public.INT_TIPO_LETRE =='' || public.INT_TIPO_LETRE == null ||
        public.INT_DESC =='' || public.INT_DESC == null || public.INT_ALTO =='' || public.INT_ALTO == null || public.INT_ANCHO =='' || public.INT_ANCHO == null ){
            sweet.show('', 'Llene lo campos requeridos para la VIAE  ', 'error');
        }
        else{
            var id=0
            if($scope.datos.publicidad =='' || $scope.datos.publicidad == null || $scope.datos.publicidad =="undefined" ){
                if($scope.publicid =='' || $scope.publicid == null || $scope.publicid =="undefined" ){
                    $scope.publicid = [];
                    id=0;
                }
                id = $scope.publicid.length + 1;
            }else{
                //$scope.publicid = $scope.datos.publicidad;
                id = $scope.publicid.length + 1;
                console.log("-->",$scope.carass)
            }
            if(id<21){
                total = parseInt(public.INT_ALTO) * parseInt(public.INT_ANCHO);
                if (total < 700) {
                    $scope.id = id;
                    $scope.publicid.push({
                        id: id,
                        INT_NRO_CARA: public.INT_NRO_CARA,
                        INT_CARA: public.INT_CARA,
                        INT_CATE: public.INT_CATE,
                        INT_TIPO_LETRE: public.INT_TIPO_LETRE,
                        INT_DESC: public.INT_DESC.toUpperCase(),
                        INT_ALTO: public.INT_ALTO,
                        INT_ANCHO: public.INT_ANCHO,
                        id_cara: public.id_cara,
                        idcarac: public.idcarac,
                        idcate: public.idcate,
                        INT_SUP:total
                    });
                    $scope.publi=[];
                    $scope.publi.INT_CATE="II Fija";
                    $scope.publi.idcate=6;
                    $scope.lssubcategoria();
                    $scope.datos.publicidad = $scope.publicid;
                    $scope.Plubli_Grilla($scope.publicid);
                } else {
                    sweet.show('', 'La superficie de la VIAE excede los estadares permitidos', 'error');
                }
                /*$scope.id = id;
                $scope.publicid.push({
                    id: id,
                    INT_NRO_CARA: public.INT_NRO_CARA,
                    INT_CARA: public.INT_CARA,
                    INT_CATE: public.INT_CATE,
                    INT_TIPO_LETRE: public.INT_TIPO_LETRE,
                    INT_DESC: public.INT_DESC,
                    INT_ALTO: public.INT_ALTO,
                    INT_ANCHO: public.INT_ANCHO,
                    //caras: $scope.carass,
                    id_cara: public.id_cara,
                    idcarac: public.idcarac,
                    idcate: public.idcate
                });*/
            }else{
                sweet.show('', 'Llego al limite de registro de Publicidad', 'error');
            }

        }
    }

    $scope.onlyy=false;
    $scope.botonn="new";
    $scope.modificarPlubli = function(dato){
        console.log(dato);
        $scope.onlyy=true;
        $scope.botonn="upd";
        $scope.publi=dato;
        //$scope.carass = dato.caras;
        $scope.ltCaracteristica(dato.INT_TIPO_LETRE);
        //console.log(">>>>",$scope.publi);
    }
    
    $scope.eliminarPublicidadGrilla = function(fila){
        var indexini    = 0;
        var indexfin    = -1;
        var results     = $scope.datos.publicidad_grilla;
        $.each(results, function(key, value){
            if(key > 0){
                if(fila.INT_ALTO == value.INT_ALTO && fila.INT_ANCHO == value.INT_ANCHO && fila.INT_CARA == value.INT_CARA && fila.INT_DESC == value.INT_DESC && fila.INT_NRO_CARA == value.INT_NRO_CARA && fila.INT_SUP == value.INT_SUP && fila.INT_TIPO_LETRE == value.INT_TIPO_LETRE){
                    indexfin = indexini;
                }
            }
            indexini++;
        });
        if(indexfin != -1){
            $scope.datos.publicidad_grilla.splice(indexfin, 1);
        }
    }
    
    $scope.eliminarPubli = function(dato){
        $scope.publicid.splice( $scope.publicid.indexOf(dato), 1 );
        $scope.eliminarPublicidadGrilla(dato);
    }
    
    $scope.modificarpublicidad = function(dato){
        $scope.onlyy=true;
        $scope.botonn="new";
        delete $scope.edit[dato.id];
        $scope.publi=[];
        //$scope.carass = [];
        $scope.lssubcategoria();
    }
    $scope.NumericoAlto = function(alto){
        if(alto){
            alto = alto.replace(/[^,.0-9]+/g, "");
            alto = alto.replace(/,/g, ".");
            $scope.publi.INT_ALTO = alto;
        }
    }
    $scope.NumericoAncho = function(ancho){
        if(ancho){
            ancho = ancho.replace(/[^,.0-9]+/g, "");
            ancho = ancho.replace(/,/g, ".");
            $scope.publi.INT_ANCHO = ancho;
        }
    }
    //////////////////////////////////////////////       END PUBLICIDADA        ////////////////////////////////////////////////////////////////////////////////////

    $scope.startDateOpen = function($event) {
        if(!$scope.desabilitado)
        {
            $event.preventDefault();
            $event.stopPropagation();
            $scope.startDateOpened = true;
        }
    };
    $scope.startDateOpenIni = function($event) {
        $event.preventDefault();
        $event.stopPropagation();
        $scope.startDateOpenedIni = true;
    };
    $scope.abrirDivPersona = function(dato) {
        $scope.tipoDePersona = dato;
        if (dato=="N") {
            $scope.personaNatural = "mostrar";
            $scope.personaJuridica = null;
            $scope.tipoPersona = "ocultar";
            $scope.titulo = "Busqueda Persona Natural";
            $scope.frmPersonaNatural = "mostrar";
            $scope.frmPersonaJuridica = null;
            $scope.opcion="natural";
            //$scope.datos.f01_tipo_per = "N";
        } else {
            $scope.personaNatural = null;
            $scope.personaJuridica = "mostrar";
            $scope.tipoPersona = "ocultar";
            $scope.titulo = "Busqueda Persona Jurídica";
            $scope.frmPersonaNatural = null;
            $scope.frmPersonaJuridica = "mostrar";
            $scope.opcion="juridico";
            //$scope.datos.f01_tipo_per = "J";
        }
    }

    $scope.$watch('datos.f01_fecha_nac',function() {
        //console.log(22222);
        try {
            if ($scope.datos.f01_fecha_nac)
            {
                var dia_nacim = $scope.datos.f01_fecha_nac.getDate();
                var mes_nacim = $scope.datos.f01_fecha_nac.getMonth()+1;
                var anio_nacim = $scope.datos.f01_fecha_nac.getFullYear();
                $scope.datos.f01_fecha_nac = dia_nacim+"/"+mes_nacim+"/"+anio_nacim;
            }
        } catch (err) {}
    });

    $scope.calcularCapacidad = function(superficie)
    {
        if(superficie)
        {
            superficie = superficie.replace(/[^,.0-9]+/g, "");
            console.log(superficie);
            superficie = superficie.replace(/,/g, ".")
            console.log(superficie);
            $scope.datos.f01_sup = superficie;
            $scope.datos.f01_cap_aprox = parseFloat(superficie * 0.9).toFixed(0);//GENESIS VALIDA POR ENTERO
        }
        else
        {
            $scope.datos.f01_cap_aprox = 0;
        }
    }
    $scope.GetValueLicencia = function () {        
        var e = document.getElementById("f01_tipo_lic");
        $scope.datos.f01_tipo_lic_descrip = e.options[e.selectedIndex].text;        
    }
    $scope.GetValueCategoriaAgrupada = function () {
        var e = document.getElementById("f01_categoria_agrupada");
        $scope.datos.f01_categoria_descrip = e.options[e.selectedIndex].text;
        $scope.datos.f01_categoria_agrupada_descripcion = "";
        $scope.actividadDesarrollada134($scope.datos.f01_categoria_agrupada);
    }
    $scope.GetValueCategoria = function () {
        var e = document.getElementById("f01_categoria");
        $scope.datos.f01_categoria_descrip = "";
        $scope.datos.f01_categoria_agrupada_descripcion = e.options[e.selectedIndex].text;
        $scope.actividadDesarrolladaGrupo2();
    }

    $scope.GetValueMacrodistrito = function () {
        var e = document.getElementById("f01_macro_act");
        $scope.datos.f01_macro_act_descrip = e.options[e.selectedIndex].text;
    }
    $scope.GetValueDistrito = function () {
        var e = document.getElementById("f01_dist_act");
        $scope.datos.f01_dist_act_descrip = e.options[e.selectedIndex].text;
    }
    $scope.GetValueZonaActividad = function () {
        var e = document.getElementById("f01_zona_act");
        $scope.datos.f01_zona_act_descrip = e.options[e.selectedIndex].text;
        $scope.datos.f01_factor = "";
        $scope.datos.f01_tip_via_act = "";
        $scope.datos.f01_num_act = "";
    }


    $scope.GetValueZonaContribuyenteJuridico = function () {
        var e = document.getElementById("f01_id_zona_rep");
        $scope.datos.f01_zona_rep = e.options[e.selectedIndex].text;
    }
    
    $scope.tipoTrayectoMain=false;
    if ($scope.datos.f01_zona_act !='' || $scope.datos.f01_zona_act != 'undefined') {
        $scope.tipoTrayectoMain=true;
    }
    else{
        $scope.tipoTrayectoMain=false;
    };

    $scope.GetTrayecto = function(id, tipo){
        if (tipo == 'd') {
            $scope.tipoTrayectoMain=false;
        }
        else
        {
            $scope.tipoTrayectoMain=true;
        };
    }
        
    $scope.GuardarTrayectoM = function(id, tipo){
        if ($scope.datos.f01_num_act == "NINGUNO") {
            if ($scope.datos.f01_num_act_n != "" && $scope.datos.f01_num_act_n != null ) {
                viaValor = true;
                $scope.datos.f01_num_act = $scope.datos.f01_num_act_n;
            } else {
                viaValor = false;
            }
        } else {
            viaValor = true;
        }
    }   
     
    $scope.GetDatosVia = function (id) {
        $scope.tipoTrayecto=false;  
        var resproductos = {
            "procedure_name":"ae.sp_lst_datos_via_cmb",
            "body":{
                "params": [
                    {"name":"idzona","param_type":"IN","value":id},
                ]
            }
        };
        var obj=DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(resproductos);
        obj.success(function (data) {
            if(data.length > 0) {                    
                $scope.datosNombreVia = [
                {"idVia" : "AV", "nomVia": "AVENIDA"}, 
                {"idVia" : "CA", "nomVia": "CALLE"}, 
                {"idVia" : "CL", "nomVia": "CALLEJON"}, 
                {"idVia" : "CN", "nomVia": "CANCHA"}, 
                {"idVia" : "PR", "nomVia": "PARQUE"}, 
                {"idVia" : "PL", "nomVia": "PLAZA"}, 
                {"idVia" : "PA", "nomVia": "PASAJE"}, 
                {"idVia" : "ND", "nomVia": "NO DEFINIDO"}];
                $scope.nombreViaCmb = true;
                $scope.nombreViaTxt = true;
                $scope.tipoTrayecto=true;
                console.log("trayecto matriz");
                $scope.datos.f01_factor ="TM";
            } else {
                $scope.datosTipoVia = [
                {"idVia" : "AV", "nomVia": "AVENIDA"}, 
                {"idVia" : "CA", "nomVia": "CALLE"}, 
                {"idVia" : "CL", "nomVia": "CALLEJON"}, 
                {"idVia" : "CN", "nomVia": "CANCHA"}, 
                {"idVia" : "PR", "nomVia": "PARQUE"}, 
                {"idVia" : "PL", "nomVia": "PLAZA"}, 
                {"idVia" : "PA", "nomVia": "PASAJE"}, 
                {"idVia" : "ND", "nomVia": "NO DEFINIDO"}]
                $scope.nombreViaCmb = true;
                $scope.nombreViaTxt = true;
                $scope.tipoTrayecto=false;
                $scope.datos.f01_factor ="VA";
            }
        })
        obj.error(function(error) {
        }); 
    }


    ///////////////////////////////////////////////////// FORM GUARDADO /////////////////////////////////////////////////////
        if($scope.datos.f01_tipo_per == "N")
        {
            $scope.tablaEmpresas = "mostrar";
            $scope.formularioNatural = "mostrar";
            $scope.formularioJuridico = null;
            $scope.tablaCiudadanos = null;
            $scope.tablaEmpresas = null;
            $scope.cabeceraNatural = true;
            $scope.cabeceraJuridico = false;
            $scope.mostrarFormulario = true;
            $scope.naturalForm = true;
            $scope.juridicoForm = false;

            $scope.tipoPersona = "OCULTAR";
            $scope.personaNatural = null;
            $scope.personaJuridica = null;
            $scope.tablaCiudadanos = null;
            $scope.tablaEmpresas = null;
            $scope.volverForm = true;
        }
        else
        {
            if($scope.datos.f01_tipo_per == "J")
            {
                $scope.tablaEmpresas = "mostrar";
                $scope.formularioNatural = "mostrar";
                $scope.formularioJuridico = null;
                $scope.tablaCiudadanos = null;
                $scope.tablaEmpresas = null;
                $scope.cabeceraNatural = false;
                $scope.cabeceraJuridico = true;
                $scope.mostrarFormulario = true;
                $scope.naturalForm = false;
                $scope.juridicoForm = true;

                $scope.tipoPersona = "OCULTAR";
                $scope.personaNatural = null;
                $scope.personaJuridica = null;
                $scope.tablaCiudadanos = null;
                $scope.tablaEmpresas = null;
                $scope.volverForm = true;
            }
        }

        if($scope.datos.f01_tipo_lic == 2)
        {
            $scope.getActividadDesarrollada();
            $scope.tipoCategoria = false;
            $scope.actividadDesarrollada = true;
        }
        else
        {
            $scope.getCategorias($scope.datos.f01_tipo_lic);
            $scope.tipoCategoria = true;
            $scope.actividadDesarrollada = false;
        }

        $scope.getDistritos($scope.datos.f01_macro_act);
        $scope.getZonas($scope.datos.f01_dist_act);
        $scope.cargarTipoVia($scope.datos.f01_factor, $scope.datos);
        $scope.cargarNombVia($scope.datos.f01_tip_via_act, $scope.datos)
        var a = $scope.datos.f01_requisitos_tecnicos
        var tecnico = [];
        for (var i = 1; i < a.length; i++) {
          tecnico[i-1] = a [i];
        }
         var b = $scope.datos.f01_requisitos_actividad_economica
        var documental = [];
        for (var i = 1; i < b.length; i++) {
          documental[i-1] = b[i];
        }
        $rootScope.datosTecnicos = tecnico;
        $rootScope.datosRequisitos = documental;
        $scope.btnGuardar = true;

        if($scope.datos.f01_id_contribuyente != "" && $scope.datos.f01_id_contribuyente != null)
        {
            $scope.desabilitado = true;
        }
        else
        {
            $scope.desabilitado = false;
        }

        if($scope.datos.f01_id_actividad_economica != "" && $scope.datos.f01_id_actividad_economica != null)
        {
            $scope.only = true;
        }
        else
        {
            $scope.only = false;
        }


    $scope.guardarDataForm = function(){
        if($scope.datos){
            $scope.guardarSoloData($scope.datos);
        }
    };

    $scope.guardarForm = function(tipoGuardado) {
        var tmpDatos            = $scope.datos;
        var tmpDatosPersona     = 0;
        var tmpDatosLicencia    = 0;
        var tmpDatosActividad   = 0;

        $scope.datos.f01_macro_act_descrip  = $scope.macrodistrito;
        $scope.datos.f01_macro_act          = $scope.macrodistritoID;
        $scope.modificarDataTramite         = '';

        if($scope.recuperarContri == 0){
            console.log("DATOS OBLIGATORIOS:", tmpDatos);
            //f01_zon_prop_descrip
            if( tmpDatos &&
                tmpDatos.f01_tipo_per == "N" &&
                tmpDatos.f01_tip_doc_prop != "" && tmpDatos.f01_tip_doc_prop != null &&
                tmpDatos.f01_tip_doc_prop != "" && tmpDatos.f01_tip_doc_prop != null &&
                tmpDatos.f01_num_dos_prop != "" && tmpDatos.f01_num_dos_prop != null &&
                tmpDatos.f01_expedido_prop != "" && tmpDatos.f01_expedido_prop != null &&
                tmpDatos.f01_pri_nom_prop != "" && tmpDatos.f01_pri_nom_prop != null &&
                ((tmpDatos.f01_ape_pat_prop != "" && tmpDatos.f01_ape_pat_prop != null) ||
                (tmpDatos.f01_ape_mat_prop != "" && tmpDatos.f01_ape_mat_prop != null)) &&
                tmpDatos.f01_nac_prop != "" && tmpDatos.f01_nac_prop != null &&
                tmpDatos.f01_fecha_nac != "" && tmpDatos.f01_fecha_nac != null &&
                ((tmpDatos.f01_telef_prop != "" && tmpDatos.f01_telef_prop != null) ||
                (tmpDatos.f01_cel_prop != "" && tmpDatos.f01_cel_prop != null)) &&
                //tmpDatos.f01_zon_prop_descrip != "" && tmpDatos.f01_zon_prop_descrip != null &&
                tmpDatos.f01_tip_via_prop != "" && tmpDatos.f01_tip_via_prop != null &&
                tmpDatos.f01_nom_via_prop != "" && tmpDatos.f01_nom_via_prop != null &&
                tmpDatos.f01_num_prop != "" && tmpDatos.f01_num_prop != null )
            {
                tmpDatosPersona = 1;
            }

            else
            {
                if( tmpDatos &&
                    tmpDatos.f01_tipo_per == "J" && tmpDatos.f01_tipo_per == "J" &&
                    tmpDatos.f01_num_doc_per_jur != "" && tmpDatos.f01_num_doc_per_jur != null &&
                    tmpDatos.f01_raz_soc_per_jur != "" && tmpDatos.f01_raz_soc_per_jur != null &&
                    tmpDatos.f01_tip_doc_rep != "" && tmpDatos.f01_tip_doc_rep != null &&
                    tmpDatos.f01_num_doc_rep != "" && tmpDatos.f01_num_doc_rep != null &&
                    tmpDatos.f01_expedido_rep != "" && tmpDatos.f01_expedido_rep != null &&
                    tmpDatos.f01_pri_nom_rep != "" && tmpDatos.f01_pri_nom_rep != null &&

                    ((tmpDatos.f01_ape_pat_rep != "" && tmpDatos.f01_ape_pat_rep != null) ||
                    (tmpDatos.f01_ape_mat_rep != "" && tmpDatos.f01_ape_mat_rep != null)) &&

                    //tmpDatos.f01_telef_rep != "" && tmpDatos.f01_telef_rep != null &&
                    tmpDatos.f01_zona_rep != "" && tmpDatos.f01_zona_rep != null &&
                    tmpDatos.f01_tipo_viarep != "" && tmpDatos.f01_tipo_viarep != null &&
                    tmpDatos.f01_nom_via_rep != "" && tmpDatos.f01_nom_via_rep != null &&
                    tmpDatos.f01_num_rep != "" && tmpDatos.f01_num_rep != null &&
                    tmpDatos.f01_ges_vig_pod != "" && tmpDatos.f01_ges_vig_pod != null &&
                    tmpDatos.f01_num_pod_leg != "" && tmpDatos.f01_num_pod_leg != null &&
                    tmpDatos.f01_num_not != "" && tmpDatos.f01_num_not != null )
                {
                    tmpDatosPersona = 1;
                }
            }
        }
        else
        {
            tmpDatosPersona = 1;
        }



        if( tmpDatos &&
            tmpDatos.f01_tip_act != "" && tmpDatos.f01_tip_act != null &&
            tmpDatos.f01_tipo_lic != "" && tmpDatos.f01_tipo_lic != null &&
            ((tmpDatos.f01_categoria_agrupada != "" && tmpDatos.f01_categoria_agrupada != null) ||
            (tmpDatos.f01_categoria != "" && tmpDatos.f01_categoria != null)) //&&
            //tmpDatos.f01_requisitos_tecnicos != "" && tmpDatos.f01_requisitos_tecnicos != null &&
            //tmpDatos.f01_requisitos_actividad_economica != "" && tmpDatos.f01_requisitos_actividad_economica != null
            )
        {
            tmpDatosLicencia = 1;
        }

        if( tmpDatos &&
            tmpDatos.f01_sup != "" && tmpDatos.f01_sup != null &&
            tmpDatos.f01_cap_aprox != "" && tmpDatos.f01_cap_aprox != null &&
            tmpDatos.f01_de_hor != "" && tmpDatos.f01_de_hor != null &&
            tmpDatos.f01_a_hor != "" && tmpDatos.f01_a_hor != null &&
            tmpDatos.f01_estab_es != "" && tmpDatos.f01_estab_es != null &&
            //tmpDatos.f01_macro_act != "" && tmpDatos.f01_macro_act != null &&
            tmpDatos.f01_dist_act != "" && tmpDatos.f01_dist_act != null &&
            tmpDatos.f01_zona_act != "" && tmpDatos.f01_zona_act != null &&
            tmpDatos.f01_factor != "" && tmpDatos.f01_factor != null &&
            tmpDatos.f01_tip_via_act != "" && tmpDatos.f01_tip_via_act != null &&
            tmpDatos.f01_num_act != "" && tmpDatos.f01_num_act != null &&
            tmpDatos.f01_num_act1 != "" && tmpDatos.f01_num_act1 != null &&
            tmpDatos.f01_hojas_recibidas != "" && tmpDatos.f01_hojas_recibidas != null &&
            tmpDatos.f04_res_solicitud_upaee != "" && tmpDatos.f04_res_solicitud_upaee != null &&
            tmpDatos.f01_idCodigoZona != "" && tmpDatos.f01_idCodigoZona != null &&
            tmpDatos.f01_observaciones_i != "" && tmpDatos.f01_observaciones_i != null )
        {
            tmpDatosActividad = 1;
        }

        console.log(tmpDatosPersona, tmpDatosLicencia, tmpDatosActividad);
        switch(tipoGuardado)
        {
            case "G":
                if(tmpDatosPersona == 1 && tmpDatosLicencia == 1 && tmpDatosActividad == 1){
                    console.log("entro IF");

                    console.log("ALMACENAR DATOS CIUDADANO", $scope.datos);
                    //VERIFICANDO EL EDITOR DE TEXTO - PARA LUEGO ALMACENARLO
                    var dataInformeRe   =   document.getElementById("f08_observaciones_i_r").value;
                    if(dataInformeRe){
                        $scope.datos.f08_observaciones_i_r    =   dataInformeRe;
                    }

                    $scope.datos.f01_macro_act_descrip = $scope.macrodistrito;
                    $scope.datos.f01_macro_act = $scope.macrodistritoID;
                    $scope.cargarDatos($scope.datos);
                    $scope.guardarData($scope.datos);
                    //$scope.evalReglasFormulario();
                }else{
                    sweet.show('', "Debe llenar todos los campos obligatorios * ", 'warning');
                }
                break;
            case "C":
            //setTimeout(function(){ $.blockUI(); },1000);
                if(tmpDatosPersona == 1 && tmpDatosLicencia == 1 && tmpDatosActividad == 1){
                    /*if($scope.datos.f01_id_contribuyente != "" && $scope.datos.f01_id_contribuyente != null)
                    {
                        sweet.show('', "Contribuyente ya registrado", 'warning');
                        $scope.registraContribuyente = true;
                        $scope.registrarActividad = false;
                    }else{
                        console.log("entro IF");
                        $scope.setContribuyente($scope.datos);
                    }*/
                    $scope.registraContribuyente=false;
                    console.log("ENVIANDO DATOS JURIDISO EMPRESA:", $scope.datos);
                    $scope.setContribuyente($scope.datos);

                }else{
                    setTimeout(function(){
                        sweet.show('', "Debe llenar todos los campos obligatorios *", 'warning');
                    }, 800);
                }
                break;
            case "L":
                if(tmpDatosPersona == 1 && tmpDatosLicencia == 1 && tmpDatosActividad == 1){
                    if($scope.datos.f01_id_contribuyente != "" && $scope.datos.f01_id_contribuyente != null){
                        if($scope.datos.f01_id_actividad_economica != "" && $scope.datos.f01_id_actividad_economica != null){
                            //$scope.getLicencia($scope.datos);
                            /*if ($scope.datos.swpublicidad == 'CP') {
                                setTimeout(function(){ $.blockUI(); },1000);
                                $scope.getRegistrarPublicidad($scope.datos);
                                setTimeout(function(){ $.unblockUI(); },1000);
                            } else{*/
                                $scope.getLicencia($scope.datos);
                            //};
                            //$scope.getLicencia($scope.datos);
                        }else{
                            sweet.show('', "Actividad no registrada", 'warning');
                        }
                    }else{
                        sweet.show('', "Contribuyente no registrado", 'warning');
                    }
                }else{
                    sweet.show('', "Debe llenar todos los campos obligatorios * ", 'warning');
                }
                break;
            case "M":
                if(tmpDatosPersona == 1 && tmpDatosLicencia == 1 && tmpDatosActividad == 1){
                    $scope.registraContribuyente    =   false;
                    //$scope.setModificarContribuyente($scope.datos);
                    $scope.setModificarActividadEconomica($scope.datos);
                }else{
                    setTimeout(function(){
                        sweet.show('', "Debe llenar todos los campos obligatorios *", 'warning');
                    }, 800);
                }
                break;
                
            case "N":
                if(tmpDatosPersona == 1 && tmpDatosLicencia == 1 && tmpDatosActividad == 1){
                    $scope.registraContribuyente    =   false;
                    $scope.setModificarDatosContribuyente($scope.datos);
                }else{
                    setTimeout(function(){
                        sweet.show('', "Debe llenar todos los campos obligatorios *", 'warning');
                    }, 800);
                }
                break;                
            /*case "A":
                if(tmpDatosPersona == 1 && tmpDatosLicencia == 1 && tmpDatosActividad == 1){
                    if($scope.datos.f01_id_contribuyente != "" && $scope.datos.f01_id_contribuyente != null){
                        if($scope.datos.f01_id_actividad_economica != "" && $scope.datos.f01_id_actividad_economica != null){
                            sweet.show('', "Actividad ya registrada", 'warning');
                            $scope.registrarActividad = true;
                            if ($scope.datos.swpublicidad == 'SP') {
                                $scope.datos.publicidad_grilla = [];
                                $scope.datos.publicidad = [];
                                $scope.registrarPublicidad = false;
                                $scope.generaLicencia = true;
                            } else{
                                var publi = $scope.datos.publicidad_grilla;
                                if (publi.length>0) {
                                    $scope.registrarPublicidad = true;
                                    $scope.generaLicencia = false;
                                }
                            };
                        }else{
                            console.log("entro IF");
                            $scope.registroActividad($scope.datos);
                            $scope.registrarActividad = true;
                            $scope.generaLicencia = false;
                        }
                    }else{
                        sweet.show('', "Debe registrar contribuyente primero", 'warning');
                    }
                }else{
                    sweet.show('', "Debe llenar todos los campos obligatorios * ", 'warning');
                }
                break;
            case "L":
                if(tmpDatosPersona == 1 && tmpDatosLicencia == 1 && tmpDatosActividad == 1){
                    if($scope.datos.f01_id_contribuyente != "" && $scope.datos.f01_id_contribuyente != null){
                        if($scope.datos.f01_id_actividad_economica != "" && $scope.datos.f01_id_actividad_economica != null){
                            //$scope.getLicencia($scope.datos);
                            if ($scope.datos.swpublicidad == 'CP') {
                                setTimeout(function(){ $.blockUI(); },1000);
                                $scope.getRegistrarPublicidad($scope.datos);
                                setTimeout(function(){ $.unblockUI(); },1000);
                            } else{
                                $scope.getLicencia($scope.datos);
                            };
                            //$scope.getLicencia($scope.datos);
                        }else{
                            sweet.show('', "Actividad no registrada", 'warning');
                        }
                    }else{
                        sweet.show('', "Contribuyente no registrado", 'warning');
                    }
                }else{
                    sweet.show('', "Debe llenar todos los campos obligatorios * ", 'warning');
                }
                break;
            case "P":
                if(tmpDatosPersona == 1 && tmpDatosLicencia == 1 && tmpDatosActividad == 1){
                    if($scope.datos.f01_id_contribuyente != "" && $scope.datos.f01_id_contribuyente != null){
                        if($scope.datos.f01_id_actividad_economica != "" && $scope.datos.f01_id_actividad_economica != null){
                            if($scope.datos.f01_id_actividad_publicidad != "" && $scope.datos.f01_id_actividad_publicidad != null){
                                sweet.show('', "Publicidad ya registrada", 'warning');
                                console.log("publicidad verdaddd    ",$scope.datos.f01_id_actividad_publicidad);
                                $scope.registrarPublicidad = true;
                                $scope.generaLicencia = false;
                            }else{
                                console.log("entro IF");
                                $scope.getRegistrarPublicidad($scope.datos);
                            }
                        }else{
                            sweet.show('', "Actividad no registrada", 'warning');
                        }
                    }else{
                        sweet.show('', "Contribuyente no registrado", 'warning');
                    }
                }else{
                    sweet.show('', "Debe llenar todos los campos obligatorios * ", 'warning');
                }
                break;*/
        }
    };

    $scope.getRegistrarPublicidad=function(dato){
        console.log("DATOS PUBLICIDAD:", dato);
        //$.blockUI();
        var sFechaServer   =   obtFechaHoraServer.obtenerFecha();
        console.log("Fecha servidor ae :", sFechaServer);
        $scope.publi_envio = [];
        for(j=0; j<dato.publicidad.length;j++) {
            console.log(">>>>>>",dato.publicidad[j]);
            var superior = dato.publicidad[j].INT_ALTO * dato.publicidad[j].INT_ANCHO;
            superior = (Math.round(superior * 10) / 10)+"";
            var supe = superior.replace(".",",");
            //superior = superior.replace(",",".");
            var palto   =   dato.publicidad[j].INT_ALTO;
            var pancho  =   dato.publicidad[j].INT_ANCHO;
            
            palto   =   parseFloat(palto).toFixed(2);
            palto   =   palto.replace(".",",");

            pancho  =   parseFloat(pancho).toFixed(2);
            pancho  =   pancho.replace(".",",");

            $scope.publi_envio.push({
                nroElem: j+1,
                idActividadEconomica: dato.f01_id_actividad_economica,
                idContribuyente: dato.f01_id_contribuyente,
                clase: dato.f01_tipo_per,
                ipUsuario: dato.ipusuario,
                equipo: "GMLPSR0024",
                usuario: sessionService.get('US_NOMBRE')+" "+sessionService.get('US_PATERNO')+" "+sessionService.get('US_MATERNO'),
                funcionario: sessionService.get('US_GENESIS'),
                idCategoria: dato.publicidad[j].idcate,
                idTipoLetrero: dato.publicidad[j].idcarac,
                idCaracteristica: dato.publicidad[j].id_cara,
                fechaInicio: sFechaServer,//dato.publicidad[j].FECHAINICIO,//PARA EMISION DE LICENCIAS
                fechaFin: dato.f01_fecha_fin_act,
                viaMatriz: dato.f01_factor,
                idZona: dato.f01_idCodigoZona,
                tipoVia: dato.f01_tip_via_act,
                via: dato.f01_nom_via_prop,
                numero: dato.f01_num_prop,
                alto: palto,
                ancho: pancho,
                placa: "ND ",
                desc: dato.publicidad[j].INT_DESC,
                sup: supe
            });
        }
        var jsonString= JSON.stringify($scope.publi_envio);
        console.log($scope.publi_envio);
        console.log(jsonString);
        wsRgistrarPubliciadad.registra_publicidades(jsonString).then(function(response){
            console.log("datos response:", response);
            //sweet.show('Publicidad Registrada', 'La Publicidad se Registro correctamente', 'success');
            $scope.datos.f01_id_actividad_publicidad = response;
            //$scope.getLicencia($scope.datos);
            setTimeout(function(){ $.unblockUI(); },1000);
            //$scope.registrarPublicidad = true;
            //$scope.generaLicencia = false;
            //$.unblockUI();
        });
    };

    datoObjectFinalPub = [];

    if ($scope.datos.publicidad_grilla == [] || $scope.datos.publicidad_grilla == undefined || $scope.datos.publicidad_grilla == null){
        $scope.datos.swpublicidad = 'SP';
    }
    else{
        var respuestPub = $scope.datos.publicidad_grilla;
        if (respuestPub.length > 0) {
            $scope.datos.swpublicidad = 'CP';
            for(j=1; j<respuestPub.length;j++){
                datoObjectPub = new Object();
                datoObjectPub.nroElem=respuestPub[j].nroElem;
                datoObjectPub.INT_TIPO_LETRE=respuestPub[j].INT_TIPO_LETRE;
                datoObjectPub.INT_CARA=respuestPub[j].INT_CARA;
                datoObjectPub.FECHAINICIO=respuestPub[j].FECHAINICIO;
                datoObjectPub.INT_DESC=respuestPub[j].INT_DESC;
                datoObjectPub.INT_ALTO=respuestPub[j].INT_ALTO;
                datoObjectPub.INT_ANCHO=respuestPub[j].INT_ANCHO;
                datoObjectFinalPub[j-1] = datoObjectPub;
            }
            $scope.datosPublicidad = datoObjectFinalPub;
        }
    };

    $scope.getTecnico = function(dato){
        if(dato=='RECHAZADO' || dato=='OBSERVADO'){
            $scope.guardarae    =   false;
            $scope.registraContribuyente    =   true;
        }
        else{
            $scope.registraContribuyente    =   false;
            $scope.guardarae    =   true;
        }
    }

    if ($scope.datos.f02_la_sol_proced == "RECHAZADO" || $scope.datos.f02_la_sol_proced == "OBSERVADO")
        $scope.guardarae = false;
    else
        $scope.guardarae = true;

    ///////////////////////////////////////////////////////////////////////////////////////////
    /////////////////////////////////// FUNCIONES DE INICIO ///////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////

    $scope.validarDatosInicio = function(){
        if($scope.datos){
            var sSegundoNombre      =    ((typeof($scope.datos.f01_seg_nom_prop) == 'undefined' || $scope.datos.f01_seg_nom_prop == null || $scope.datos.f01_seg_nom_prop == 'NULL') ? ""   : $scope.datos.f01_seg_nom_prop.trim());
            var sNitPersona         =    ((typeof($scope.datos.f01_nit_prop) == 'undefined' || $scope.datos.f01_nit_prop == null || $scope.datos.f01_nit_prop == 'NULL') ? ""   : $scope.datos.f01_nit_prop.trim());
            var sApellidoCasada     =    ((typeof($scope.datos.f01_ape_cas_prop) == 'undefined' || $scope.datos.f01_ape_cas_prop == null || $scope.datos.f01_ape_cas_prop == 'NULL') ? ""   : $scope.datos.f01_ape_cas_prop.trim());

            $scope.datos.f01_seg_nom_prop   =   sSegundoNombre;
            $scope.datos.f01_nit_prop       =   sNitPersona;
            $scope.datos.f01_ape_cas_prop   =   sApellidoCasada;
        }
    }

    $scope.vistaPrevisualizarLicencia = function(){
      $('.pagination').hide();
      $('.btn-group').hide();
      console.log("VISTA DATOS DE IMPRESION:");
        var vistap=document.getElementById('previsualizarVista');
        vistap.innerHTML  = '<p></p>';
        $scope.tituloImp  = "VISTA PRELIMINAR - VERIFIQUE LOS DATOS ANTES DE REGISTRAR Y GENERAR LA LICENCIA DE FUNCIONAMIENTO ";
    };

    //AE - REGISTRAR CONTRIBUYENTE
    $scope.registrarActividadEconomica = function(){
        sweet.show({
            title: 'Registro',
            text: 'Esta seguro de Registrar al Contribuyente y la Actividad Economica ?',
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#DD6B55',
            confirmButtonText: 'SI',
            closeOnConfirm: false
        }, function() {
            sweet.close();
            $scope.GuardarTrayectoM();
            $scope.guardarForm('C');
            $scope.guardarDataForm();
        });
    }

    //AE- MODIFICAR DATOS CONTRIBUYENTE
    $scope.modificarActividadEconomica = function(){
        sweet.show({
            title: 'Modificar',
            text: 'Esta seguro de Modificar datos del Contribuyente y/o la Actividad Economica ?',
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#DD6B55',
            confirmButtonText: 'SI',
            closeOnConfirm: false
        }, function() {
            sweet.close();
            $scope.guardarForm('M');
            $scope.guardarDataForm();
        });
    }
    
    $scope.modificarDatosContribuyente = function(){
        sweet.show({
            title: 'Modificar',
            text: 'Esta seguro de Modificar datos del Contribuyente ?',
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#DD6B55',
            confirmButtonText: 'SI',
            closeOnConfirm: false
        }, function() {
            sweet.close();
            $scope.guardarForm('N');
            $scope.guardarDataForm();
        });
    }    

    $scope.CamposModificarHabilitar = function (){
        $scope.verbtnlicencia = false; 
        $scope.licenciaRegistrado = true;
        $scope.registraContribuyente   =   false;
        var mdatos = document.getElementById('datoMod');
        console.log("ingresa a datos habiltar");
        if(mdatos.checked == true){
            //HABILITAR BOTONES 
            $scope.verbtnlicencia           =   false;//GENERAR LICENCIA
            $scope.verbtnModlicencia        =   true;//MODIFICAR LIENCIA
            $scope.verbtnReglicencia        =   false;//MODIFICAR LIENCIA
            $scope.verbtnModContribuyente   =   true;//MODIFICAR LIENCIA
            
            if($scope.tipoDePersona == "N"){
                $scope.desabilitado = false;
                $scope.only = false;
                $scope.contUsuRegistrado = false;
            }
            else{
                $scope.desabilitado = false;
                $scope.only = false;
                $scope.contUsuRegistrado = false;
            }
            console.log("datos deshabilitados");
        }
        else{
            $scope.verbtnlicencia           =   true;//GENERAR LICENCIA
            $scope.verbtnModlicencia        =   false;//MODIFICAR LIENCIA
            $scope.verbtnReglicencia        =   true;//MODIFICAR LIENCIA
            $scope.verbtnModContribuyente   =   false;//MODIFICAR LIENCIA
            $scope.modificarDataTramite     =   "";
            console.log("Datos habilitados");
        }
    }


    //REGISTRAR - GENERAR LICENCIA
    $scope.generarLicenciaAE = function(){
        /*sweet.show({
            title: 'Cerrar',
            text: 'Esta seguro de Generar la Licencia ?',
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#DD6B55',
            confirmButtonText: 'SI',
            closeOnConfirm: false
        }, function() {
            sweet.close();*/
            $scope.guardarForm('L');
        /*});*/
    }

    $scope.mostrarLicenciaGenerada = function(){
        if($scope.datos.urllicencia){
            $window.open($scope.datos.urllicencia);
        }
    }

    $scope.controlarBtnForm = function(){
        $scope.contUsuRegistrado        =   false;
        $scope.licenciaRegistrado       =   true;
        $scope.form400Registrado        =   true;

        /*only*/
        $scope.only                     =   false;
        $scope.desabilitado             =   false;

        console.log("DATOS CONTRIBUYENTE:", $scope.datos.f01_contri_act_registrado);

        if(typeof $scope.datos.f01_contri_act_registrado != 'undefined' && $scope.datos.f01_contri_act_registrado != null){
            $scope.contUsuRegistrado        =   $scope.datos.f01_contri_act_registrado;
            $scope.registraContribuyente    =   false;
            /*only*/
            $scope.only                     =   true;
            $scope.desabilitado             =   true;
            //$scope.contUsuRegistrado        =   false;
        }//HABILITAR BOTON REGISTRAR ACTIVIDAD - SEGUN COMBO SOLICITUD
        else if($scope.datos.f04_res_solicitud_upaee=='RECHAZADO' || $scope.datos.f04_res_solicitud_upaee=='OBSERVADO'){
            $scope.guardarae                =   false;
            $scope.registraContribuyente    =   true;
        }
        else{
            $scope.registraContribuyente    =   false;
            $scope.guardarae                =   true;
        }

        if(typeof $scope.datos.f01_licencia_registrado != 'undefined' && $scope.datos.f01_licencia_registrado != null){
            $scope.licenciaRegistrado    =   $scope.datos.f01_licencia_registrado;
        }

        if(typeof $scope.datos.f01_form_400_registrado != 'undefined' && $scope.datos.f01_form_400_registrado != null){
            $scope.form400Registrado    =   $scope.datos.f01_form_400_registrado;
        }

        //HABILITANDO EL BOTON GUARDAR / CONTINUAR
        if($scope.contUsuRegistrado == true && $scope.licenciaRegistrado == true){
            $scope.guardarae   =   false;
        }

        //HABILITANDO EDITOR EN CASO DE RECHAZO
        if($scope.datos.f04_res_solicitud_upaee=='RECHAZADO' || $scope.datos.f04_res_solicitud_upaee=='OBSERVADO'){
            $scope.informeRechazo          =   true;
        }else{
            $scope.informeRechazo          =   false;
        }

        //MOSTRAR/OCULTAR BOTONES GENERAR LICENCIA - VER LICENCIA
        if(typeof $scope.datos.urllicencia != 'undefined' && $scope.datos.urllicencia != ''){
            $scope.verbtnlicencia          =   true;
        }else{
            $scope.verbtnlicencia          =   false;
        }

        console.log("LICENCIA BTB LICENCIA:", $scope.verbtnlicencia);
    }

    //AE - HABILITAR LOS CAMPOS, EN CASO DE OBSERVADO
    $scope.verbtnReglicencia        =   true;
    $scope.verbtnModlicencia        =   false;
    $scope.verbtnModContribuyente   =   false;
    //DATOS PARA VALIDAR LA MODIFICACION DEL TRAMITE        
    $scope.modificarDataTramite     =   '';
        

    $scope.validarInformeRechazo85  =   function(){
        if($scope.datos.f85_firma_VALOR && $scope.datos.f85_firma_VALOR == 'OBSERVAR'){

            //alert(" tramite observado servicio !!!");

            $scope.desabilitado             =   false;
            $scope.only                     =   false;
            $scope.contUsuRegistrado        =   false;

            $scope.verbtnlicencia           =   false;//GENERAR LICENCIA
            $scope.verbtnModlicencia        =   true;//MODIFICAR LIENCIA
            $scope.verbtnReglicencia        =   false;//MODIFICAR LIENCIA
            $scope.verbtnModContribuyente   =   false;//MODIFICAR LIENCIA
        }
    };

    $scope.cargarInforme= function(){
        if($scope.f08_observaciones_i_r){
            document.getElementById("f08_observaciones_i_r").value = $scope.f08_observaciones_i_r;
        }
    }

    $scope.validarCamposObligatorios = function(){
        console.log("DATOS INICIALES DATA: ", $scope.datos);
        var aDatos          =   $scope.datos;
        var sCamposNatural  =   "";
        var aCampos         =   new Array();


        if(aDatos.f01_tipo_per && aDatos.f01_tipo_per == 'N'){
            //DATOS OBLIGATORIOS - CONTRIBUYENTE NATURAL
            var f01_tipo_per        =   ((typeof(aDatos.f01_tipo_per)== 'undefined' || aDatos.f01_tipo_per == null) ? aCampos.push('f01_tipo_per') : aDatos.f01_tipo_per);
            var f01_tip_doc_prop    =   ((typeof(aDatos.f01_tip_doc_prop)== 'undefined' || aDatos.f01_tip_doc_prop == null) ? aCampos.push('f01_tip_doc_prop') : aDatos.f01_tip_doc_prop);
            var f01_num_dos_prop    =   ((typeof(aDatos.f01_num_dos_prop)== 'undefined' || aDatos.f01_num_dos_prop == null) ? aCampos.push('f01_num_dos_prop') : aDatos.f01_num_dos_prop);
            var f01_expedido_prop   =   ((typeof(aDatos.f01_expedido_prop)== 'undefined' || aDatos.f01_expedido_prop == null) ? aCampos.push('f01_expedido_prop') : aDatos.f01_expedido_prop);
            var f01_pri_nom_prop    =   ((typeof(aDatos.f01_pri_nom_prop)== 'undefined' || aDatos.f01_pri_nom_prop == null) ? aCampos.push('f01_pri_nom_prop') : aDatos.f01_pri_nom_prop);
            var f01_ape_pat_prop    =   ((typeof(aDatos.f01_ape_pat_prop)== 'undefined' || aDatos.f01_ape_pat_prop == null) ? aCampos.push('f01_ape_pat_prop') : aDatos.f01_ape_pat_prop);
            var f01_ape_mat_prop    =   ((typeof(aDatos.f01_ape_mat_prop)== 'undefined' || aDatos.f01_ape_mat_prop == null) ? aCampos.push('f01_ape_mat_prop') : aDatos.f01_ape_mat_prop);
            var f01_nac_prop        =   ((typeof(aDatos.f01_nac_prop)== 'undefined' || aDatos.f01_nac_prop == null) ? aCampos.push('f01_nac_prop') : aDatos.f01_nac_prop);
            var f01_fecha_nac       =   ((typeof(aDatos.f01_fecha_nac)== 'undefined' || aDatos.f01_fecha_nac == null) ? aCampos.push('f01_fecha_nac') : aDatos.f01_fecha_nac);
            var f01_telef_prop      =   ((typeof(aDatos.f01_telef_prop)== 'undefined' || aDatos.f01_telef_prop == null) ? aCampos.push('f01_telef_prop') : aDatos.f01_telef_prop);
            var f01_cel_prop        =   ((typeof(aDatos.f01_cel_prop)== 'undefined' || aDatos.f01_cel_prop == null) ? aCampos.push('f01_cel_prop') : aDatos.f01_cel_prop);
            var f01_zon_prop_descrip=   ((typeof(aDatos.f01_zon_prop_descrip)== 'undefined' || aDatos.f01_zon_prop_descrip == null) ? aCampos.push('f01_zon_prop_descrip') : aDatos.f01_zon_prop_descrip);
            var f01_tip_via_prop    =   ((typeof(aDatos.f01_tip_via_prop)== 'undefined' || aDatos.f01_tip_via_prop == null) ? aCampos.push('f01_tip_via_prop') : aDatos.f01_tip_via_prop);
            var f01_nom_via_prop    =   ((typeof(aDatos.f01_nom_via_prop)== 'undefined' || aDatos.f01_nom_via_prop == null) ? aCampos.push('f01_nom_via_prop') : aDatos.f01_nom_via_prop);
            var f01_num_prop        =   ((typeof(aDatos.f01_num_prop)== 'undefined' || aDatos.f01_num_prop == null) ? aCampos.push('f01_num_prop') : aDatos.f01_num_prop);

        }else if(aDatos.f01_tipo_per && aDatos.f01_tipo_per == 'J'){
            //DATOS OBLIGATORIOS - CONTRIBUYNTE JURIDO

            var f01_tipo_per        =   ((typeof(aDatos.f01_tipo_per)== 'undefined' || aDatos.f01_tipo_per == null) ? aCampos.push('f01_tipo_per') : aDatos.f01_tipo_per);
            var f01_num_doc_per_jur        =   ((typeof(aDatos.f01_num_doc_per_jur)== 'undefined' || aDatos.f01_num_doc_per_jur == null) ? aCampos.push('f01_num_doc_per_jur') : aDatos.f01_num_doc_per_jur);
            var f01_raz_soc_per_jur        =   ((typeof(aDatos.f01_raz_soc_per_jur)== 'undefined' || aDatos.f01_raz_soc_per_jur == null) ? aCampos.push('f01_raz_soc_per_jur') : aDatos.f01_raz_soc_per_jur);
            var f01_tip_doc_rep        =   ((typeof(aDatos.f01_tip_doc_rep)== 'undefined' || aDatos.f01_tip_doc_rep == null) ? aCampos.push('f01_tip_doc_rep') : aDatos.f01_tip_doc_rep);
            var f01_num_doc_rep        =   ((typeof(aDatos.f01_num_doc_rep)== 'undefined' || aDatos.f01_num_doc_rep == null) ? aCampos.push('f01_num_doc_rep') : aDatos.f01_num_doc_rep);
            var f01_expedido_rep        =   ((typeof(aDatos.f01_expedido_rep)== 'undefined' || aDatos.f01_expedido_rep == null) ? aCampos.push('f01_expedido_rep') : aDatos.f01_expedido_rep);
            var f01_pri_nom_rep        =   ((typeof(aDatos.f01_pri_nom_rep)== 'undefined' || aDatos.f01_pri_nom_rep == null) ? aCampos.push('f01_pri_nom_rep') : aDatos.f01_pri_nom_rep);
            var f01_ape_pat_rep        =   ((typeof(aDatos.f01_ape_pat_rep)== 'undefined' || aDatos.f01_ape_pat_rep == null) ? aCampos.push('f01_ape_pat_rep') : aDatos.f01_ape_pat_rep);
            var f01_ape_mat_rep        =   ((typeof(aDatos.f01_ape_mat_rep)== 'undefined' || aDatos.f01_ape_mat_rep == null) ? aCampos.push('f01_ape_mat_rep') : aDatos.f01_ape_mat_rep);
            var f01_zona_rep        =   ((typeof(aDatos.f01_zona_rep)== 'undefined' || aDatos.f01_zona_rep == null) ? aCampos.push('f01_zona_rep') : aDatos.f01_zona_rep);
            var f01_tipo_viarep        =   ((typeof(aDatos.f01_tipo_viarep)== 'undefined' || aDatos.f01_tipo_viarep == null) ? aCampos.push('f01_tipo_viarep') : aDatos.f01_tipo_viarep);
            var f01_nom_via_rep        =   ((typeof(aDatos.f01_nom_via_rep)== 'undefined' || aDatos.f01_nom_via_rep == null) ? aCampos.push('f01_nom_via_rep') : aDatos.f01_nom_via_rep);
            var f01_num_rep        =   ((typeof(aDatos.f01_num_rep)== 'undefined' || aDatos.f01_num_rep == null) ? aCampos.push('f01_num_rep') : aDatos.f01_num_rep);
            var f01_ges_vig_pod        =   ((typeof(aDatos.f01_ges_vig_pod)== 'undefined' || aDatos.f01_ges_vig_pod == null) ? aCampos.push('f01_ges_vig_pod') : aDatos.f01_ges_vig_pod);
            var f01_num_pod_leg        =   ((typeof(aDatos.f01_num_pod_leg)== 'undefined' || aDatos.f01_num_pod_leg == null) ? aCampos.push('f01_num_pod_leg') : aDatos.f01_num_pod_leg);
            var f01_num_not        =   ((typeof(aDatos.f01_num_not)== 'undefined' || aDatos.f01_num_not == null) ? aCampos.push('f01_num_not') : aDatos.f01_num_not);
        }

        //DATOS LICENCIA
        var f01_tip_act        =   ((typeof(aDatos.f01_tip_act)== 'undefined' || aDatos.f01_tip_act == null) ? aCampos.push('f01_tip_act') : aDatos.f01_tip_act);
        var f01_tipo_lic        =   ((typeof(aDatos.f01_tipo_lic)== 'undefined' || aDatos.f01_tipo_lic == null) ? aCampos.push('f01_tipo_lic') : aDatos.f01_tipo_lic);
        var f01_categoria_agrupada        =   ((typeof(aDatos.f01_categoria_agrupada)== 'undefined' || aDatos.f01_categoria_agrupada == null) ? aCampos.push('f01_categoria_agrupada') : aDatos.f01_categoria_agrupada);
        var f01_categoria        =   ((typeof(aDatos.f01_categoria)== 'undefined' || aDatos.f01_categoria == null) ? aCampos.push('f01_categoria') : aDatos.f01_categoria);

        //ACTIVIDAD ECONOMICA
        var f01_sup        =   ((typeof(aDatos.f01_sup)== 'undefined' || aDatos.f01_sup == null) ? aCampos.push('f01_sup') : aDatos.f01_sup);
        var f01_cap_aprox        =   ((typeof(aDatos.f01_cap_aprox)== 'undefined' || aDatos.f01_cap_aprox == null) ? aCampos.push('f01_cap_aprox') : aDatos.f01_cap_aprox);
        var f01_de_hor        =   ((typeof(aDatos.f01_de_hor)== 'undefined' || aDatos.f01_de_hor == null) ? aCampos.push('f01_de_hor') : aDatos.f01_de_hor);
        var f01_a_hor        =   ((typeof(aDatos.f01_a_hor)== 'undefined' || aDatos.f01_a_hor == null) ? aCampos.push('f01_a_hor') : aDatos.f01_a_hor);
        var f01_estab_es        =   ((typeof(aDatos.f01_estab_es)== 'undefined' || aDatos.f01_estab_es == null) ? aCampos.push('f01_estab_es') : aDatos.f01_estab_es);
        var f01_dist_act        =   ((typeof(aDatos.f01_dist_act)== 'undefined' || aDatos.f01_dist_act == null) ? aCampos.push('f01_dist_act') : aDatos.f01_dist_act);
        var f01_zona_act        =   ((typeof(aDatos.f01_zona_act)== 'undefined' || aDatos.f01_zona_act == null) ? aCampos.push('f01_zona_act') : aDatos.f01_zona_act);
        var f01_factor        =   ((typeof(aDatos.f01_factor)== 'undefined' || aDatos.f01_factor == null) ? aCampos.push('f01_factor') : aDatos.f01_factor);
        var f01_tip_via_act        =   ((typeof(aDatos.f01_tip_via_act)== 'undefined' || aDatos.f01_tip_via_act == null) ? aCampos.push('f01_tip_via_act') : aDatos.f01_tip_via_act);
        var f01_num_act        =   ((typeof(aDatos.f01_num_act)== 'undefined' || aDatos.f01_num_act == null) ? aCampos.push('f01_num_act') : aDatos.f01_num_act);
        var f01_num_act1        =   ((typeof(aDatos.f01_num_act1)== 'undefined' || aDatos.f01_num_act1 == null) ? aCampos.push('f01_num_act1') : aDatos.f01_num_act1);
        var f01_hojas_recibidas        =   ((typeof(aDatos.f01_hojas_recibidas)== 'undefined' || aDatos.f01_hojas_recibidas == null) ? aCampos.push('f01_hojas_recibidas') : aDatos.f01_hojas_recibidas);
        //ESTE CAMPO ES GENERADO EN LA 80 -> var f04_res_solicitud_upaee        =   ((typeof(aDatos.f04_res_solicitud_upaee)== 'undefined' || aDatos.f04_res_solicitud_upaee == null) ? aCampos.push('f04_res_solicitud_upaee') : aDatos.f04_res_solicitud_upaee);
        var f01_idCodigoZona        =   ((typeof(aDatos.f01_idCodigoZona)== 'undefined' || aDatos.f01_idCodigoZona == null) ? aCampos.push('f01_idCodigoZona') : aDatos.f01_idCodigoZona);
        var f01_observaciones_i        =   ((typeof(aDatos.f01_observaciones_i)== 'undefined' || aDatos.f01_observaciones_i == null) ? aCampos.push('f01_observaciones_i') : aDatos.f01_observaciones_i);

        if(aCampos.length > 0){
            for (var i=0; i<aCampos.length; i++) {
                sCamposNatural  =   sCamposNatural + ", " + aCampos[i];
            }
            sCamposNatural  =   sCamposNatural.substring(1, sCamposNatural.length);
            console.log("CAMPOS REQUERIDOS 80:", sCamposNatural);
            //sweet.show('CAMPOS OBLIGATORIOS', sCamposNatural, 'warning');
        }
    };
        
    /*APIFICAR BUSQUEDA*/    
    $scope.buscarADesarrollada = function(data){        
        var descrip =   ""
        
        if(typeof data != 'undefined'){
            descrip = data.trim();
        }
        
        if ($scope.datos.f01_tipo_lic == 2 ) {
                $scope.divDos = true;
                $scope.divUnoTresCuatro = false;
        } else {
                $scope.divDos = false;
                $scope.divUnoTresCuatro = true;
        }        
        
        var resQuery = {
            "procedure_name":"sp_buscar_actividad_desarrollada_grupo_txt",
            "body":{
                    "params": [
                        {
                            "name": "idCatAgrupada",
                            "value": $scope.datos.f01_categoria_agrupada
                        },
                        {
                            "name": "descrip",
                            "value": descrip
                        }
                    ]
            }
        };
        DreamFactory.api[CONFIG.SERVICE].callStoredProcWithParams(resQuery).success(function (response){
            $scope.actividadesDesarrolladas = response;
        });
    };

    /*DOCUMENTOS DE SALIDA*/
    $scope.almacenarLicenciaAE = function(response){
        $scope.urlData = response;
        console.log('response', response);
        console.log("CASO ACTUAL: ", $scope.casoActual);
        console.log("CASO ACTUAL: ", $scope.sCasonombre);

        if($scope.urlData){
            var sDocSistema     =   "IF_AE_REGULAR";
            var sDocProceso     =   $scope.casoActual.procnombre;
            var sDocId          =   $scope.casoActual.casoid;
            var sDocCiNodo      =   $scope.casoActual.actnodo;
            var sDocDatos       =   "";
            var sDocUrl         =   response.descripcion;
            var sDocVersion     =   1;
            var sDocTiempo      =   60;
            var sDocFirmaDigital=   "0";
            var sDocUsuario     =   "";
            var sDocTipoDoc     =   "pdf";
            var sDocTamDoc      =   "";
            var sDocNombre      =   response.descripcion;

            var sDocTpsId       =   0;
            var sDocUrlLogica   =   response.descripcion;
            var sDocAcceso      =   "";
            var sDocTipoExt     =   "";
            var sDocNroTramNexo =   "";
            var sCasoCodigo     =   $scope.sCasonombre;

            var documento  =   new gIfDocumento();
            documento.doc_sistema = sDocSistema;
            documento.doc_proceso = sDocProceso;
            documento.doc_id = sDocId;
            documento.doc_ci_nodo = sDocCiNodo;
            documento.doc_datos = sDocDatos;
            documento.doc_url = sDocUrl;
            documento.doc_version = sDocVersion;
            documento.doc_tiempo = sDocTiempo;
            documento.doc_firma_digital = sDocFirmaDigital;
            documento.doc_usuario = sDocUsuario;
            documento.doc_tipo_documento = sDocTipoDoc;
            documento.doc_tamanio_documento = sDocTamDoc;
            documento.doc_nombre = sDocNombre;
            documento.doc_tps_doc_id = sDocTpsId;
            documento.doc_url_logica = sDocUrlLogica;
            documento.doc_acceso = sDocAcceso;
            documento.doc_tipo_documento_ext = sDocTipoExt;
            documento.doc_nrotramite_nexo = sDocNroTramNexo;
            documento.doc_id_codigo = sCasoCodigo;

            $scope.datosdocumento = documento;

            documento.almacenarDoc(function(resultado){
                resultadoApi = JSON.parse(resultado);
                if (resultadoApi.success) {
                    $scope.datos.urllicencia    =   response.descripcion;
                    $scope.verbtnlicencia       =   true;
                    $scope.guardarDataForm();
                    //$scope.validarEmisionCertificado($scope.casoActual.casoid, response.ruta);
                } else {
                    //$.unblockUI();
                    sweet.show(resultadoApi.error.message);
                }
            });
        }
    };

    $scope.inicioVariablesGenesis   = function(){
        //ID AREA RECAUDACION - SEGUN USUARIO
        var areaR   =   new arearecaudacion();
        //if(typeof sessionService.get('USUARIO') != 'undefined' && sessionService.get('USUARIO') != null){
        if(typeof sessionService.get('US_GENESIS') != 'undefined' && sessionService.get('US_GENESIS') != null){
            areaR.usuario   =   sessionService.get('US_GENESIS').trim();
        }else{
            areaR.usuario   =   '';
        }
        areaR.lstAreaRecaudacion(function(resultado){
            var resp    =   JSON.parse(resultado);
            console.log("DATOS PARA MIM RESPUESTA: ", resp);
            if(resp.success.dataSql.length > 0){
                $scope.f01_id_area_recuadadora  = resp.success.dataSql[0].idAreaRecaudacion;
            }else{
                sweet.show('', 'Area recaudadora inexistente, comunique con el administrador del Sistema', 'warning');
            }
        });
        //IP-EQUIPO
        var dataIps =   new ipae();
        dataIps.ipClienteServer(function(response){
            response    =   JSON.parse(response);
            $scope.ipCliente    =   response.success.ipcliente;
            $scope.ipServer     =   response.success.ipserver;
        });
    };
        
    //RECHAZO VIAE
    $scope.rechazoViae   = function(p){
        if (p==false || typeof(p)=='undefined'){
            $scope.btnEliMostrar   =   true;
            $scope.textAreaMostrar   =   true;
            if($scope.datos.txtareaObservacionesViae == ''){
                $scope.datos.txtareaObservacionesViae = 'Una o más de las VIAEs declaradas fue rechazada por no cumplir las condiciones técnicas según lo establecido en el comunicado GAMLP/SMDE/DAEGI/UPU/JEF-MJ No. 2/2017';
            }            
        } else {
            $scope.btnEliMostrar   =   false;
            $scope.textAreaMostrar   =   false;
            $scope.datos.txtareaObservacionesViae = '';
        }
    };

    $scope.validacionDatos = function(){
         console.log("Validacion de datos: ", $scope.datos);

        if($scope.datos.f01_tipo_per=="N"){
            $scope.datos.f01_a_hor                  =  ((typeof($scope.datos.f01_a_hor) == 'undefined' || $scope.datos.f01_a_hor == null) ? '' : $scope.datos.f01_a_hor);

            $scope.datos.f01_actividadesSecundarias =   ((typeof($scope.datos.f01_actividadesSecundarias)  == 'undefined' || $scope.datos.f01_actividadesSecundarias == null) ? '' : $scope.datos.f01_actividadesSecundarias);

            $scope.datos.f01_ape_cas_prop           = ((typeof($scope.datos.f01_ape_cas_prop) == 'undefined' || $scope.datos.f01_ape_cas_prop == null) ? '' : $scope.datos.f01_ape_cas_prop);

            $scope.datos.f01_ape_cas_rep            = ((typeof($scope.datos.f01_ape_cas_rep) == 'undefined' || $scope.datos.f01_ape_cas_rep == null) ? '' : $scope.datos.f01_ape_cas_rep);

            $scope.datos.f01_ape_pat_prop           = ((typeof($scope.datos.f01_ape_pat_prop) == 'undefined' || $scope.datos.f01_ape_pat_prop == null) ? '' : $scope.datos.f01_ape_pat_prop);

            $scope.datos.f01_ape_mat_prop           = ((typeof($scope.datos.f01_ape_mat_prop) == 'undefined' || $scope.datos.f01_ape_mat_prop == null) ? '' : $scope.datos.f01_ape_mat_prop);

            $scope.datos.f01_bloque_act             = ((typeof($scope.datos.f01_bloque_act) == 'undefined' || $scope.datos.f01_bloque_act == null) ? '' : $scope.datos.f01_bloque_act);

            $scope.datos.f01_cap_aprox              = ((typeof($scope.datos.f01_cap_aprox) == 'undefined' || $scope.datos.f01_cap_aprox == null) ? '' : $scope.datos.f01_cap_aprox);

            $scope.datos.f01_casilla                = ((typeof($scope.datos.f01_casilla) == 'undefined' || $scope.datos.f01_casilla == null) ? '' : $scope.datos.f01_casilla);

            $scope.datos.f01_categoria              = ((typeof($scope.datos.f01_categoria) == 'undefined' || $scope.datos.f01_categoria == null) ? '' : $scope.datos.f01_categoria);

            $scope.datos.f01_categoria_agrupada     = ((typeof($scope.datos.f01_categoria_agrupada) == 'undefined' || $scope.datos.f01_categoria_agrupada == null) ? '' : $scope.datos.f01_categoria_agrupada);

            $scope.datos.f01_categoria_agrupada_descripcion   = ((typeof($scope.datos.f01_categoria_agrupada_descripcion) == 'undefined' || $scope.datos.f01_categoria_agrupada_descripcion == null) ? '' : $scope.datos.f01_categoria_agrupada_descripcion);

            $scope.datos.f01_categoria_descrip      = ((typeof($scope.datos.f01_categoria_descrip) == 'undefined' || $scope.datos.f01_categoria_descrip == null) ? '' : $scope.datos.f01_categoria_descrip);

            $scope.datos.f01_cel_prop               = ((typeof($scope.datos.f01_cel_prop) == 'undefined' || $scope.datos.f01_cel_prop == null) ? '' : $scope.datos.f01_cel_prop);

            $scope.datos.f01_cod_luz                = ((typeof($scope.datos.f01_cod_luz) == 'undefined' || $scope.datos.f01_cod_luz == null) ? '' : $scope.datos.f01_cod_luz);

            $scope.datos.f01_de_hor                 = ((typeof($scope.datos.f01_de_hor) == 'undefined' || $scope.datos.f01_de_hor == null) ? '' : $scope.datos.f01_de_hor);

            $scope.datos.f01_dist_act               = ((typeof($scope.datos.f01_dist_act) == 'undefined' || $scope.datos.f01_dist_act == null) ? '' : $scope.datos.f01_dist_act);

            $scope.datos.f01_dist_act_descrip       = ((typeof($scope.datos.f01_dist_act_descrip) == 'undefined' || $scope.datos.f01_dist_act_descrip == null) ? '' : $scope.datos.f01_dist_act_descrip);

            $scope.datos.f01_dpto_of_loc            = ((typeof($scope.datos.f01_dpto_of_loc) == 'undefined' || $scope.datos.f01_dpto_of_loc == null) ? '' : $scope.datos.f01_dpto_of_loc);

            $scope.datos.f01_edificio_act           = ((typeof($scope.datos.f01_edificio_act) == 'undefined' || $scope.datos.f01_edificio_act == null) ? '' : $scope.datos.f01_edificio_act);  
            $scope.datos.f01_estab_es               = ((typeof($scope.datos.f01_estab_es) == 'undefined' || $scope.datos.f01_estab_es == null) ? '' : $scope.datos.f01_estab_es);

            $scope.datos.f01_expedido_prop          = ((typeof($scope.datos.f01_expedido_prop) == 'undefined' || $scope.datos.f01_expedido_prop == null) ? '' : $scope.datos.f01_expedido_prop);  
            $scope.datos.f01_factor                 = ((typeof($scope.datos.f01_factor) == 'undefined' || $scope.datos.f01_factor == null) ? '' : $scope.datos.f01_factor);

            $scope.datos.f01_fecha_fin_act          = ((typeof($scope.datos.f01_fecha_fin_act) == 'undefined' || $scope.datos.f01_fecha_fin_act == null) ? '' : $scope.datos.f01_fecha_fin_act); 

            $scope.datos.f01_fecha_imp              = ((typeof($scope.datos.f01_fecha_imp) == 'undefined' || $scope.datos.f01_fecha_imp == null) ? '' : $scope.datos.f01_fecha_imp);

            $scope.datos.f01_fecha_ini_act          = ((typeof($scope.datos.f01_fecha_ini_act) == 'undefined' || $scope.datos.f01_fecha_ini_act == null) ? '' : $scope.datos.f01_fecha_ini_act);

            $scope.datos.f01_fecha_nac              = ((typeof($scope.datos.f01_fecha_nac) == 'undefined' || $scope.datos.f01_fecha_nac == null) ? '' : $scope.datos.f01_fecha_nac);

            $scope.datos.f01_hojas_recibidas        = ((typeof($scope.datos.f01_hojas_recibidas) == 'undefined' || $scope.datos.f01_hojas_recibidas == null) ? '' : $scope.datos.f01_hojas_recibidas);

            $scope.datos.f01_idCodigoZona           = ((typeof($scope.datos.f01_idCodigoZona) == 'undefined' || $scope.datos.f01_idCodigoZona == null) ? '' : $scope.datos.f01_idCodigoZona);

            $scope.datos.f01_id_actividad_economica = ((typeof($scope.datos.f01_id_actividad_economica) == 'undefined' || $scope.datos.f01_id_actividad_economica == null) ? '' : $scope.datos.f01_id_actividad_economica); 

            $scope.datos.f01_macro_act              = ((typeof($scope.datos.f01_macro_act) == 'undefined' || $scope.datos.f01_macro_act == null) ? '' : $scope.datos.f01_macro_act); 

            $scope.datos.f01_macro_act_descrip   = ((typeof($scope.datos.f01_macro_act_descrip) == 'undefined' || $scope.datos.f01_macro_act_descrip == null) ? '' : $scope.datos.f01_macro_act_descrip);

            $scope.datos.f01_nac_prop   = ((typeof($scope.datos.f01_nac_prop) == 'undefined' || $scope.datos.f01_nac_prop == null) ? '' : $scope.datos.f01_nac_prop);  

            $scope.datos.f01_nit   = ((typeof($scope.datos.f01_nit) == 'undefined' || $scope.datos.f01_nit == null) ? '' : $scope.datos.f01_nit);  
            $scope.datos.f01_nit_prop   = ((typeof($scope.datos.f01_nit_prop) == 'undefined' || $scope.datos.f01_nit_prop == null) ? '' : $scope.datos.f01_nit_prop); 

            $scope.datos.f01_nom_via_prop   = ((typeof($scope.datos.f01_nom_via_prop) == 'undefined' || $scope.datos.f01_nom_via_prop == null) ? '' : $scope.datos.f01_nom_via_prop); 

            $scope.datos.f01_nro_orden   = ((typeof($scope.datos.f01_nro_orden) == 'undefined' || $scope.datos.f01_nro_orden == null) ? '' : $scope.datos.f01_nro_orden);

            $scope.datos.f01_num_act   = ((typeof($scope.datos.f01_num_act) == 'undefined' || $scope.datos.f01_num_act == null) ? '' : $scope.datos.f01_num_act);  
            $scope.datos.f01_num_act1   = ((typeof($scope.datos.f01_num_act1) == 'undefined' || $scope.datos.f01_num_act1 == null) ? '' : $scope.datos.f01_num_act1);

            $scope.datos.f01_num_dos_prop   = ((typeof($scope.datos.f01_num_dos_prop) == 'undefined' || $scope.datos.f01_num_dos_prop == null) ? '' : $scope.datos.f01_num_dos_prop);

            $scope.datos.f01_num_prop   = ((typeof($scope.datos.f01_num_prop) == 'undefined' || $scope.datos.f01_num_prop == null) ? '' : $scope.datos.f01_num_prop);

            $scope.datos.f01_observaciones_i   = ((typeof($scope.datos.f01_observaciones_i) == 'undefined' || $scope.datos.f01_observaciones_i == null) ? '' : $scope.datos.f01_observaciones_i); 

            $scope.datos.f01_piso_act   = ((typeof($scope.datos.f01_piso_act) == 'undefined' || $scope.datos.f01_piso_act == null) ? '' : $scope.datos.f01_piso_act);  

            $scope.datos.f01_pri_nom_prop   = ((typeof($scope.datos.f01_pri_nom_prop) == 'undefined' || $scope.datos.f01_pri_nom_prop == null) ? '' : $scope.datos.f01_pri_nom_prop); 

            $scope.datos.f01_productosElaborados   = ((typeof($scope.datos.f01_productosElaborados) == 'undefined' || $scope.datos.f01_productosElaborados == null) ? '' : $scope.datos.f01_productosElaborados);  
            $scope.datos.f01_raz_soc   = ((typeof($scope.datos.f01_raz_soc) == 'undefined' || $scope.datos.f01_raz_soc == null) ? '' : $scope.datos.f01_raz_soc);  

            $scope.datos.f01_seg_nom_prop   = ((typeof($scope.datos.f01_seg_nom_prop) == 'undefined' || $scope.datos.f01_seg_nom_prop == null) ? '' : $scope.datos.f01_seg_nom_prop); 

            $scope.datos.f01_seg_nom_rep   = ((typeof($scope.datos.f01_seg_nom_rep) == 'undefined' || $scope.datos.f01_seg_nom_rep == null) ? '' : $scope.datos.f01_seg_nom_rep);

            $scope.datos.f01_sup   = ((typeof($scope.datos.f01_sup) == 'undefined' || $scope.datos.f01_sup == null) ? '' : $scope.datos.f01_sup);

            $scope.datos.f01_tel_act1   = ((typeof($scope.datos.f01_tel_act1) == 'undefined' || $scope.datos.f01_tel_act1 == null) ? '' : $scope.datos.f01_tel_act1); 

            $scope.datos.f01_tip_act   = ((typeof($scope.datos.f01_tip_act) == 'undefined' || $scope.datos.f01_tip_act == null) ? '' : $scope.datos.f01_tip_act); 

            $scope.datos.f01_tip_act_dec   = ((typeof($scope.datos.f01_tip_act_dec) == 'undefined' || $scope.datos.f01_tip_act_dec == null) ? '' : $scope.datos.f01_tip_act_dec); 

            $scope.datos.f01_tip_doc_prop   = ((typeof($scope.datos.f01_tip_doc_prop) == 'undefined' || $scope.datos.f01_tip_doc_prop == null) ? '' : $scope.datos.f01_tip_doc_prop);

            $scope.datos.f01_tip_via_act   = ((typeof($scope.datos.f01_tip_via_act) == 'undefined' || $scope.datos.f01_tip_via_act == null) ? '' : $scope.datos.f01_tip_via_act);

            $scope.datos.f01_tip_via_prop   = ((typeof($scope.datos.f01_tip_via_prop) == 'undefined' || $scope.datos.f01_tip_via_prop == null) ? '' : $scope.datos.f01_tip_via_prop); 

            $scope.datos.f01_tipo_lic   = ((typeof($scope.datos.f01_tipo_lic) == 'undefined' || $scope.datos.f01_tipo_lic == null) ? '' : $scope.datos.f01_tipo_lic); 

            $scope.datos.f01_tipo_lic_descrip   = ((typeof($scope.datos.f01_tipo_lic_descrip) == 'undefined' || $scope.datos.f01_tipo_lic_descrip == null) ? '' : $scope.datos.f01_tipo_lic_descrip);

            $scope.datos.f01_tipo_per   = ((typeof($scope.datos.f01_tipo_per) == 'undefined' || $scope.datos.f01_tipo_per == null) ? '' : $scope.datos.f01_tipo_per);  

            $scope.datos.f01_tipo_per_desc   = ((typeof($scope.datos.f01_tipo_per_desc) == 'undefined' || $scope.datos.f01_tipo_per_desc == null) ? '' : $scope.datos.f01_tipo_per_desc);

            $scope.datos.f01_zon_prop   = ((typeof($scope.datos.f01_zon_prop) == 'undefined' || $scope.datos.f01_zon_prop == null) ? '' : $scope.datos.f01_zon_prop);  

            $scope.datos.f01_zon_prop_descrip   = ((typeof($scope.datos.f01_zon_prop_descrip) == 'undefined' || $scope.datos.f01_zon_prop_descrip == null) ? '' : $scope.datos.f01_zon_prop_descrip); 

            $scope.datos.f01_zona_act   = ((typeof($scope.datos.f01_zona_act) == 'undefined' || $scope.datos.f01_zona_act == null) ? '' : $scope.datos.f01_zona_act);  

            $scope.datos.f01_zona_act_descrip   = ((typeof($scope.datos.f01_zona_act_descrip) == 'undefined' || $scope.datos.f01_zona_act_descrip == null) ? '' : $scope.datos.f01_zona_act_descrip); 

            }else{

            $scope.datos.f01_a_hor       =  ((typeof($scope.datos.f01_a_hor) == 'undefined' || $scope.datos.f01_a_hor == null) ? '' : $scope.datos.f01_a_hor);

            $scope.datos.f01_actividad_desarrollada =   ((typeof($scope.datos.f01_actividad_desarrollada)  == 'undefined' || $scope.datos.f01_actividad_desarrollada == null) ? '' : $scope.datos.f01_actividad_desarrollada);

            $scope.datos.f01_ape_cas_rep           = ((typeof($scope.datos.f01_ape_cas_rep) == 'undefined' || $scope.datos.f01_ape_cas_rep == null) ? '' : $scope.datos.f01_ape_cas_rep);

            $scope.datos.f01_ape_cas_prop            = ((typeof($scope.datos.f01_ape_cas_prop) == 'undefined' || $scope.datos.f01_ape_cas_prop == null) ? '' : $scope.datos.f01_ape_cas_prop);

            $scope.datos.f01_ape_pat_rep           = ((typeof($scope.datos.f01_ape_pat_rep) == 'undefined' || $scope.datos.f01_ape_pat_rep == null) ? '' : $scope.datos.f01_ape_pat_rep);

            $scope.datos.f01_ape_mat_rep           = ((typeof($scope.datos.f01_ape_mat_rep) == 'undefined' || $scope.datos.f01_ape_mat_rep == null) ? '' : $scope.datos.f01_ape_mat_rep);

            $scope.datos.f01_bloque_act             = ((typeof($scope.datos.f01_bloque_act) == 'undefined' || $scope.datos.f01_bloque_act == null) ? '' : $scope.datos.f01_bloque_act);

            $scope.datos.f01_cap_aprox              = ((typeof($scope.datos.f01_cap_aprox) == 'undefined' || $scope.datos.f01_cap_aprox == null) ? '' : $scope.datos.f01_cap_aprox);

            $scope.datos.f01_casilla                = ((typeof($scope.datos.f01_casilla) == 'undefined' || $scope.datos.f01_casilla == null) ? '' : $scope.datos.f01_casilla); 

            $scope.datos.f01_categoria              = ((typeof($scope.datos.f01_categoria) == 'undefined' || $scope.datos.f01_categoria == null) ? '' : $scope.datos.f01_categoria); 

            $scope.datos.f01_categoria_agrupada     = ((typeof($scope.datos.f01_categoria_agrupada) == 'undefined' || $scope.datos.f01_categoria_agrupada == null) ? '' : $scope.datos.f01_categoria_agrupada); 

            $scope.datos.f01_categoria_agrupada_descripcion   = ((typeof($scope.datos.f01_categoria_agrupada_descripcion) == 'undefined' || $scope.datos.f01_categoria_agrupada_descripcion == null) ? '' : $scope.datos.f01_categoria_agrupada_descripcion); 

            $scope.datos.f01_categoria_descrip      = ((typeof($scope.datos.f01_categoria_descrip) == 'undefined' || $scope.datos.f01_categoria_descrip == null) ? '' : $scope.datos.f01_categoria_descrip); 

            $scope.datos.f01_contri_act_registrado   = ((typeof($scope.datos.f01_contri_act_registrado) == 'undefined' || $scope.datos.f01_contri_act_registrado == null) ? '' : $scope.datos.f01_contri_act_registrado);

            $scope.datos.f01_cel_rep               = ((typeof($scope.datos.f01_cel_rep) == 'undefined' || $scope.datos.f01_cel_rep == null) ? '' : $scope.datos.f01_cel_rep); 

            $scope.datos.f01_cod_luz                = ((typeof($scope.datos.f01_cod_luz) == 'undefined' || $scope.datos.f01_cod_luz == null) ? '' : $scope.datos.f01_cod_luz); 

            $scope.datos.f01_de_hor   = ((typeof($scope.datos.f01_de_hor) == 'undefined' || $scope.datos.f01_de_hor == null) ? '' : $scope.datos.f01_de_hor); 

            $scope.datos.f01_dir_det_prop   = ((typeof($scope.datos.f01_dir_det_prop) == 'undefined' || $scope.datos.f01_dir_det_prop == null) ? '' : $scope.datos.f01_dir_det_prop); 

            $scope.datos.f01_dist_act               = ((typeof($scope.datos.f01_dist_act) == 'undefined' || $scope.datos.f01_dist_act == null) ? '' : $scope.datos.f01_dist_act); 

            $scope.datos.f01_dist_act_descrip       = ((typeof($scope.datos.f01_dist_act_descrip) == 'undefined' || $scope.datos.f01_dist_act_descrip == null) ? '' : $scope.datos.f01_dist_act_descrip); 

            $scope.datos.f01_dpto_of_loc   = ((typeof($scope.datos.f01_dpto_of_loc) == 'undefined' || $scope.datos.f01_dpto_of_loc == null) ? '' : $scope.datos.f01_dpto_of_loc);

            $scope.datos.f01_edificio_act   = ((typeof($scope.datos.f01_edificio_act) == 'undefined' || $scope.datos.f01_edificio_act == null) ? '' : $scope.datos.f01_edificio_act); 

            $scope.datos.f01_email_rep   = ((typeof($scope.datos.f01_email_rep) == 'undefined' || $scope.datos.f01_email_rep == null) ? '' : $scope.datos.f01_email_rep); 

            $scope.datos.f01_estab_es   = ((typeof($scope.datos.f01_estab_es) == 'undefined' || $scope.datos.f01_estab_es == null) ? '' : $scope.datos.f01_estab_es); 

            $scope.datos.f01_expedido_rep   = ((typeof($scope.datos.f01_expedido_rep) == 'undefined' || $scope.datos.f01_expedido_rep == null) ? '' : $scope.datos.f01_expedido_rep);

              $scope.datos.f01_factor                 = ((typeof($scope.datos.f01_factor) == 'undefined' || $scope.datos.f01_factor == null) ? '' : $scope.datos.f01_factor); 

            $scope.datos.f01_fecha_fin_act          = ((typeof($scope.datos.f01_fecha_fin_act) == 'undefined' || $scope.datos.f01_fecha_fin_act == null) ? '' : $scope.datos.f01_fecha_fin_act); 

            $scope.datos.f01_fecha_imp              = ((typeof($scope.datos.f01_fecha_imp) == 'undefined' || $scope.datos.f01_fecha_imp == null) ? '' : $scope.datos.f01_fecha_imp);

            $scope.datos.f01_fecha_ini_act          = ((typeof($scope.datos.f01_fecha_ini_act) == 'undefined' || $scope.datos.f01_fecha_ini_act == null) ? '' : $scope.datos.f01_fecha_ini_act);

            $scope.datos.f01_fecha_nac              = ((typeof($scope.datos.f01_fecha_nac) == 'undefined' || $scope.datos.f01_fecha_nac == null) ? '' : $scope.datos.f01_fecha_nac);

            $scope.datos.f01_ges_vig_pod   = ((typeof($scope.datos.f01_ges_vig_pod) == 'undefined' || $scope.datos.f01_ges_vig_pod == null) ? '' : $scope.datos.f01_ges_vig_pod);

             $scope.datos.f01_hojas_recibidas        = ((typeof($scope.datos.f01_hojas_recibidas) == 'undefined' || $scope.datos.f01_hojas_recibidas == null) ? '' : $scope.datos.f01_hojas_recibidas); 

            $scope.datos.f01_idCodigoZona           = ((typeof($scope.datos.f01_idCodigoZona) == 'undefined' || $scope.datos.f01_idCodigoZona == null) ? '' : $scope.datos.f01_idCodigoZona);

            $scope.datos.f01_id_actividad_economica = ((typeof($scope.datos.f01_id_actividad_economica) == 'undefined' || $scope.datos.f01_id_actividad_economica == null) ? '' : $scope.datos.f01_id_actividad_economica);

             $scope.datos.f01_actividadesSecundarias   = ((typeof($scope.datos.f01_actividadesSecundarias) == 'undefined' || $scope.datos.f01_actividadesSecundarias == null) ? '' : $scope.datos.f01_actividadesSecundarias);

            $scope.datos.f01_id_area_recuadadora   = ((typeof($scope.datos.f01_id_area_recuadadora) == 'undefined' || $scope.datos.f01_id_area_recuadadora == null) ? '' : $scope.datos.f01_id_area_recuadadora); 

            $scope.datos.f01_id_contribuyente   = ((typeof($scope.datos.f01_id_contribuyente) == 'undefined' || $scope.datos.f01_id_contribuyente == null) ? '' : $scope.datos.f01_id_contribuyente);  

            $scope.datos.f01_id_representante_legal   = ((typeof($scope.datos.f01_id_representante_legal) == 'undefined' || $scope.datos.f01_id_representante_legal == null) ? '' : $scope.datos.f01_id_representante_legal);  

            $scope.datos.f01_id_zona_rep   = ((typeof($scope.datos.f01_id_zona_rep) == 'undefined' || $scope.datos.f01_id_zona_rep == null) ? '' : $scope.datos.f01_id_zona_rep);

            $scope.datos.f01_macro_act              = ((typeof($scope.datos.f01_macro_act) == 'undefined' || $scope.datos.f01_macro_act == null) ? '' : $scope.datos.f01_macro_act);

            $scope.datos.f01_macro_act_descrip   = ((typeof($scope.datos.f01_macro_act_descrip) == 'undefined' || $scope.datos.f01_macro_act_descrip == null) ? '' : $scope.datos.f01_macro_act_descrip);

             $scope.datos.f01_nit   = ((typeof($scope.datos.f01_nit) == 'undefined' || $scope.datos.f01_nit == null) ? '' : $scope.datos.f01_nit); 

            $scope.datos.f01_nit_prop   = ((typeof($scope.datos.f01_nit_prop) == 'undefined' || $scope.datos.f01_nit_prop == null) ? '' : $scope.datos.f01_nit_prop); 

            $scope.datos.f01_nom_via_rep   = ((typeof($scope.datos.f01_nom_via_rep) == 'undefined' || $scope.datos.f01_nom_via_rep == null) ? '' : $scope.datos.f01_nom_via_rep); 

            $scope.datos.f01_nro_orden   = ((typeof($scope.datos.f01_nro_orden) == 'undefined' || $scope.datos.f01_nro_orden == null) ? '' : $scope.datos.f01_nro_orden); 

             $scope.datos.f01_num_act   = ((typeof($scope.datos.f01_num_act) == 'undefined' || $scope.datos.f01_num_act == null) ? '' : $scope.datos.f01_num_act);  

            $scope.datos.f01_num_act1   = ((typeof($scope.datos.f01_num_act1) == 'undefined' || $scope.datos.f01_num_act1 == null) ? '' : $scope.datos.f01_num_act1); 

            $scope.datos.f01_num_doc_per_jur   = ((typeof($scope.datos.f01_num_doc_per_jur) == 'undefined' || $scope.datos.f01_num_doc_per_jur == null) ? '' : $scope.datos.f01_num_doc_per_jur);

            $scope.datos.f01_num_doc_rep   = ((typeof($scope.datos.f01_num_doc_rep) == 'undefined' || $scope.datos.f01_num_doc_rep == null) ? '' : $scope.datos.f01_num_doc_rep); 

            $scope.datos.f01_num_not   = ((typeof($scope.datos.f01_num_not) == 'undefined' || $scope.datos.f01_num_not == null) ? '' : $scope.datos.f01_num_not);

            $scope.datos.f01_num_pmc   = ((typeof($scope.datos.f01_num_pmc) == 'undefined' || $scope.datos.f01_num_pmc == null) ? '' : $scope.datos.f01_num_pmc); 

            $scope.datos.f01_num_pod_leg   = ((typeof($scope.datos.f01_num_pod_leg) == 'undefined' || $scope.datos.f01_num_pod_leg == null) ? '' : $scope.datos.f01_num_pod_leg);

            $scope.datos.f01_num_rep   = ((typeof($scope.datos.f01_num_rep) == 'undefined' || $scope.datos.f01_num_rep == null) ? '' : $scope.datos.f01_num_rep);  

            $scope.datos.f01_observaciones_i   = ((typeof($scope.datos.f01_observaciones_i) == 'undefined' || $scope.datos.f01_observaciones_i == null) ? '' : $scope.datos.f01_observaciones_i); 

            $scope.datos.f01_piso_act   = ((typeof($scope.datos.f01_piso_act) == 'undefined' || $scope.datos.f01_piso_act == null) ? '' : $scope.datos.f01_piso_act);   

            $scope.datos.f01_pri_nom_rep   = ((typeof($scope.datos.f01_pri_nom_rep) == 'undefined' || $scope.datos.f01_pri_nom_rep == null) ? '' : $scope.datos.f01_pri_nom_rep); 

            $scope.datos.f01_productosElaborados   = ((typeof($scope.datos.f01_productosElaborados) == 'undefined' || $scope.datos.f01_productosElaborados == null) ? '' : $scope.datos.f01_productosElaborados);  

            $scope.datos.f01_raz_soc   = ((typeof($scope.datos.f01_raz_soc) == 'undefined' || $scope.datos.f01_raz_soc == null) ? '' : $scope.datos.f01_raz_soc);  

            $scope.datos.f01_raz_soc_per_jur   = ((typeof($scope.datos.f01_raz_soc_per_jur) == 'undefined' || $scope.datos.f01_raz_soc_per_jur == null) ? '' : $scope.datos.f01_raz_soc_per_jur);  

            $scope.datos.f01_seg_nom_rep   = ((typeof($scope.datos.f01_seg_nom_rep) == 'undefined' || $scope.datos.f01_seg_nom_rep == null) ? '' : $scope.datos.f01_seg_nom_rep); 

            $scope.datos.f01_sup   = ((typeof($scope.datos.f01_sup) == 'undefined' || $scope.datos.f01_sup == null) ? '' : $scope.datos.f01_sup); 

             $scope.datos.f01_tel_act1   = ((typeof($scope.datos.f01_tel_act1) == 'undefined' || $scope.datos.f01_tel_act1 == null) ? '' : $scope.datos.f01_tel_act1); 
            $scope.datos.f01_telef_rep   = ((typeof($scope.datos.f01_telef_rep) == 'undefined' || $scope.datos.f01_telef_rep == null) ? '' : $scope.datos.f01_telef_rep); 

            $scope.datos.f01_tip_act   = ((typeof($scope.datos.f01_tip_act) == 'undefined' || $scope.datos.f01_tip_act == null) ? '' : $scope.datos.f01_tip_act); 

            $scope.datos.f01_tip_act_dec   = ((typeof($scope.datos.f01_tip_act_dec) == 'undefined' || $scope.datos.f01_tip_act_dec == null) ? '' : $scope.datos.f01_tip_act_dec); 

            $scope.datos.f01_tip_doc_rep   = ((typeof($scope.datos.f01_tip_doc_rep) == 'undefined' || $scope.datos.f01_tip_doc_rep == null) ? '' : $scope.datos.f01_tip_doc_rep); 

            $scope.datos.f01_tip_via_act   = ((typeof($scope.datos.f01_tip_via_act) == 'undefined' || $scope.datos.f01_tip_via_act == null) ? '' : $scope.datos.f01_tip_via_act);

            $scope.datos.f01_tipo_lic   = ((typeof($scope.datos.f01_tipo_lic) == 'undefined' || $scope.datos.f01_tipo_lic == null) ? '' : $scope.datos.f01_tipo_lic); 

            $scope.datos.f01_tipo_lic_descrip   = ((typeof($scope.datos.f01_tipo_lic_descrip) == 'undefined' || $scope.datos.f01_tipo_lic_descrip == null) ? '' : $scope.datos.f01_tipo_lic_descrip); 

            $scope.datos.f01_tipo_per   = ((typeof($scope.datos.f01_tipo_per) == 'undefined' || $scope.datos.f01_tipo_per == null) ? '' : $scope.datos.f01_tipo_per); 

            $scope.datos.f01_tipo_per_desc   = ((typeof($scope.datos.f01_tipo_per_desc) == 'undefined' || $scope.datos.f01_tipo_per_desc == null) ? '' : $scope.datos.f01_tipo_per_desc); 

            $scope.datos.f01_tipo_viarep   = ((typeof($scope.datos.f01_tipo_viarep) == 'undefined' || $scope.datos.f01_tipo_viarep == null) ? '' : $scope.datos.f01_tipo_viarep); 

            $scope.datos.f01_zona_act   = ((typeof($scope.datos.f01_zona_act) == 'undefined' || $scope.datos.f01_zona_act == null) ? '' : $scope.datos.f01_zona_act); 

            $scope.datos.f01_zona_act_descrip   = ((typeof($scope.datos.f01_zona_act_descrip) == 'undefined' || $scope.datos.f01_zona_act_descrip == null) ? '' : $scope.datos.f01_zona_act_descrip); 

            $scope.datos.f01_zona_rep   = ((typeof($scope.datos.f01_zona_rep) == 'undefined' || $scope.datos.f01_zona_rep == null) ? '' : $scope.datos.f01_zona_rep);  

            $scope.datos.f04_res_solicitud_upaee   = ((typeof($scope.datos.f04_res_solicitud_upaee) == 'undefined' || $scope.datos.f04_res_solicitud_upaee == null) ? '' : $scope.datos.f04_res_solicitud_upaee); 

            $scope.datos.f08_hojas_recibidas   = ((typeof($scope.datos.f08_hojas_recibidas) == 'undefined' || $scope.datos.f08_hojas_recibidas == null) ? '' : $scope.datos.f08_hojas_recibidas);  
            $scope.datos.f08_observaciones_i   = ((typeof($scope.datos.f08_observaciones_i) == 'undefined' || $scope.datos.f08_observaciones_i == null) ? '' : $scope.datos.f08_observaciones_i);  

            $scope.datos.f01_ter_nom_rep   = ((typeof($scope.datos.f01_ter_nom_rep) == 'undefined' || $scope.datos.f01_ter_nom_rep == null) ? '' : $scope.datos.f01_ter_nom_rep);   

            $scope.datos.g_tipo   = ((typeof($scope.datos.g_tipo) == 'undefined' || $scope.datos.g_tipo == null) ? '' : $scope.datos.g_tipo);   
            }
             console.log("Datos Validados: ", $scope.datos);
    };
        
    $scope.cargarRechazoViae   = function(){
        $scope.btnAdiMostrar   =   false;
        $scope.btnEliMostrar   =   false;
        $scope.textAreaMostrar =   false;
        if(! $scope.datos.txtareaObservacionesViae){
            $scope.datos.txtareaObservacionesViae = '';
        }
        
        if($scope.datos.chkviaepublicidad){
            $scope.rechazoViae(false);
        }
    };

    $scope.$on('api:ready',function(){
        $scope.validarCamposObligatorios();
        $scope.validarDatosInicio();
        $scope.getLicencias();
        $scope.getMacrodistritos();
        $scope.getZonasCodigo();
        $scope.GetDatosVia($scope.datos.f01_zona_act);
        $scope.desabilitado = true;
        $scope.lssubcategoria();
        $scope.validandoBotonesImpresion();
        $scope.actividadDesarrolladaGrupo2();

        switch($scope.datos.f01_tip_via_act){
            case "AVENIDA":
                $scope.datos.f01_tip_via_act="AV";
            break;

            case "CALLE":
                $scope.datos.f01_tip_via_act="CA";
            break;

            case "CALLEJON":
                $scope.datos.f01_tip_via_act="CL";
            break;

            case "CANCHA":
                $scope.datos.f01_tip_via_act="CN";
            break;

            case "PARQUE":
                $scope.datos.f01_tip_via_act="PR";
            break;

            case "PLAZA":
                $scope.datos.f01_tip_via_act="PL";
            break;

            case "PASAJE":
                $scope.datos.f01_tip_via_act="PA";
            break;

            case "NO DEFINIDO":
                $scope.datos.f01_tip_via_act="ND";
            break;
        }

        if ($scope.datos.f01_tipo_lic == 2 ) {
            $scope.divDos = true;
            $scope.divUnoTresCuatro = false;
        } else {
            $scope.divDos = false;
            $scope.divUnoTresCuatro = true;
        }

        $scope.lscategoria();
        //$scope.lssubcategoria();
        $scope.lsCaracteristica();
        $scope.cargarZonaContribuyente();
        $scope.controlarBtnForm();
        $scope.inicioVariablesGenesis();
        $scope.cargarInforme();
        $scope.cargarRechazoViae();        
        //$scope.validarInformeRechazo85();
        if ($scope.datos.f01_num_act_n == $scope.datos.f01_num_act) {
            $scope.datos.f01_num_act = "NINGUNO";
        }
    });

    $scope.inicioAE = function () {
            if(DreamFactory.api[CONFIG.SERVICE]){
                $scope.validarCamposObligatorios();
                $scope.validarDatosInicio();
                $scope.getLicencias();
                $scope.getMacrodistritos();
                $scope.getZonasCodigo();
                $scope.GetDatosVia($scope.datos.f01_zona_act);
                $scope.desabilitado = true;
                $scope.lssubcategoria();
                $scope.validandoBotonesImpresion();
                $scope.actividadDesarrolladaGrupo2();

                switch($scope.datos.f01_tip_via_act){
                case "AVENIDA":
                    $scope.datos.f01_tip_via_act="AV";
                break;

                case "CALLE":
                    $scope.datos.f01_tip_via_act="CA";
                break;

                case "CALLEJON":
                    $scope.datos.f01_tip_via_act="CL";
                break;

                case "CANCHA":
                    $scope.datos.f01_tip_via_act="CN";
                break;

                case "PARQUE":
                    $scope.datos.f01_tip_via_act="PR";
                break;

                case "PLAZA":
                    $scope.datos.f01_tip_via_act="PL";
                break;

                case "PASAJE":
                    $scope.datos.f01_tip_via_act="PA";
                break;

                case "NO DEFINIDO":
                    $scope.datos.f01_tip_via_act="ND";
                break;
            }

            if ($scope.datos.f01_tipo_lic == 2 ) {
                $scope.divDos = true;
                $scope.divUnoTresCuatro = false;
                $scope.actividadDesarrolladaGrupo2();
                $scope.getActividadDesarrollada();
            } else {
                $scope.divDos = false;
                $scope.divUnoTresCuatro = true;                
                $scope.actividadDesarrollada134($scope.datos.f01_categoria_agrupada);
            }

            $scope.lscategoria();
            //$scope.lssubcategoria();
            $scope.lsCaracteristica();
            $scope.cargarZonaContribuyente();
            $scope.controlarBtnForm();
            $scope.inicioVariablesGenesis();
            $scope.cargarInforme();
            $scope.cargarRechazoViae();                
            var sFechaServer   =   obtFechaHoraServer.obtenerFecha();
            $scope.datoFechanicio = sFechaServer;
            //$scope.validarInformeRechazo85();
            if ($scope.datos.f01_num_act_n == $scope.datos.f01_num_act) {
                $scope.datos.f01_num_act = "NINGUNO";
            }                
        }
    };
}
</script>
<div class="wrap" ng-controller="frmAE80Controller" data-ng-init="inicioAE(datos)">
<!--div  class="col-md-12" -->
    <div ng-show = "cabeceraNatural">
        <!--<legend> Datos del contribuyente</legend>-->
        <div class="ibox-title_2">
            <h5>Datos del contribuyente</h5>
        </div>
        <div class="col-sm-12" align="right">
            <div class="form-group" >
                <label class="col-sm-4 control-label no-padding-right" for="url" > NIT: </label>
                <div class="col-sm-8" align="left">
                    <label for="url">{{datos.f01_nit_prop}}</label>
                </div>
            </div>
        </div>
        <div class="col-sm-12" align="right">
            <div class="form-group" >
                <label class="col-sm-4 control-label no-padding-right" for="url" >Nombre Completo:</label>
                <div class="col-sm-8" align="left">
                    <label for="url">
                        {{datos.f01_pri_nom_prop}} {{datos.f01_seg_nom_prop}} {{datos.f01_ter_nom_prop}} {{datos.f01_ape_pat_prop}} {{datos.f01_ape_mat_prop}} {{datos.f01_ape_cas_prop}}
                    </label>
                </div>
            </div>
        </div>
        <div class="col-sm-12" align="right">
            <div class="form-group" >
                <label class="col-sm-4 control-label no-padding-right" for="url" >Número de identidad: </label>
                <div class="col-sm-8" align="left">
                    <label for="url" >{{datos.f01_num_dos_prop}}</label>
                </div>
            </div>
        </div>
        <div class="col-sm-12" align="right">
            <div class="form-group" >
                <label class="col-sm-4 control-label no-padding-right" for="url" > PMC: </label>
                <div class="col-sm-8" align="left">
                    <label for="url" >{{datos.f01_num_pmc}}</label>
                </div>
            </div>
        </div>
    </div>
    <br>
    <br>


    <!-- /////////////////////////// -->
    <!-- /////// datos debug /////// -->
    <!-- /////////////////////////// -->
    <!--<div>
        {{datos}}
    </div>-->



    <div class="tab-container">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#datosContribuyente" data-toggle="tab">DATOS DEL CONTRIBUYENTE</a></li>
            <li><a href="#procesar" data-toggle="tab">PROCESAR</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active cont" id="datosContribuyente">
                <form name="formularioRegistro" readOnly="true" novalidate>
                    <div class="tab-container">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#tabDatos" data-toggle="tab">Datos del titular de la licencia</a></li>
                            <li><a href="#tabTecnicos" data-toggle="tab">Datos de la actividad económica</a></li>
                            <li><a href="#tabRequisitos" data-toggle="tab">Requisitos de la actividad económica</a></li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane active cont" id="tabDatos">
                                <div class="row">
                                <!-- /////////////////////////////////////////////////// -->
                                <!-- /////// TAB datos generales persona natural /////// -->
                                <!-- /////////////////////////////////////////////////// -->
                                <div class="col-lg-12" class="tab fade" ng-show = "naturalForm">
                                    <div class="ibox float-e-margins">
                                        <!--<legend>Datos Generales</legend>-->
                                        <div class="ibox-title_2">
                                            <h5>Datos Generales</h5>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >NIT:</label>
                                                        <!--desabilitado-->
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_nit_prop" name="f01_nit_prop" id="f01_nit_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return valNumero(this);">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >TIPO DE DOCUMENTO: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <!-- desabilitado -->
                                                            <select id="f01_tip_doc_prop" name="f01_tip_doc_prop"  ng-model="datos.f01_tip_doc_prop"  class="form-control" placeholder="-- Seleccione --" ng-disabled="desabilitado" required>
                                                                <option value="CI"> CARNET DE IDENTIDAD  </option>
                                                                <option value="CEXT"> CARNET DE EXTRANJERO  </option>
                                                                <option value="PAS"> PASAPORTE  </option>
                                                                <option value="RUN"> RUN  </option>
                                                                <option value="NT"> NIT  </option>
                                                                <option value="RUC"> RUC  </option>
                                                            </select>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_tip_doc_prop.$invalid">
                                                                <span ng-show="formularioRegistro.f01_tip_doc_prop.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >NRO DE DOCUMENTO: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <!-- desabilitado -->
                                                            <input  ng-model="datos.f01_num_dos_prop" name="f01_num_dos_prop" id="f01_num_dos_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return valNumero(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_num_dos_prop.$invalid">
                                                                <span ng-show="formularioRegistro.f01_num_dos_prop.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >EXPEDIDO: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <!-- desabilitado -->
                                                            <select id="f01_expedido_prop" name="f01_expedido_prop"  ng-model="datos.f01_expedido_prop"  class="form-control" placeholder="-- Seleccione --" ng-disabled="desabilitado" required>
                                                                <option value="LPZ"> LA PAZ  </option>
                                                                <option value="ORU"> ORURO  </option>
                                                                <option value="PTS"> POTOSI  </option>
                                                                <option value="CBB"> COCHABAMBA  </option>
                                                                <option value="TJA"> TARIJA  </option>
                                                                <option value="CHQ"> CHUQUISACA  </option>
                                                                <option value="SCZ"> SANTA CRUZ  </option>
                                                                <option value="PND"> PANDO  </option>
                                                                <option value="BNI"> BENI  </option>
                                                                <option value="EXT"> EXTRANJERO  </option>
                                                            </select>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_expedido_prop.$invalid">
                                                                <span ng-show="formularioRegistro.f01_expedido_prop.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >PRIMER NOMBRE: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_pri_nom_prop" name="f01_pri_nom_prop" id="f01_pri_nom_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_pri_nom_prop.$invalid">
                                                                <span ng-show="formularioRegistro.f01_pri_nom_prop.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >SEGUNDO NOMBRE:</label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_seg_nom_prop" name="f01_seg_nom_prop" id="f01_seg_nom_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >TERCER NOMBRE:</label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_ter_nom_prop" name="f01_ter_nom_prop" id="f01_ter_nom_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);" >
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >APELLIDO PATERNO: <font color="#FF0000"> ** </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_ape_pat_prop" name="f01_ape_pat_prop" id="f01_ape_pat_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_ape_pat_prop.$invalid && formularioRegistro.f01_ape_mat_prop.$invalid">
                                                                <span>** Es requerido Paterno o Materno.</span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >APELLIDO MATERNO: <font color="#FF0000"> ** </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_ape_mat_prop" name="f01_ape_mat_prop" id="f01_ape_mat_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_ape_mat_prop.$invalid && formularioRegistro.f01_ape_pat_prop.$invalid">
                                                                <span >** Es requerido Paterno o Materno.</span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >APELLIDO CASADA:</label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_ape_cas_prop" name="f01_ape_cas_prop" id="f01_ape_cas_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >NACIONALIDAD: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_nac_prop" name="f01_nac_prop" id="f01_nac_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_nac_prop.$invalid">
                                                                <span ng-show="formularioRegistro.f01_nac_prop.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4" >
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >FECHA DE NACIMIENTO: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <p class="input-group"><input name="f01_fecha_nac" id="f01_fecha_nac" type="text" placeholder="Sin dato" class="form-control" datepicker-popup="" ng-model="datos.f01_fecha_nac" is-open="startDateOpened" close-text="Close" ng-disabled="desabilitado" />
                                                            <span class="input-group-btn">
                                                                <button type="button" class="btn btn-default" ng-click="startDateOpen($event)"><i class="glyphicon glyphicon-calendar" ></i></button>
                                                            </span></p>
                                                            <!--<span style="color:red" ng-show="formularioRegistro.f01_fecha_nac.$invalid">
                                                                <span ng-show="formularioRegistro.f01_fecha_nac.$error.required">Es requerido.
                                                                </span>
                                                            </span>-->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >TELEFONO: <font color="#FF0000"> ** </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_telef_prop" name="f01_telef_prop" id="f01_telef_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return valNumero(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_cel_prop.$invalid  && formularioRegistro.f01_telef_prop.$invalid">
                                                                <span>Es requerido Telefono o Celular.</span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >CELULAR: <font color="#FF0000"> ** </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_cel_prop" name="f01_cel_prop" id="f01_cel_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return valNumero(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_cel_prop.$invalid  && formularioRegistro.f01_telef_prop.$invalid">
                                                                <span>Es requerido Telefono o Celular.</span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >CORREO ELECTRÓNICO:</label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_email_prop" name="f01_email_prop" id="f01_email_prop" class="form-control" type="email" placeholder="Sin dato" ng-disabled="desabilitado"
                                                            onkeyUp="">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--<legend>Dirección del contribuyente</legend>-->
                                        <div class="ibox-title_2">
                                            <h5>Dirección del contribuyente</h5>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >ZONA: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">

                                                        <select
                                                        id="f01_zon_prop"
                                                        name="f01_zon_prop"
                                                        placeholder="-- Seleccione --"
                                                        ng-model="datos.f01_zon_prop"
                                                        class="form-control"
                                                        value = "datos.f01_zon_prop"
                                                        ng-options="dato.idzona as dato.desczona for dato in datosZonaTodo"
                                                        ng-disabled="desabilitado"
                                                        required>
                                                        <option ></option>
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_zon_prop.$invalid">
                                                        <span ng-show="formularioRegistro.f01_zon_prop.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >TIPO DE VIA: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <select id="f01_tip_via_prop" name="f01_tip_via_prop"  ng-model="datos.f01_tip_via_prop"  class="form-control" placeholder="-- Seleccione --" ng-disabled="desabilitado" required>
                                                                <option value="AV"> AVENIDA  </option>
                                                                <option value="CA"> CALLE  </option>
                                                                <option value="CL"> CALLEJON  </option>
                                                                <option value="CN"> CANCHA  </option>
                                                                <option value="PR"> PARQUE  </option>
                                                                <option value="PL"> PLAZA  </option>
                                                                <option value="ND"> NO DEFINIDO  </option>
                                                                <option value="PA"> PASAJE  </option>
                                                            </select>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_tip_via_prop.$invalid">
                                                                <span ng-show="formularioRegistro.f01_tip_via_prop.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >NOMBRE DE VIA: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_nom_via_prop" name="f01_nom_via_prop" id="f01_nom_via_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_nom_via_prop.$invalid">
                                                                <span ng-show="formularioRegistro.f01_nom_via_prop.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >NÚMERO DE DOMICILIO: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_num_prop" name="f01_num_prop" id="f01_num_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_num_prop.$invalid">
                                                                <span ng-show="formularioRegistro.f01_num_prop.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >NOMBRE DEL EDIFICIO:</label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_nom_edi_prop" name="f01_nom_edi_prop" id="f01_nom_edi_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >BLOQUE:</label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_bloq_prop" name="f01_bloq_prop" id="f01_bloq_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >PISO:</label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_piso_prop" name="f01_piso_prop" id="f01_piso_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >DPTO./OF./LOCAL:</label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_depa_prop" name="f01_depa_prop" id="f01_depa_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-8">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >DIRECCIÓN DETALLADA: </label>
                                                        <div class="controls">
                                                            <!--<input  ng-model="datos.f01_dir_det_prop" name="f01_dir_det_prop" id="f01_dir_det_prop" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);">-->

                                                            <textarea ng-model="datos.f01_dir_det_prop" id="f01_dir_det_prop" name="f01_dir_det_prop" class="form-control" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- /////////////////////////////////////////////////// -->
                                <!-- /////// TAB datos generales persona juridica /////// -->
                                <!-- /////////////////////////////////////////////////// -->
                                <div class="col-lg-12" class="tab fade" ng-show = "juridicoForm">
                                    <div class="ibox float-e-margins">
                                        <!--<legend>Identificacion de la empresa</legend>-->
                                        <div class="ibox-title_2">
                                            <h5>Identificacion de la empresa</h5>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >NIT: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <!--desabilitado-->
                                                            <input  ng-model="datos.f01_num_doc_per_jur" name="f01_num_doc_per_jur" id="f01_num_doc_per_jur" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return valNumero(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_num_doc_per_jur.$invalid">
                                                                <span ng-show="formularioRegistro.f01_num_doc_per_jur.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">                                                        
                                                        <label for="url" >RAZON SOCIAL: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_raz_soc_per_jur" name="f01_raz_soc_per_jur" id="f01_raz_soc_per_jur" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_raz_soc_per_jur.$invalid">
                                                                <span ng-show="formularioRegistro.f01_raz_soc_per_jur.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--<legend>Datos del representante legal</legend>-->
                                        <div class="ibox-title_2">
                                            <h5>Datos del representante legal</h5>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >TIPO DE DOCUMENTO: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <!-- desabilitado -->
                                                            <select id="f01_tip_doc_rep" name="f01_tip_doc_rep"  ng-model="datos.f01_tip_doc_rep"  class="form-control" placeholder="-- Seleccione --" ng-disabled="desabilitado" required>
                                                                <option value="CI"> CARNET DE IDENTIDAD  </option>
                                                                <option value="CEXT"> CARNET DE EXTRANJERO  </option>
                                                                <option value="PAS"> PASAPORTE  </option>
                                                                <option value="RUN"> RUN  </option>
                                                                <option value="NT"> NIT  </option>
                                                                <option value="RUC"> RUC  </option>
                                                            </select>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_tip_doc_rep.$invalid">
                                                                <span ng-show="formularioRegistro.f01_tip_doc_rep.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >NRO DE DOCUMENTO: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <!-- desabilitado -->
                                                            <input  ng-model="datos.f01_num_doc_rep" name="f01_num_doc_rep" id="f01_num_doc_rep" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return valNumero(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_num_doc_rep.$invalid">
                                                                <span ng-show="formularioRegistro.f01_num_doc_rep.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >EXPEDIDO: <font color="#FF0000"> * </font></label>
                                                        <!-- desabilitado -->
                                                        <div class="controls">
                                                            <select id="f01_expedido_rep" name="f01_expedido_rep"  ng-model="datos.f01_expedido_rep"  class="form-control" placeholder="-- Seleccione --" ng-disabled="desabilitado" required>
                                                                <option value="LPZ"> LA PAZ  </option>
                                                                <option value="ORU"> ORURO  </option>
                                                                <option value="PTS"> POTOSI  </option>
                                                                <option value="CBB"> COCHABAMBA  </option>
                                                                <option value="TJA"> TARIJA  </option>
                                                                <option value="CHQ"> CHUQUISACA  </option>
                                                                <option value="SCZ"> SANTA CRUZ  </option>
                                                                <option value="PND"> PANDO  </option>
                                                                <option value="BNI"> BENI  </option>
                                                                <option value="EXT"> EXTRANJERO  </option>
                                                            </select>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_expedido_rep.$invalid">
                                                                <span ng-show="formularioRegistro.f01_expedido_rep.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >PRIMER NOMBRE: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_pri_nom_rep" name="f01_pri_nom_rep" id="f01_pri_nom_rep" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_pri_nom_rep.$invalid">
                                                                <span ng-show="formularioRegistro.f01_pri_nom_rep.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >SEGUNDO NOMBRE:</label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_seg_nom_rep" name="f01_seg_nom_rep" id="f01_seg_nom_rep" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >TERCER NOMBRE:</label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_ter_nom_rep" name="f01_ter_nom_rep" id="f01_ter_nom_rep" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >APELLIDO PATERNO: <font color="#FF0000"> ** </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_ape_pat_rep" name="f01_ape_pat_rep" id="f01_ape_pat_rep" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_ape_pat_rep.$invalid && formularioRegistro.f01_ape_mat_rep.$invalid">
                                                                <span>** Es requerido Paterno o Materno.</span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >APELLIDO MATERNO: <font color="#FF0000"> ** </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_ape_mat_rep" name="f01_ape_mat_rep" id="f01_ape_mat_rep" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_ape_pat_rep.$invalid && formularioRegistro.f01_ape_mat_rep.$invalid">
                                                                <span>** Es requerido Paterno o Materno.</span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >APELLIDO CASADA:</label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_ape_cas_rep" name="f01_ape_cas_rep" id="f01_ape_cas_rep" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >TELEFONO OFICINA: <!--<font color="#FF0000"> * </font>--></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_telef_rep" name="f01_telef_rep" id="f01_telef_rep" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return valNumero(this);" >
                                                            <!--<span style="color:red" ng-show="formularioRegistro.f01_telef_rep.$invalid">
                                                                <span ng-show="formularioRegistro.f01_telef_rep.$error.required">Es requerido.
                                                                </span>
                                                            </span>-->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >CELULAR: </label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_cel_rep" name="f01_cel_rep" id="f01_cel_rep" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return valNumero(this);">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >CORREO ELECTRONICO:</label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_email_rep" name="f01_email_rep" id="f01_email_rep" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >ZONA: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">

                                                    <select
                                                        id="f01_id_zona_rep"
                                                        name="f01_id_zona_rep"
                                                        placeholder="-- Seleccione --"
                                                        ng-model="datos.f01_id_zona_rep"
                                                        class="form-control"
                                                        value = "datos.f01_id_zona_rep"
                                                        ng-options="dato.idzona as dato.desczona for dato in datosZonaTodo"
                                                        ng-disabled="desabilitado"
                                                        required>
                                                        <option ></option>
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_id_zona_rep.$invalid">
                                                        <span ng-show="formularioRegistro.f01_id_zona_rep.$error.required">Es requerido.
                                                        </span>
                                                    </span>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >TIPO DE VIA: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <select id="f01_tipo_viarep" name="f01_tipo_viarep"  ng-model="datos.f01_tipo_viarep"  class="form-control" placeholder="-- Seleccione --" ng-disabled="desabilitado" required>
                                                                <option value="AV"> AVENIDA  </option>
                                                                <option value="CA"> CALLE  </option>
                                                                <option value="CL"> CALLEJON  </option>
                                                                <option value="CN"> CANCHA  </option>
                                                                <option value="PR"> PARQUE  </option>
                                                                <option value="PL"> PLAZA  </option>
                                                                <option value="ND"> NO DEFINIDO  </option>
                                                                <option value="PA"> PASAJE  </option>
                                                            </select>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_tipo_viarep.$invalid">
                                                                <span ng-show="formularioRegistro.f01_tipo_viarep.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >NOMBRE DE VIA: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_nom_via_rep" name="f01_nom_via_rep" id="f01_nom_via_rep" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_nom_via_rep.$invalid">
                                                                <span ng-show="formularioRegistro.f01_nom_via_rep.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >NUMERO: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_num_rep" name="f01_num_rep" id="f01_num_rep" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return conMayusculas(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_num_rep.$invalid">
                                                                <span ng-show="formularioRegistro.f01_num_rep.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >GESTI&Oacute;N DE VIGENCIA DEL PODER LEGAL: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_ges_vig_pod" name="f01_ges_vig_pod" id="f01_ges_vig_pod" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return valNumero(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_ges_vig_pod.$invalid">
                                                                <span ng-show="formularioRegistro.f01_ges_vig_pod.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >NUMERO PODER LEGAL: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_num_pod_leg" name="f01_num_pod_leg" id="f01_num_pod_leg" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return valNumero(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_num_pod_leg.$invalid">
                                                                <span ng-show="formularioRegistro.f01_num_pod_leg.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-12" align="left">
                                                    <div class="form-group" class="col-md-12">
                                                        <label for="url" >NUMERO NOTARIA: <font color="#FF0000"> * </font></label>
                                                        <div class="controls">
                                                            <input  ng-model="datos.f01_num_not" name="f01_num_not" id="f01_num_not" class="form-control" type="text" placeholder="Sin dato" ng-disabled="desabilitado" onkeyUp="return valNumero(this);" required>
                                                            <span style="color:red" ng-show="formularioRegistro.f01_num_not.$invalid">
                                                                <span ng-show="formularioRegistro.f01_num_not.$error.required">Es requerido.
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                </div>
                            </div>

                            <!-- ////////////////////////////////////////////////////////////// -->
                            <!-- /////// TAB requisitos solicitados actividad economica /////// -->
                            <!-- ////////////////////////////////////////////////////////////// -->
                            <div class="tab-pane" id="tabRequisitos">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >TIPO ACTIVIDAD: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <select id="f01_tip_act" name="f01_tip_act"  ng-model="datos.f01_tip_act"  class="form-control" placeholder="-- Seleccione --" ng-disabled="only" required>
                                                        <option value="MA"> MATRIZ  </option>
                                                        <option value="SU"> SUCURSAL  </option>
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_tip_act.$invalid">
                                                        <span ng-show="formularioRegistro.f01_tip_act.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <!-- ACTUALIZAR ACTIVIDAD DESARROLLADA -->
                                    <!--
                                    <div class="col-md-6">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >TIPO DE LICENCIA: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <select
                                                        id="f01_tipo_lic"
                                                        name="f01_tipo_lic"
                                                        placeholder="-- Seleccione --"
                                                        ng-model="datos.f01_tipo_lic"
                                                        class="form-control"
                                                        ng-options="dato.idtipolicencia as dato.tipolicencia for dato in datosLicencia"
                                                        ng-disabled="only"
                                                        required>
                                                        <option value=""></option>
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_tipo_lic.$invalid">
                                                        <span ng-show="formularioRegistro.f01_tipo_lic.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>-->
                                    <div class="col-md-6">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >TIPO DE LICENCIA: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <select 
                                                        id="f01_tipo_lic" 
                                                        name="f01_tipo_lic" 
                                                        placeholder="-- Seleccione --" 
                                                        ng-model="datos.f01_tipo_lic" 
                                                        class="form-control" 
                                                        ng-options="dato.idtipolicencia as dato.tipolicencia for dato in datosLicencia" 
                                                        ng-change="tipoActividad(datos.f01_tipo_lic); GetValueLicencia();"
                                                        required >
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_tipo_lic.$invalid">
                                                        <span ng-show="formularioRegistro.f01_tipo_lic.$error.required">Es requerido.
                                                        </span>
                                                    </span>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ACTUALIZAR ACTIVIDAD DESARROLLADA --> 
                                    <div class="col-md-6" ng-show = "tipoCategoria">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >TIPO DE CATEGORIA: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <select id="f01_categoria_agrupada" name="f01_categoria_agrupada" ng-model="datos.f01_categoria_agrupada" class="form-control" ng-change="getRequisitosCategoria(datos.f01_categoria_agrupada, datos.f01_tipo_per); GetValueCategoriaAgrupada();" required>
                                                    <option ng-repeat="dato in datosCategoria" value="{{dato.idtipolicencia}}" ng-selected="{{dato.idtipolicencia==datos.f01_categoria_agrupada}}"> {{dato.tipolicencia}} </option >
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ACTUALIZAR ACTIVIDAD DESARROLLADA -->
                                    <div class="col-md-6" ng-show = "actividadDesarrollada">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >ACTIVIDAD DESARROLLADA: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <select id="f01_categoria" name="f01_categoria" ng-model="datos.f01_categoria" class="form-control" ng-change="getRequisitosActividad(datos.f01_categoria, datos.f01_tipo_per); GetValueCategoria();" required>
                                                        <option ng-repeat="dato in datosActividadDesarrollada" value="{{dato.idtipolicencia}}" ng-selected="{{dato.idtipolicencia==datos.f01_categoria}}"> {{dato.tipolicencia}} </option >
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_categoria.$invalid">
                                                        <span ng-show="formularioRegistro.f01_categoria.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >ACTIVIDAD DESARROLLADA DESCRIPCION: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <!-- desabilitado -->
                                                    <input  ng-model="datos.f01_categoria_agrupada_descripcion" name="f01_categoria_agrupada_descripcion" id="f01_categoria_agrupada_descripcion" class="form-control" type="text" placeholder="Sin dato" ng-disabled="true" required>

                                                    <input  ng-model="datos.f01_categoria_hidden" name="f01_categoria_hidden" id="f01_categoria_hidden" class="form-control" type="hidden" placeholder="Sin dato">

                                                    <span style="color:red" ng-show="formularioRegistro.f01_categoria_agrupada_descripcion.$invalid">
                                                        <span ng-show="formularioRegistro.f01_categoria_agrupada_descripcion.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >DETALLE ACTIVIDAD DESARROLLADA: </label>
                                                <div class="controls">
                                                    <textarea ng-model="datos.f01_actividad_desarrollada" id="f01_actividad_desarrollada" name="f01_actividad_desarrollada" class="form-control" placeholder="Sin dato" ng-disabled="only" onkeyUp="return conMayusculas(this);" required></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                
                                <!--BUSQUEDA-->
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="col-md-6" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >BUSCAR ACTIVIDAD DESARROLLADA:</label>
                                                <div class="controls">
                                                    <input name="campoBusquedaAD" id="campoBusquedaAD" ng-model="campobusquedaAD" type="text" placeholder="Sin dato">
                                                    <button id="btnBuscarAD" class="btn btn-primary"  ng-click="buscarADesarrollada(campobusquedaAD)">Buscar</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--
                                <input  id="campobsc" type="text" name="campobsc" ng-model="campobsc">
                                <button id="buscatramite" class="btn btn-primary"  ng-click="btnbuscador(campobsc)">Buscar</button>
                                -->
                                
                                <!-- ACTUALIZAR ACTIVIDAD DESARROLLADA -->
                                <!--<div class="row">
                                    <div class="col-md-12">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >MODIFICAR ACTIVIDAD DESARROLLADA: </label>
                                                <div class="controls">
                                                    <input id="f01_ad_revision" name = "f01_ad_revision" ng-model="datos.f01_ad_revision"  type="checkbox" ng-checked="master" aria-label="Slave input">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>-->
                                <!--<legend>REQUISITOS DOCUMENTALES</legend>-->
                                <div ng-show = "divDos">
                                     <div class="ibox-title_2">
                                        <h5>Actividad Desarrollada</h5>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12" align="right">
                                            <div class="form-group" >
                                                <div class="col-sm-10">
                                                    <table class="table table-striped " ng-disabled="only">
                                                        <tbody>
                                                            <tr ng-repeat="role in actividadgrupo">
                                                                <td>
                                                                    <div class="ngSelectionCell" ng-disabled="only">
                                                                        <a ng-click="escribirActividad(role.idactividaddesarrollada, role.descripcion);" class="btn btn-info btn-circle" data-toggle="tooltip" tooltip = "Seleccionar" ng-if="role.idactividaddesarrollada!=datos.f01_categoria" style="cursor: pointer" ng-disabled="only">
                                                                            <i class="fa fa-square-o"></i>
                                                                        </a>
                                                                        <a class="btn btn-info btn-circle" data-toggle="tooltip" tooltip = "Seleccionar" ng-if="role.idactividaddesarrollada==datos.f01_categoria" ng-disabled="only">
                                                                            <i class="fa fa-check-square-o "></i>
                                                                        </a>
                                                                    </div>
                                                                </td>
                                                                <td>{{role.descripcion}}</td>
                                                                <!--td>{{role.id_act_des}}-{{datos.f01_categoria}}</td-->
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ibox-title_2">
                                        <h5>Requisitos Documentales</h5>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12" align="right">
                                            <div class="form-group" >
                                                <div class="col-sm-10">
                                                    <table class="table table-striped " >
                                                        <tbody>
                                                            <tr ng-repeat="role in datosRequisitos">
                                                                <td><div class="ngSelectionCell">
                                                                    <input tabindex="-1" class="ngSelectionCheckbox" type="checkbox" ng-checked="role.estado" ng-model="role.estado" ng-disabled="true"/></div></td>
                                                                <td>{{role.resvalor}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div ng-show = "divUnoTresCuatro">
                                    <div class="ibox-title_2">
                                        <h5>Actividad Desarrollada</h5>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12" align="right">
                                            <div class="form-group" >
                                                <div class="col-sm-10">
                                                    <table class="table table-striped " ng-disabled="only">
                                                        <tbody>
                                                            <tr ng-repeat="role in actividadesDesarrolladas">
                                                                <td>
                                                                    <div class="ngSelectionCell" ng-disabled="only">
                                                                        <a ng-click="escribirActividad(role.id_act_des, role.descripcion);" class="btn btn-info btn-circle" data-toggle="tooltip" tooltip = "Seleccionar" ng-if="role.id_act_des!=datos.f01_categoria" style="cursor: pointer" ng-disabled="only">
                                                                            <i class="fa fa-square-o"></i>
                                                                        </a>
                                                                        <a class="btn btn-info btn-circle" data-toggle="tooltip" tooltip = "Seleccionar" ng-if="role.id_act_des==datos.f01_categoria" ng-disabled="only">
                                                                            <i class="fa fa-check-square-o "></i>
                                                                        </a>
                                                                    </div>
                                                                </td>
                                                                <td>{{role.descripcion}}</td>
                                                                <!--td>{{role.id_act_des}}-{{datos.f01_categoria}}</td-->
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="ibox-title_2" ng-show="false">
                                    <h5>Requisitos Técnicos</h5>
                                </div>
                                <div class="row"  ng-show="false">
                                    <div class="col-sm-12" align="right">
                                        <div class="form-group" >
                                            <div class="col-sm-10">
                                                <table class="table table-striped ">
                                                    <tbody>
                                                        <tr ng-repeat="role2 in datosTecnicos">
                                                            <td><div class="ngSelectionCell">
                                                                <input tabindex="-1" class="ngSelectionCheckbox" type="checkbox" ng-checked="role2.estado" ng-model="role2.estado" ng-disabled="true" /></div></td>
                                                            <td>{{role2.resvalor}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!--<legend>REQUISITOS TECNICOS</legend>
                                <div class="col-sm-12" align="right">
                                    <div class="form-group" >
                                        <div class="col-sm-8" align="left">
                                            <table class="table table-striped ">
                                                <tbody>
                                                    <tr ng-repeat="role2 in datosTecnicos">
                                                        <td><div class="ngSelectionCell">
                                                            <input tabindex="-1" class="ngSelectionCheckbox" type="checkbox" ng-checked="role2.estado" ng-model="role2.estado"/></div></td>
                                                        <td>{{role2.resvalor}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>-->
                            </div>


                            <!-- ////////////////////////////////////////////////////// -->
                            <!-- /////// TAB datos tecnicos actividad economica /////// -->
                            <!-- ////////////////////////////////////////////////////// -->
                            <div class="tab-pane" id="tabTecnicos">
                                <div class="ibox-title_2">
                                    <h5>Datos Técnicos</h5>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >NIT:</label>
                                                <div class="controls">
                                                    <!--only-->
                                                    <input  ng-model="datos.f01_nit" name="f01_nit" id="f01_nit" class="form-control" type="text" placeholder="ingrese numero de NIT" ng-disabled="only" onkeyUp="return valNumero(this);">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >DENOMINACIÓN:</label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_raz_soc" name="f01_raz_soc" id="f01_raz_soc" class="form-control" type="text" placeholder="ingrese denominación de caso" ng-disabled="only" onkeyUp="return conMayusculas(this);">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >SUPERFICIE M2: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_sup" name="f01_sup" id="f01_sup" class="form-control" type="text" placeholder="ingrese capacidad" ng-disabled="only" onkeyUp="" ng-change="calcularCapacidad(datos.f01_sup);" required>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_sup.$invalid">
                                                        <span ng-show="formularioRegistro.f01_sup.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >CAPACIDAD APROX: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_cap_aprox" name="f01_cap_aprox" id="f01_cap_aprox" class="form-control" type="text" placeholder="ingrese capacidad" ng-disabled="only" onkeyUp="" required>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_cap_aprox.$invalid">
                                                        <span ng-show="formularioRegistro.f01_cap_aprox.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >HORA INICIO DE ATENCIÓN: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <!--<select id="f01_de_hor" name="f01_de_hor"  ng-model="datos.f01_de_hor"  class="form-control" placeholder="-- Seleccione --" ng-disabled="only" required>
                                                        <option value="12:00AM"> 12:00AM  </option>
                                                        <option value="01:00AM"> 01:00AM  </option>
                                                        <option value="02:00AM"> 02:00AM  </option>
                                                        <option value="03:00AM"> 03:00AM  </option>
                                                        <option value="04:00AM"> 04:00AM  </option>
                                                        <option value="05:00AM"> 05:00AM  </option>
                                                        <option value="06:00AM"> 06:00AM  </option>
                                                        <option value="07:00AM"> 07:00AM  </option>
                                                        <option value="08:00AM"> 08:00AM  </option>
                                                        <option value="09:00AM"> 09:00AM  </option>
                                                        <option value="10:00AM"> 10:00AM  </option>
                                                        <option value="11:00AM"> 11:00AM  </option>
                                                        <option value="12:00PM"> 12:00PM  </option>
                                                        <option value="01:00PM"> 01:00PM  </option>
                                                        <option value="02:00PM"> 02:00PM  </option>
                                                        <option value="03:00PM"> 03:00PM  </option>
                                                        <option value="04:00PM"> 04:00PM  </option>
                                                        <option value="05:00PM"> 05:00PM  </option>
                                                        <option value="06:00PM"> 06:00PM  </option>
                                                        <option value="07:00PM"> 07:00PM  </option>
                                                        <option value="08:00PM"> 08:00PM  </option>
                                                        <option value="09:00PM"> 09:00PM  </option>
                                                        <option value="10:00PM"> 10:00PM  </option>
                                                        <option value="11:00PM"> 11:00PM  </option>
                                                    </select>-->
                                                    <div class="input-group clockpicker pull-center" data-placement="left" data-align="top" data-autoclose="true" placeholder="HORA INICIO">
                                                        <input  ng-model="datos.f01_de_hor" id="f01_de_hor" name="f01_de_hor" class="form-control" type="text" class="form-control" ng-disabled="only">
                                                        <span class="input-group-addon">
                                                            <span class="glyphicon glyphicon-time"></span>
                                                        </span>
                                                    </div>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_de_hor.$invalid">
                                                        <span ng-show="formularioRegistro.f01_de_hor.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >HORA FIN DE ATENCIÓN: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <!--<select id="f01_a_hor" name="f01_a_hor"  ng-model="datos.f01_a_hor"  class="form-control" placeholder="-- Seleccione --" ng-disabled="only" required>
                                                        <option value="12:00AM"> 12:00AM  </option>
                                                        <option value="01:00AM"> 01:00AM  </option>
                                                        <option value="02:00AM"> 02:00AM  </option>
                                                        <option value="03:00AM"> 03:00AM  </option>
                                                        <option value="04:00AM"> 04:00AM  </option>
                                                        <option value="05:00AM"> 05:00AM  </option>
                                                        <option value="06:00AM"> 06:00AM  </option>
                                                        <option value="07:00AM"> 07:00AM  </option>
                                                        <option value="08:00AM"> 08:00AM  </option>
                                                        <option value="09:00AM"> 09:00AM  </option>
                                                        <option value="10:00AM"> 10:00AM  </option>
                                                        <option value="11:00AM"> 11:00AM  </option>
                                                        <option value="12:00PM"> 12:00PM  </option>
                                                        <option value="01:00PM"> 01:00PM  </option>
                                                        <option value="02:00PM"> 02:00PM  </option>
                                                        <option value="03:00PM"> 03:00PM  </option>
                                                        <option value="04:00PM"> 04:00PM  </option>
                                                        <option value="05:00PM"> 05:00PM  </option>
                                                        <option value="06:00PM"> 06:00PM  </option>
                                                        <option value="07:00PM"> 07:00PM  </option>
                                                        <option value="08:00PM"> 08:00PM  </option>
                                                        <option value="09:00PM"> 09:00PM  </option>
                                                        <option value="10:00PM"> 10:00PM  </option>
                                                        <option value="11:00PM"> 11:00PM  </option>
                                                    </select>-->
                                                    <div class="input-group clockpicker pull-center" data-placement="left" data-align="top" data-autoclose="true" placeholder="HORA FIN">
                                                        <input  ng-model="datos.f01_a_hor" id="f01_a_hor" name="f01_a_hor" class="form-control" type="text" class="form-control" ng-disabled="only">
                                                        <span class="input-group-addon">
                                                            <span class="glyphicon glyphicon-time"></span>
                                                        </span >
                                                    </div>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_a_hor.$invalid">
                                                        <span ng-show="formularioRegistro.f01_a_hor.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >EL ESTABLECIMIENTO ES: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <select id="f01_estab_es" name="f01_estab_es"  ng-model="datos.f01_estab_es"  class="form-control" placeholder="-- Seleccione --" ng-disabled="only" required>
                                                        <option value="PROPIO"> PROPIO  </option>
                                                        <option value="ALQUILADO"> ALQUILADO  </option>
                                                        <option value="ANTICRÉTICO"> ANTICRÉTICO  </option>
                                                        <option value="OTRO"> OTRO  </option>
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_estab_es.$invalid">
                                                        <span ng-show="formularioRegistro.f01_estab_es.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >PRODUCTOS ELABORADOS:</label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_productosElaborados" name="f01_productosElaborados" id="f01_productosElaborados" class="form-control" type="text" placeholder="ingrese numero de caso" ng-disabled="only" onkeyUp="return conMayusculas(this);">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >ACTIVIDADES SECUNDARIAS:</label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_actividadesSecundarias" name="f01_actividadesSecundarias" id="f01_actividadesSecundarias" class="form-control" type="text" placeholder="ingrese numero de caso" ng-disabled="only" onkeyUp="return conMayusculas(this);">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4" >
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >FECHA DE INICIO DE ACTIVIDAD: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <p class="input-group"><input name="f01_fecha_ini_act" id="f01_fecha_ini_act" type="text" placeholder="Sin dato" class="form-control" datepicker-popup="" ng-model="datos.f01_fecha_ini_act" is-open="startDateOpened" close-text="Close" ng-disabled="desabilitado" />
                                                    <span class="input-group-btn">
                                                        <button type="button" class="btn btn-default" ng-click="startDateOpen($event)"><i class="glyphicon glyphicon-calendar" ></i></button>
                                                    </span></p>
                                                    <!--<span style="color:red" ng-show="formularioRegistro.f01_fecha_ini_act.$invalid">
                                                        <span ng-show="formularioRegistro.f01_fecha_ini_act.$error.required">Es requerido.
                                                        </span>
                                                    </span>-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4" >
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >FECHA DE IMPRESIÓN: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <p class="input-group"><input name="f01_fecha_imp" id="f01_fecha_imp" type="text" placeholder="Sin dato" class="form-control" datepicker-popup="" ng-model="datos.f01_fecha_imp" is-open="startDateOpened" close-text="Close" ng-disabled="desabilitado" />
                                                    <span class="input-group-btn">
                                                        <button type="button" class="btn btn-default" ng-click="startDateOpen($event)"><i class="glyphicon glyphicon-calendar" ></i></button>
                                                    </span></p>
                                                    <!--<span style="color:red" ng-show="formularioRegistro.f01_fecha_imp.$invalid">
                                                        <span ng-show="formularioRegistro.f01_fecha_imp.$error.required">Es requerido.
                                                        </span>
                                                    </span>-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4" >
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >FECHA FIN DE LA ACTIVIDAD: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <p class="input-group"><input name="f01_fecha_fin_act" id="f01_fecha_fin_act" type="text" placeholder="Sin dato" class="form-control" datepicker-popup="" ng-model="datos.f01_fecha_fin_act" is-open="startDateOpened" close-text="Close" ng-disabled="desabilitado" />
                                                    <span class="input-group-btn">
                                                        <button type="button" class="btn btn-default" ng-click="startDateOpen($event)"><i class="glyphicon glyphicon-calendar" ></i></button>
                                                    </span></p>
                                                    <!--<span style="color:red" ng-show="formularioRegistro.f01_fecha_fin_act.$invalid">
                                                        <span ng-show="formularioRegistro.f01_fecha_fin_act.$error.required">Es requerido.
                                                        </span>
                                                    </span>-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!--<legend>Ubicación de la actividad económica</legend>-->
                                <div class="ibox-title_2">
                                    <h5>Ubicación de la actividad económica</h5>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >MACRODISTRITO: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <!--<select
                                                        id="f01_macro_act"
                                                        name="f01_macro_act"
                                                        placeholder="-- Seleccione --"
                                                        ng-model="datos.f01_macro_act"
                                                        class="form-control"
                                                        ng-options="dato.idmacro as dato.macro for dato in datosMacrodistritos"
                                                        ng-change="getDistritos(datos.f01_macro_act); GetValueMacrodistrito(); "
                                                        ng-disabled="only"
                                                        required>
                                                        <option value=""></option>
                                                    </select>-->

                                                    <input  ng-model="datos.f01_macro_act_descrip" name="f01_macro_act_descrip" id="f01_macro_act_descrip" class="form-control" type="text" placeholder="{{macrodistrito}}" ng-disabled="desabilitado">

                                                    <!--<span style="color:red" ng-show="formularioRegistro.f01_macro_act.$invalid">
                                                        <span ng-show="formularioRegistro.f01_macro_act.$error.required">Es requerido.
                                                        </span>
                                                    </span>-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >DISTRITO: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <select
                                                        id="f01_dist_act"
                                                        name="f01_dist_act"
                                                        placeholder="-- Seleccione --"
                                                        ng-model="datos.f01_dist_act"
                                                        class="form-control"
                                                        ng-options="dato.iddistrito as dato.distrito for dato in datosDistritos"
                                                        ng-change="getZonas(datos.f01_dist_act); GetValueDistrito();"
                                                        ng-disabled="only"
                                                        required>
                                                        <option value=""></option>
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_dist_act.$invalid">
                                                        <span ng-show="formularioRegistro.f01_dist_act.$error.required">Es requerido.
                                                        </span>
                                                    </span>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >ZONA: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <select
                                                        id="f01_zona_act"
                                                        name="f01_zona_act"
                                                        placeholder="-- Seleccione --"
                                                        ng-model="datos.f01_zona_act"
                                                        class="form-control"
                                                        ng-options="dato.idzona as dato.zona for dato in datosZonas"
                                                        ng-change=" GetValueZonaActividad(); GetDatosVia(datos.f01_zona_act)"
                                                        ng-disabled="only"
                                                        required>
                                                        <option value=""></option>
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_zona_act.$invalid">
                                                        <span ng-show="formularioRegistro.f01_zona_act.$error.required">Es requerido.
                                                        </span>
                                                    </span>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >TIPO DE VÍA: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <select
                                                        id="f01_tip_via_act"
                                                        name="f01_tip_via_act"
                                                        placeholder="-- Seleccione --"
                                                        ng-model="datos.f01_tip_via_act"
                                                        class="form-control"
                                                        ng-options="dato.idVia as dato.nomVia for dato in datosTipoVia"
                                                        ng-change="cargarNombVia(datos.f01_tip_via_act, datos)"
                                                        ng-disabled="only"
                                                        required>
                                                        <option value=""></option>
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_tip_via_act.$invalid">
                                                        <span ng-show="formularioRegistro.f01_tip_via_act.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>    
                                    
                                    <!--<div class="col-md-4" ng-show = "nombreViaCmb">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >NOMBRE DE VÍA: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <select
                                                        id="f01_num_act"
                                                        name="f01_num_act"
                                                        placeholder="-- Seleccione --"
                                                        ng-model="datos.f01_num_act"
                                                        class="form-control"
                                                        ng-options="dato.nombVia as dato.nombVia for dato in datosNombVia"
                                                        ng-disabled="only"
                                                        required>
                                                        <option value=""></option>
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_num_act.$invalid">
                                                        <span ng-show="formularioRegistro.f01_num_act.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>-->
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >VIA: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <!--<select id="f01_num_act" name="f01_num_act"  ng-model="datos.f01_num_act"  class="form-control" placeholder=" Seleccione ">
                                                        <option ng-repeat="dato in datosNombVia " value="{{dato.nombVia}}"> {{dato.nombVia}} </option>
                                                    </select>-->
                                                    <select 
                                                        id="f01_num_act" 
                                                        name="f01_num_act" 
                                                        placeholder="-- Seleccione --" 
                                                        ng-model="datos.f01_num_act" 
                                                        class="form-control" 
                                                        ng-options="dato.nombVia as dato.nombVia for dato in datosNombVia"
                                                        ng-change="cargarNombViaTxt(datos.f01_num_act)" 
                                                        ng-disabled="only"    
                                                        required>
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_num_act.$invalid">
                                                        <span ng-show="formularioRegistro.f01_num_act.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!--<div class="col-md-4" ng-show = "nombreViaTxt">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >NOMBRE DE VÍA: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_num_act" name="f01_num_act" id="f01_num_act" class="form-control" type="text" placeholder="ingrese numero de caso" ng-disabled="only" onkeyUp="return conMayusculas(this);" required>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_num_act.$invalid">
                                                        <span ng-show="formularioRegistro.f01_num_act.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>-->
                                    
                                    
                                    <div class="col-md-4" ng-show = "nombreViaTxt">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >NOMBRE DE VIA: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_num_act_n" name="f01_num_act_n" id="f01_num_act_n" class="form-control" type="text" placeholder="Sin dato" ng-disabled="only" onkeyUp="return conMayusculas(this);" required>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_num_act.$invalid">
                                                        <span ng-show="formularioRegistro.f01_num_act.$error.required">Es requerido.
                                                        </span>
                                                    </span> 
                                                </div>
                                            </div>
                                        </div>
                                    </div>                                    
                                    
                                    
                                    <!--<div>
                                        <div class="col-md-4">
                                            <div class="col-md-12" align="left">
                                                <div class="form-group" class="col-md-12">
                                                    
                                                    <label for="url" ><font color="#FF0000"> * </font>TIPO TRAYECTO: </label>
                                                    <div class="controls">
                                                        <select
                                                                id="f01_factor"
                                                                name="f01_factor"
                                                                ng-model="datos.f01_factor"
                                                                class="form-control"
                                                                placeholder="-- Seleccione --" ng-disabled="only"
                                                                required>
                                                            <option value="TM"> TRAYECTO MATRIZ  </option>                                                       <option value="VA"> VÍA DE ACOMPAÑAMIENTO </option>
                                                        </select>
                                                        <span style="color:red" ng-show="formularioRegistro.f01_factor.$invalid">
                                                            <span ng-show="formularioRegistro.f01_factor.$error.required">Es requerido.
                                                            </span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                 </div>-->                                    

                            <div ng-show="tipoTrayectoMain==true">
                                <div ng-show="tipoTrayecto==true">
                                        <div class="col-md-4">
                                            <div class="col-md-12" align="left">
                                                <div class="form-group" class="col-md-12">
                                                    <label for="url" ><font color="#FF0000"> * </font>TIPO TRAYECTO: </label>
                                                    <div class="controls">
                                                        <select 
                                                                id="f01_factor" 
                                                                name="f01_factor"
                                                                ng-model="datos.f01_factor"  
                                                                class="form-control" 
                                                                placeholder="-- Seleccione --" 
                                                                ng-disabled="only"
                                                                required>
                                                            <option value="TM"> TRAYECTO MATRIZ  </option>                                                          
                                                        </select>
                                                        <span style="color:red" ng-show="formularioRegistro.f01_factor.$invalid">
                                                            <span ng-show="formularioRegistro.f01_factor.$error.required">Es requerido.
                                                            </span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                </div>

                                <div ng-show="tipoTrayecto==false">
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" ><font color="#FF0000"> * </font>TIPO TRAYECTO: </label>
                                                <div class="controls">
                                                   
                                                     <select 
                                                            id="f01_factor" 
                                                            name="f01_factor"  
                                                            ng-model="datos.f01_factor"  
                                                            class="form-control" 
                                                            placeholder="-- Seleccione --" 
                                                            ng-disabled="only" 
                                                             required>
                                                        <option value="VA"> VIA DE ACOMPAÑAMIENTO </option>
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_factor.$invalid">
                                                        <span ng-show="formularioRegistro.f01_factor.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>                                    
                                <!--
                                <div ng-show="tipoTrayecto==true">

                                        <div class="col-md-4">
                                            <div class="col-md-12" align="left">
                                                <div class="form-group" class="col-md-12">
                                                    <label for="url" ><font color="#FF0000"> * </font>TIPO TRAYECTO: </label>
                                                    <div class="controls">
                                                        <select
                                                                id="f01_factor"
                                                                name="f01_factor"
                                                                ng-model="datos.f01_factor"
                                                                class="form-control"
                                                                placeholder="-- Seleccione --" disabled="contUsuRegistrado"
                                                                required>
                                                            <option value="TM"> TRAYECTO MATRIZ  </option>
                                                        </select>
                                                        <span style="color:red" ng-show="formularioRegistro.f01_factor.$invalid">
                                                            <span ng-show="formularioRegistro.f01_factor.$error.required">Es requerido.
                                                            </span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                 </div>
                                <div ng-show="tipoTrayecto==false">
                                        <div class="col-md-4">
                                            <div class="col-md-12" align="left">
                                                <div class="form-group" class="col-md-12">
                                                    <label for="url" ><font color="#FF0000"> * </font>TIPO TRAYECTO: </label>
                                                    <div class="controls">

                                                         <select
                                                                id="f01_factor"
                                                                name="f01_factor"
                                                                ng-model="datos.f01_factor"
                                                                class="form-control"
                                                                placeholder="-- Seleccione --" disabled="contUsuRegistrado" required>
                                                            <option value="VA"> VÍA DE ACOMPAÑAMIENTO </option>
                                                        </select>
                                                        <span style="color:red" ng-show="formularioRegistro.f01_factor.$invalid">
                                                            <span ng-show="formularioRegistro.f01_factor.$error.required">Es requerido.
                                                            </span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>-->
                                    

                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >NÚMERO: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_num_act1" name="f01_num_act1" id="f01_num_act1" class="form-control" type="text" placeholder="ingrese numero de caso" ng-disabled="only" onkeyUp="return conMayusculas(this);" required>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_num_act1.$invalid">
                                                        <span ng-show="formularioRegistro.f01_num_act1.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >EDIFICIO:</label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_edificio_act" name="f01_edificio_act" id="f01_edificio_act" class="form-control" type="text" placeholder="ingrese numero de caso" ng-disabled="only" onkeyUp="return conMayusculas(this);">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >BLOQUE:</label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_bloque_act" name="f01_bloque_act" id="f01_bloque_act" class="form-control" type="text" placeholder="ingrese numero de caso" ng-disabled="only" onkeyUp="return conMayusculas(this);">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >PISO:</label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_piso_act" name="f01_piso_act" id="f01_piso_act" class="form-control" type="text" placeholder="ingrese numero de caso" ng-disabled="only" onkeyUp="return conMayusculas(this);">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >DPTO/OF/LOC:</label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_dpto_of_loc" name="f01_dpto_of_loc" id="f01_dpto_of_loc" class="form-control" type="text" placeholder="ingrese numero de caso" ng-disabled="only" onkeyUp="return conMayusculas(this);">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >TELÉFONO:</label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_tel_act1" name="f01_tel_act1" id="f01_tel_act1" class="form-control" type="text" placeholder="Sin dato" ng-disabled="only" onkeyUp="return valNumero(this);">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >CASILLA:</label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_casilla" name="f01_casilla" id="f01_casilla" class="form-control" type="text" placeholder="Sin dato" ng-disabled="only" onkeyUp="return valNumero(this);">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >CUENTA ENERGÍA ELÉCTRICA:</label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f01_cod_luz" name="f01_cod_luz" id="f01_cod_luz" class="form-control" type="text" placeholder="ingrese numero de caso" ng-disabled="only" onkeyUp="return valNumero(this);">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                     <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >CÓDIGO ZONA: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <select
                                                        id="f01_idCodigoZona"
                                                        name="f01_idCodigoZona"
                                                        placeholder="-- Seleccione --"
                                                        ng-model="datos.f01_idCodigoZona"
                                                        class="form-control"
                                                        ng-options="dato.codzon_codigozona as dato.codzon_codigozona for dato in datosZonasCodigo" ng-disabled="contUsuRegistrado"
                                                        required>
                                                        <option value=""></option>
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f01_idCodigoZona.$invalid">
                                                        <span ng-show="formularioRegistro.f01_idCodigoZona.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="ibox-title_2">
                                    <h5>TÉCNICO UPE</h5>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >LA SOLICITUD : <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <select id="f04_res_solicitud_upaee" name="f04_res_solicitud_upaee" class="form-control"  ng-model="datos.f04_res_solicitud_upaee" ng-change="getTecnico(datos.f04_res_solicitud_upaee);mostrarInformeR();" ng-disabled="contUsuRegistrado" required>
                                                        <option value="PROCEDE">PROCEDE</option>
                                                        <option value="RECHAZADO">RECHAZADO</option>
                                                        <!--<option value="OBSERVADO">OBSERVADO</option>-->
                                                    </select>
                                                    <span style="color:red" ng-show="formularioRegistro.f04_res_solicitud_upaee.$invalid">
                                                        <span ng-show="formularioRegistro.f04_res_solicitud_upaee.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-8">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12" ng-show="informeRechazo">
                                                <label for="url" >ELABORACIÓN DE INFORME DE RECOMENDACIÓN: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <textarea ng-model="datos.f08_observaciones_i_r" class="mceEditorT" id="f08_observaciones_i_r" name="f08_observaciones_i_r" class="form-control" placeholder="Sin dato" onkeyUp="return conMayusculas(this);" ng-disabled="contUsuRegistrado" ></textarea>
                                                    <!--<textarea ng-model="datos.f08_observaciones_i_r" id="f08_observaciones_i_r" name="f08_observaciones_i_r" class="form-control" placeholder="Sin dato" onkeyUp="return conMayusculas(this);"></textarea>-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="ibox-title_2">
                                    <h5>Foliado y descripción</h5>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >NRO DE HOJAS: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <input  ng-model="datos.f08_hojas_recibidas" name="f08_hojas_recibidas" id="f08_hojas_recibidas" class="form-control" type="text" placeholder="ingrese numero de caso" onkeyUp="return valNumero(this);" ng-disabled="contUsuRegistrado" required>
                                                    <span style="color:red" ng-show="formularioRegistro.f08_hojas_recibidas.$invalid">
                                                        <span ng-show="formularioRegistro.f08_hojas_recibidas.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="col-md-12" align="left">
                                            <div class="form-group" class="col-md-12">
                                                <label for="url" >DESCRIPCIÓN: <font color="#FF0000"> * </font></label>
                                                <div class="controls">
                                                    <textarea ng-model="datos.f08_observaciones_i" id="f08_observaciones_i" name="f08_observaciones_i" class="form-control" placeholder="Sin dato" onkeyUp="return conMayusculas(this);" ng-disabled="contUsuRegistrado" required></textarea>
                                                    <span style="color:red" ng-show="formularioRegistro.f08_observaciones_i.$invalid">
                                                        <span ng-show="formularioRegistro.f08_observaciones_i.$error.required">Es requerido.
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!--- ***************************************************   datos de publicidada   *************************************************************** -->
                                <div class="ibox-title_2">
                                    <h5>Variable de Identificación de la Actividad Económica:</h5>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group" >
                                        <div class="controls" >
                                            <input type="radio" ng-model="datos.swpublicidad" name="swpublicidad" value="CP" ng-change="" ng-disabled="only" ng-required="true" required>Con VIAE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <input type="radio" ng-model="datos.swpublicidad" name="swpublicidad" value="SP" ng-change="" ng-disabled="only" ng-required="true" required>Sin VIAE<br>
                                            <span style="color:red" ng-show="formularioRegistro.swpublicidad.$invalid">
                                                <span ng-show="formularioRegistro.swpublicidad.$error.required">VIAE es requerido.
                                                </span>
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                <div ng-show="datos.swpublicidad =='CP'"  >
                                    <div class="row">
                                    <div ng-show="false" class="col-md-12">
                                        <div class="panel panel-default">
                                            <div class="panel-heading"><b>Datos de la VIAE:</b></div>
                                            <div class="panel-body">
                                            <form id="myPublicidad" name="myPublicidad">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="url" >Tipo:</label>
                                                    <div class="controls">
                                                        <select id="INT_TIPO_LETRE" name="INT_TIPO_LETRE"  placeholder="Tipo" ng-model="publi.INT_TIPO_LETRE"  class="form-control"
                                                        ng-options="tletre.p_descripcion as tletre.p_descripcion for tletre in TipoLetrero"  ng-change="ltCaracteristica(publi.INT_TIPO_LETRE);" required>
                                                        </select>
                                                        <span style="color:red" ng-show="formularioRegistro.INT_TIPO_LETRE.$invalid">
                                                            <span ng-show="formularioRegistro.INT_TIPO_LETRE.$error.required">Es requerido.
                                                            </span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group" >
                                                    <label for="url" >Caracteristica:</label>
                                                    <div class="controls">
                                                        <select id="INT_CARA" name="INT_CARA"  placeholder="Distrito - Zona" ng-model="publi.INT_CARA"  class="form-control" ng-options="tletr.p_caracteristica as tletr.p_caracteristica for tletr in lCaracteristica" ng-change="actulizarCaracteristica();" required>
                                                        </select>
                                                        <span style="color:red" ng-show="formularioRegistro.INT_CARA.$invalid">
                                                            <span ng-show="formularioRegistro.INT_CARA.$error.required">Es requerido.
                                                            </span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group" >
                                                    <label for="url" >Caras:</label>
                                                    <div class="controls">
                                                        <input id="INT_NRO_CARA" type="number" name="INT_NRO_CARA"  placeholder="Número de caras" ng-model="publi.INT_NRO_CARA"  class="form-control" required>
                                                        <span style="color:red" ng-show="formularioRegistro.INT_NRO_CARA.$invalid">
                                                            <span ng-show="formularioRegistro.INT_NRO_CARA.$error.required">Es requerido.
                                                            </span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="panel panel-default">
                                                    <div class="panel-heading"><B>Superficie de la VIAE </B>(Ejem. Cara superior&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.5)</div>
                                                    <div class="panel-body">
                                                        <form id="myForm" name="myForm">
                                                            <table class="table table-responsive">
                                                                <thead>
                                                                    <tr>
                                                                        <th>
                                                                            <input class="form-control" type="text"  id="INT_DESC" name="INT_DESC" placeholder="Descripción" ng-model="publi.INT_DESC" required  onkeyUp="return conMayusculas(this);">
                                                                            <span style="color:red" ng-show="formularioRegistro.INT_DESC.$invalid">
                                                                                <span ng-show="formularioRegistro.INT_DESC.$error.required">Es requerido.
                                                                                </span>
                                                                            </span>
                                                                        </th>
                                                                        <th>
                                                                            <input class="form-control" type="number" min="1" max="1500" id="INT_ALTO" name="INT_ALTO" placeholder="Alto" ng-model="publi.INT_ALTO" ng-change="NumericoAlto(publi.INT_ALTO);" required>
                                                                            <span style="color:red" ng-show="formularioRegistro.INT_ALTO.$invalid">
                                                                                <span ng-show="formularioRegistro.INT_ALTO.$error.required">Es requerido.
                                                                                </span>
                                                                            </span>
                                                                        </th>
                                                                        <th>
                                                                            <input class="form-control" type="number" min="1" max="1500" id="INT_ANCHO" name="INT_ANCHO" placeholder="Ancho" ng-model="publi.INT_ANCHO" ng-change="NumericoAncho(publi.INT_ANCHO);" required>
                                                                            <span style="color:red" ng-show="formularioRegistro.INT_ANCHO.$invalid">
                                                                                <span ng-show="formularioRegistro.INT_ANCHO.$error.required">Es requerido.
                                                                                </span>
                                                                            </span>
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                            </table>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                            <input type="hidden" ng-model="publi.idcate" id="idcate" name="idcate" class="form-control"/>
                                            <input type="hidden" ng-model="publi.idcarac" id="idcarac" name="idcarac" class="form-control"/>
                                            <input type="hidden" ng-model="publi.id_cara" id="id_cara" name="id_cara" class="form-control"/>

                                            <div class="col-md-3">
                                                <a class="btn btn-primary" ng-click="adicionarpublicidad(publi)" ng-class="{'disabled': myPublicidad.$invalid}" ng-show="botonn=='new'" ng-hide="botonn=='upd'" >
                                                    <i class="glyphicon glyphicon-plus-sign"></i> VIAE
                                                </a>
                                                <a class="btn btn-primary" ng-click="modificarpublicidad(publi)" ng-show="botonn=='upd'" ng-hide="botonn=='new'">
                                                    <i class="glyphicon glyphicon-plus-sign"></i>Modificar
                                                </a>
                                            </div>
                                            </form>
                                        </div>
                                        </div>
                                    </div>

                                    <div class="col-md-12">
                                        <table ng-table="tablaRoles" show-filter="true" class="table table-striped table-bordered">
                                            <tr ng-repeat="pup in datos.publicidad" >
                                                <td ng-show="btnEliMostrar" align="center" data-title="'Opciones'">
                                                    <a ng-show="btnAdiMostrar" class="btn btn-default btn-circle" ng-click="modificarPlubli(pup)"><i class="fa fa-pencil" style="color:#249FE6"></i></a>
                                                    <!--ng-hide="edit[pup.id]"-->
                                                    <a ng-show="btnEliMostrar" class="btn btn-default btn-circle" ng-click="eliminarPubli(pup);" ><i class="fa fa-trash-o" style="color:#249FE6"></i></a>
                                                </td>
                                                <td data-title="'VIAE'">{{$index+1}}</td>
                                                <td data-title="'TIPO'" sortable="'INT_TIPO_LETRE'">{{pup.INT_TIPO_LETRE}}</td>
                                                <td data-title="'CARACTERÍSTICA'" sortable="'INT_CARA'">{{pup.INT_CARA}}</td>
                                                <td data-title="'CARAS'" sortable="'CARAS'">{{pup.INT_NRO_CARA}}</td>
                                                <td data-title="'DESCRIPCIÓN'" sortable="'INT_DESC'">{{pup.INT_DESC}}</td>
                                                <td data-title="'ALTO'" sortable="'INT_ALTO'">{{pup.INT_ALTO}}</td>
                                                <td data-title="'ANCHO'" sortable="'INT_ANCHO'">{{pup.INT_ANCHO}}</td>
                                                <td data-title="'SUPERFICIE'" sortable="'INT_SUP'">{{pup.INT_SUP}}</td>
                                            </tr>
                                        </table>
                                    </div>
                                    <input type="hidden" ng-disabled="true" ng-model="datos.publicidad" id="publicidad" name="publicidad" class="form-control"/>
                                    <input type="hidden" ng-disabled="true" ng-model="datos.publicidad_grilla" id="publicidad_grilla" name="publicidad_grilla" class="form-control"/>
                                    </div>
                                </div>
                                
                                <!-- rechazo viae -->
                                <div class="ibox-title_2" ng-show="datos.swpublicidad =='CP'">
                                    <h5>Rechazo VIAE:</h5>
                                </div>                                
                                <div class="row" ng-show="datos.swpublicidad =='CP'">
                                    <div class="col-md-2">
                                        <input type="checkbox" ng-click="rechazoViae(datos.chkviaepublicidad);" name="chkviaepublicidad" id="chkviaepublicidad" value="" ng-model="datos.chkviaepublicidad" ng-change="" ng-disabled="only"/> RECHAZO VIAE<br>
                                    </div>
                                    <div ng-show="textAreaMostrar" class="col-md-10">
                                            <label for="url" >DESCRIPCIÓN:</label>
                                            <div class="controls">
                                                <textarea ng-model="datos.txtareaObservacionesViae" id="txtareaObservacionesViae" name="txtareaObservacionesViae" class="form-control" placeholder="Sin dato" onkeyUp="return conMayusculas(this);" ng-disabled="contUsuRegistrado" ></textarea>
                                            </div>
                                    </div>                                        
                                </div>
                                <!--viae-->                                
                                <!--- ***************************************************   datos de publicidada   *************************************************************** -->
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="tab-pane" id="procesar">
                <!--<h3 class="hthin"></h3>
                <div ng-show="datos.f02_la_sol_proced =='PROCEDE'">
                    <button data-dismiss="modal" type="button" class="btn btn-danger fa fa-save" ng-disabled="" ng-click="guardarForm('C');"><span span class="textoAux"> REGISTRAR CONTRIBUYENTE </span></button>

                    <button data-dismiss="modal" type="button" class="btn btn-danger fa fa-save" ng-disabled="" ng-click="guardarForm('A');"><span span class="textoAux"> REGISTRAR AE </span></button>

                    <button data-dismiss="modal" type="button" class="btn btn-success fa fa-save" ng-disabled="" ng-click="guardarForm('L');" ><span span class="textoAux"> GENERAR LICENCIA</span></button>
                    <br>
                </div>
                <br>
                <button data-dismiss="modal" type="button" class="btn btn-danger fa fa-save" ng-disabled="false" ng-click="volver()"><span span class="textoAux"> CANCELAR </span></button>
                <button ng-click="guardarForm('G');" data-dismiss="modal" type="button" class="btn btn-success fa fa-save" ng-disabled=""><span span class="textoAux"> GUARDAR / CONTINUAR </span></button>-->





                <!--<div ng-show="datos.f04_res_solicitud_upaee =='PROCEDE'">
                    <br>
                    <br>
                    <div class="col-sm-12" align="right">
                        <div class="form-group" >
                            <div class="col-sm-4" align="left">
                                <a ng-show = "btnGuardar" class="btn btn-primary" ng-disabled="false" ng-click="guardarForm('C');"><i class="glyphicon fa fa-save"></i> Registrar Contribuyente </a>
                            </div>
                            <div class="col-sm-4" align="left">
                                <label for="url" >Contribuyente Registrado: {{datos.f01_id_contribuyente}}</label>
                            </div>
                        </div>
                    </div>
                    <br>
                    <br>
                    <br>
                    <div class="col-sm-12" align="right">
                        <div class="form-group" >
                            <div class="col-sm-4" align="left">
                                <a ng-show = "btnGuardar" class="btn btn-primary" ng-disabled="false" ng-click="guardarForm('A');"><i class="glyphicon fa fa-save"></i> Resgistrar Actividad&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </a>
                            </div>
                            <div class="col-sm-4" align="left">
                                <label for="url" >Actividad Registrada: {{datos.f01_id_actividad_economica}}</label>
                            </div>
                        </div>
                    </div>
                    <br>
                    <br>
                    <br>

                    <div class="col-sm-12" align="right">
                        <div class="form-group" >
                            <div class="col-sm-4" align="left">
                                <a ng-show = "btnGuardar" class="btn btn-primary" ng-disabled="datos.swpublicidad == 'SP'" ng-click="guardarForm('P');"><i class="glyphicon fa fa-save"></i> Resgistrar Publicidad&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </a>
                            </div>
                            <div class="col-sm-4" align="left">
                                <label for="url" >Publicidad Registrada: {{datos.f01_id_actividad_publicidad}}</label>
                            </div>
                        </div>
                    </div>
                    <br>
                    <br>
                    <br>


                    <div class="col-sm-12" align="right">
                        <div class="form-group" >
                            <div class="col-sm-4" align="left">
                                <a ng-show = "btnGuardar" class="btn btn-primary" ng-disabled="false" ng-click="guardarForm('L');"><i class="glyphicon fa fa-save"></i> Generar Licencia&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </a>
                            </div>
                        </div>
                    </div>
                </div>-->


                <div class="tab-pane" id="procesar">
                <h3 class="hthin"></h3>
                <!-- <p>procesar</p> -->
                <div ng-show="datos.f04_res_solicitud_upaee =='PROCEDE'">

                    <!--<button data-dismiss="modal" type="button" class="btn btn-success fa fa-save" ng-disabled="" ng-click="generarDocumentoPhp401402('402');" data-toggle="modal" data-target="#divPopup4"><span span class="textoAux"> IMPRIMIR FORMULARIO 401</span></button>-->
                    <button data-dismiss="modal" type="button" class="btn fa fa-files-o" ng-click="vistaPrevisualizarLicencia();" data-target="#divPopup5" data-toggle="modal" style="background-color: #CDFBF2" ><span span class="textoAux"><b> PREVISUALIZAR <br> LICENCIA</b></span></button>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                    <button data-dismiss="modal" type="button" ng-show="verbtnReglicencia" class="btn btn-success fa fa-save" ng-disabled="(registraContribuyente) || (contUsuRegistrado) ||   formularioRegistro.f01_tip_act.$invalid || formularioRegistro.f01_tipo_lic.$invalid || formularioRegistro.f01_categoria_agrupada_descripcion.$invalid || formularioRegistro.f01_sup.$invalid || formularioRegistro.f01_cap_aprox.$invalid || formularioRegistro.f01_de_hor.$error.required || formularioRegistro.f01_a_hor.$invalid || formularioRegistro.f01_estab_es.$invalid || formularioRegistro.f01_dist_act.$invalid || formularioRegistro.f01_zona_act.$invalid || formularioRegistro.f01_factor.$invalid || formularioRegistro.f01_tip_via_act.$invalid || formularioRegistro.f01_num_act.$invalid || formularioRegistro.f01_num_act1.$invalid || formularioRegistro.f01_idCodigoZona.$invalid || formularioRegistro.f04_res_solicitud_upaee.$invalid || formularioRegistro.f08_hojas_recibidas.$invalid || formularioRegistro.f08_observaciones_i.$invalid || formularioRegistro.swpublicidad.$invalid" ng-click="registrarActividadEconomica();"><span span class="textoAux"> REGISTRAR <br> CONTRIBUYENTE / ACTIVIDAD ECONOMICA</span></button>

                    <button data-dismiss="modal" type="button" ng-show="verbtnModContribuyente" class="btn btn-success fa fa-save" ng-disabled="(registraContribuyente) || (contUsuRegistrado) ||   formularioRegistro.f01_tip_act.$invalid || formularioRegistro.f01_tipo_lic.$invalid || formularioRegistro.f01_categoria_agrupada_descripcion.$invalid || formularioRegistro.f01_sup.$invalid || formularioRegistro.f01_cap_aprox.$invalid || formularioRegistro.f01_de_hor.$error.required || formularioRegistro.f01_a_hor.$invalid || formularioRegistro.f01_estab_es.$invalid || formularioRegistro.f01_dist_act.$invalid || formularioRegistro.f01_zona_act.$invalid || formularioRegistro.f01_factor.$invalid || formularioRegistro.f01_tip_via_act.$invalid || formularioRegistro.f01_num_act.$invalid || formularioRegistro.f01_num_act1.$invalid || formularioRegistro.f01_idCodigoZona.$invalid || formularioRegistro.f04_res_solicitud_upaee.$invalid || formularioRegistro.f08_hojas_recibidas.$invalid || formularioRegistro.f08_observaciones_i.$invalid || formularioRegistro.swpublicidad.$invalid" ng-click="modificarDatosContribuyente();"><span span class="textoAux"> MODIFICAR <br> CONTRIBUYENTE</span></button>
                    
                    <button data-dismiss="modal" type="button" ng-show="verbtnModlicencia" class="btn btn-success fa fa-save" ng-disabled="(registraContribuyente) || (contUsuRegistrado) ||   formularioRegistro.f01_tip_act.$invalid || formularioRegistro.f01_tipo_lic.$invalid || formularioRegistro.f01_categoria_agrupada_descripcion.$invalid || formularioRegistro.f01_sup.$invalid || formularioRegistro.f01_cap_aprox.$invalid || formularioRegistro.f01_de_hor.$error.required || formularioRegistro.f01_a_hor.$invalid || formularioRegistro.f01_estab_es.$invalid || formularioRegistro.f01_dist_act.$invalid || formularioRegistro.f01_zona_act.$invalid || formularioRegistro.f01_factor.$invalid || formularioRegistro.f01_tip_via_act.$invalid || formularioRegistro.f01_num_act.$invalid || formularioRegistro.f01_num_act1.$invalid || formularioRegistro.f01_idCodigoZona.$invalid || formularioRegistro.f04_res_solicitud_upaee.$invalid || formularioRegistro.f08_hojas_recibidas.$invalid || formularioRegistro.f08_observaciones_i.$invalid || formularioRegistro.swpublicidad.$invalid" ng-click="modificarActividadEconomica();"><span span class="textoAux"> MODIFICAR <br> ACTIVIDAD ECONOMICA</span></button>
                    

                    <button data-dismiss="modal" type="button" class="btn btn-success fa fa-save" ng-show="verbtnlicencia == false" ng-disabled="(licenciaRegistrado)|| formularioRegistro.f01_tip_act.$invalid || formularioRegistro.f01_tipo_lic.$invalid || formularioRegistro.f01_categoria_agrupada_descripcion.$invalid || formularioRegistro.f01_sup.$invalid || formularioRegistro.f01_cap_aprox.$invalid || formularioRegistro.f01_de_hor.$error.required || formularioRegistro.f01_a_hor.$invalid || formularioRegistro.f01_estab_es.$invalid || formularioRegistro.f01_dist_act.$invalid || formularioRegistro.f01_zona_act.$invalid || formularioRegistro.f01_factor.$invalid || formularioRegistro.f01_tip_via_act.$invalid || formularioRegistro.f01_num_act.$invalid || formularioRegistro.f01_num_act1.$invalid || formularioRegistro.f01_idCodigoZona.$invalid || formularioRegistro.f04_res_solicitud_upaee.$invalid || formularioRegistro.f08_hojas_recibidas.$invalid || formularioRegistro.f08_observaciones_i.$invalid || formularioRegistro.swpublicidad.$invalid" ng-click="generarLicenciaAE();"><span span class="textoAux"> GENERAR LICENCIA <br> &nbsp;</span></button>

                    <button data-dismiss="modal" type="button" class="btn btn-success fa fa-save" ng-show="verbtnlicencia == true" ng-disabled="(licenciaRegistrado)" ng-click="mostrarLicenciaGenerada();"><span span class="textoAux"> VER LICENCIA <br> &nbsp;</span></button>

                    <button id="form401" ng-show='validBtn401' type="button" class="btn btn-success  fa fa-save" ng-disabled="(form400Registrado)" ng-click="generarDocumentoPhp401402();"><span span class="textoAux"> IMPRIMIR FORMULARIO <br> 401 o 402</span></button>

                    <button  id="form402" ng-show='validBtn402' data-dismiss="modal" type="button" class="btn btn-success fa fa-save" ng-disabled="(form400Registrado)" ng-click="generarDocumentoPhp401402();"><span span class="textoAux"> IMPRIMIR FORMULARIO <br> 401 o 402</span></button>

                    <!--<button data-dismiss="modal" type="button" class="btn btn-danger fa fa-save" ng-disabled="(registrarActividad) || formularioRegistro.f01_tip_act.$invalid || formularioRegistro.f01_tipo_lic.$invalid || formularioRegistro.f01_categoria_agrupada_descripcion.$invalid || formularioRegistro.f01_sup.$invalid || formularioRegistro.f01_cap_aprox.$invalid || formularioRegistro.f01_de_hor.$error.required || formularioRegistro.f01_a_hor.$invalid || formularioRegistro.f01_estab_es.$invalid || formularioRegistro.f01_dist_act.$invalid || formularioRegistro.f01_zona_act.$invalid || formularioRegistro.f01_factor.$invalid || formularioRegistro.f01_tip_via_act.$invalid || formularioRegistro.f01_num_act.$invalid || formularioRegistro.f01_num_act1.$invalid || formularioRegistro.f01_idCodigoZona.$invalid || formularioRegistro.f04_res_solicitud_upaee.$invalid || formularioRegistro.f08_hojas_recibidas.$invalid || formularioRegistro.f08_observaciones_i.$invalid || formularioRegistro.swpublicidad.$invalid" ng-click="guardarForm('A');"><span span class="textoAux"> REGISTRAR ACTIVIDAD </span></button>

                    <button data-dismiss="modal" type="button" class="btn btn-success fa fa-save" ng-disabled="(formularioRegistro.f01_tip_act.$invalid || formularioRegistro.f01_tipo_lic.$invalid || formularioRegistro.f01_categoria_agrupada_descripcion.$invalid || formularioRegistro.f01_sup.$invalid || formularioRegistro.f01_cap_aprox.$invalid || formularioRegistro.f01_de_hor.$error.required || formularioRegistro.f01_a_hor.$invalid || formularioRegistro.f01_estab_es.$invalid || formularioRegistro.f01_dist_act.$invalid || formularioRegistro.f01_zona_act.$invalid || formularioRegistro.f01_factor.$invalid || formularioRegistro.f01_tip_via_act.$invalid || formularioRegistro.f01_num_act.$invalid || formularioRegistro.f01_num_act1.$invalid || formularioRegistro.f01_idCodigoZona.$invalid || formularioRegistro.f04_res_solicitud_upaee.$invalid || formularioRegistro.f08_hojas_recibidas.$invalid || formularioRegistro.f08_observaciones_i.$invalid || formularioRegistro.swpublicidad.$invalid) || datos.swpublicidad == 'SP'" ng-click="guardarForm('P');"><span span class="textoAux"> REGISTRAR PUBLICIDAD </span></button>

                    <button data-dismiss="modal" type="button" class="btn btn-success fa fa-save" ng-disabled="(generaLicencia) || formularioRegistro.f01_tip_act.$invalid || formularioRegistro.f01_tipo_lic.$invalid || formularioRegistro.f01_categoria_agrupada_descripcion.$invalid || formularioRegistro.f01_sup.$invalid || formularioRegistro.f01_cap_aprox.$invalid || formularioRegistro.f01_de_hor.$error.required || formularioRegistro.f01_a_hor.$invalid || formularioRegistro.f01_estab_es.$invalid || formularioRegistro.f01_dist_act.$invalid || formularioRegistro.f01_zona_act.$invalid || formularioRegistro.f01_factor.$invalid || formularioRegistro.f01_tip_via_act.$invalid || formularioRegistro.f01_num_act.$invalid || formularioRegistro.f01_num_act1.$invalid || formularioRegistro.f01_idCodigoZona.$invalid || formularioRegistro.f04_res_solicitud_upaee.$invalid || formularioRegistro.f08_hojas_recibidas.$invalid || formularioRegistro.f08_observaciones_i.$invalid || formularioRegistro.swpublicidad.$invalid" ng-click="guardarForm('L');"><span span class="textoAux"> GENERAR LICENCIA </span></button>-->

                    <br>
                </div>
                <br>
            </div>

                <br>
                <button data-dismiss="modal" type="button" class="btn btn-danger fa fa-times" ng-disabled="false" ng-click="volver()"><span span class="textoAux"> CANCELAR </span></button>

                <button data-dismiss="modal" type="button" class="btn btn-success fa fa-save" ng-disabled="(guardarae) || formularioRegistro.f01_tip_act.$invalid || formularioRegistro.f01_tipo_lic.$invalid || formularioRegistro.f01_categoria_agrupada_descripcion.$invalid || formularioRegistro.f01_sup.$invalid || formularioRegistro.f01_cap_aprox.$invalid || formularioRegistro.f01_de_hor.$error.required || formularioRegistro.f01_a_hor.$invalid || formularioRegistro.f01_estab_es.$invalid || formularioRegistro.f01_dist_act.$invalid || formularioRegistro.f01_zona_act.$invalid || formularioRegistro.f01_factor.$invalid || formularioRegistro.f01_tip_via_act.$invalid || formularioRegistro.f01_num_act.$invalid || formularioRegistro.f01_num_act1.$invalid || formularioRegistro.f01_idCodigoZona.$invalid || formularioRegistro.f04_res_solicitud_upaee.$invalid || formularioRegistro.f08_hojas_recibidas.$invalid || formularioRegistro.f08_observaciones_i.$invalid || formularioRegistro.swpublicidad.$invalid" ng-click="guardarForm('G')"><span span class="textoAux"> GUARDAR / CONTINUAR </span></button>
                <!--<a class="btn btn-primary" ng-disabled="false" ng-click="volver()"><i class="glyphicon fa fa-times"></i> Cancelar </a>
                <a ng-show = "btnGuardar" class="btn btn-primary" ng-disabled="false" ng-click="guardarForm('G')"><i class="glyphicon fa fa-save"></i> Guardar / Continuar </a>-->
                <br>
            </div>

            
           <div class="col-md-12" align="right">
                <div class="form-group" >
                    <div class="controls" >
                        <label>MODIFICAR DATOS <input name="datoMod" tabindex="-1" type="checkbox" value="MD" id="datoMod" ng-click="CamposModificarHabilitar();"> </label>
                        <br>
                        <br>
                    </div>
                </div>
           </div>

        </div>


        <!--55555-->
        <div class="modal fade" id="divPopup4" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
             <div class="modal-dialog" style="width:700px">
                 <div class="modal-content">
                     <div class="modal-header">
                         <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span></button>
                     </div>
                     <div class="modal-body">
                         <!--pdf-->
                         <div id="visorFum" ng-show="archpdf">
                             <object data="" type="application/pdf" width="650" height="500"></object>
                         </div>
                         <!--imagen-->
                         <div ng-show="archotro">
                              <img id="imgSalida" ng-src="{{archivoP}}" width="100%" height="100%">
                         </div>
                     </div>
                     <div class="modal-footer">
                         <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                     </div>
                 </div>
             </div>
         </div>
        <!--55555-->

        <div class="modal fade" id="divPopup5" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
            <div class="modal-dialoglg" style="width:850px">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span></button>
                        <h4 class="modal-title" id="myModalLabel" style="color:red">{{tituloImp}}</h4>
                    </div>
                    <div class="modal-body">
                        <form name="formularioImpresion"  readOnly="true" novalidate>
                        <div id="previsualizarVista"></div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="col-sm-9">
                                        <div class="form-group">
                                            <p for="url" style="font-family: monospace; font-size: 15px"><b><center>Gobierno Aut&oacute;nomo Municipal de La Paz</center></b></p>
                                            <h3 for="url" style="font-size: 25px"><center>LICENCIA DE FUNCIONAMIENTO <br>PARA ACTIVIDADES ECON&Oacute;MICAS</center></h3>
                                        </div>
                                        <br>
                                        <br>
                                        <div class="form-group">
                                            <h2 style="text-align:center"><b>SUB ALCALD&Iacute;A {{datos.f01_macro_act_descrip}}</b></h2>
                                        </div>
                                        <br>
                                        <div class="col-md-12">
                                            <div class="col-md-6">
                                                <p>Fecha de emision </p>
                                            </div>
                                            <div class="col-md-6">
                                                <p>Fecha de vencimiento <strong></strong></p>
                                            </div>
                                        </div>
                                        <div class="col-sm-12">
                                            <div class="col-sm-5">
                                                <h3><strong><center>{{datoFechanicio}}</center></strong></h3>
                                            </div>
                                            <div class="col-sm-6">
                                                <h3><strong><center>{{datos.f01_fecha_fin_act}}</center></strong></h3>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <a><img src="../../libs/img/QRLicencia.png" width="180" height="180"></a>
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <form>
                                    <h4>DATOS ACTIVIDAD ECON&Oacute;MICA</h4>

                                    <div class="col-md-12" ng-show="datos.f01_tipo_per == 'N'">
                                    <p><span>Nombre o Denominaci&oacute;n : <strong> {{datos.f01_raz_soc}}</strong></span></p>
                                    <p><span>Raz&oacute;n Social : <strong> {{datos.f01_pri_nom_prop}} {{datos.f01_seg_nom_prop}} {{datos.f01_ape_pat_prop}} {{datos.f01_ape_mat_prop}} {{datos.f01_ape_cas_prop}}</strong></span></p>
                                    </div>

                                    <div class="col-md-12" ng-show="datos.f01_tipo_per == 'J'">
                                    <p><span>Nombre o Denominaci&oacute;n : <strong> {{datos.f01_raz_soc}}</strong></span></p>
                                    <p><span>Raz&oacute;n Social : <strong> {{datos.f01_raz_soc_per_jur}} </strong></span></p>
                                    </div>
                                    <br>
                                    <div class="col-md-12" ng-show="datos.f01_tipo_per == 'N'">
                                    <p><span>Direcci&oacute;n :<strong> {{datos.f01_tip_via_act}}&nbsp;{{datos.f01_num_act}} &nbsp;No.&nbsp;{{datos.f01_num_act1}} </strong></span></p>
                                    </div>
                                    <div class="col-md-12" ng-show="datos.f01_tipo_per == 'J'">
                                    <p><span>Direcci&oacute;n :<strong> {{datos.f01_tip_via_act}} &nbsp;{{datos.f01_num_act}} &nbsp; No.&nbsp;{{datos.f01_num_act1}} </strong></span></p>
                                    </div>

                                    <div class="col-md-4">
                                        <p><span>Distrito :<strong> DISTRITO {{datos.f01_dist_act}}</strong></span></p>
                                    </div>
                                    <div class="col-md-4">
                                        <p><span>Zona :<strong> {{datos.f01_zona_act_descrip}}</strong></span></p>
                                        </div>
                                    <div class="col-md-4">
                                        <p><span>Sucursal : <strong>X</strong></span></p>
                                    </div>
                                     <div class="col-md-12">
                                        <p><span>Actividad Desarrollada  (PRUEBA) : <strong>{{datos.f01_categoria_agrupada_descripcion}} </strong></span></p>
                                    </div>
                                    <div class="col-md-12">
                                        <p><span>PMC : <strong>{{datos.f01_num_pmc}}</strong></span></p>
                                    </div>
                                    <div class="col-md-6">
                                        <p><span>No. de Actividad Economica : <strong>X</strong></span></p>
                                    </div>
                                    <div class="col-md-6">
                                        <p><span>N&uacute;mero de licencia de funcionamiento :<strong> X </strong></span></p>
                                        <br>
                                    </div>
                                    <div class="col-md-12">
                                       <table ng-table="tablaRoles">
                                           <tr ng-repeat="pup in datos.publicidad" >
                                              <td>VIAE: {{$index+1}}&nbsp;&nbsp;</td>
                                              <td>Tipo: {{pup.INT_TIPO_LETRE}}&nbsp;<td>&nbsp;
                                           </tr>
                                       </table>
                                   </div>
                                    <div class="col-md-12">
                                        <p align="right"><span style="font-size:12px"><strong>__________________________<br>AUTORIDAD RESPONSABLE</strong></span></p>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-12">
                                <h4 align="left">DATOS DEL PROPIETARIO / REPRESENTANTE LEGAL</h4>
                                <div class="col-sm-6" ng-show="datos.f01_tipo_per == 'N'">
                                    <p><center>Nombre : <strong>{{datos.f01_pri_nom_prop}} {{datos.f01_seg_nom_prop}} {{datos.f01_ape_pat_prop}} {{datos.f01_ape_mat_prop}} {{datos.f01_ape_cas_prop}}</strong></center></p>
                                </div>
                                <div class="col-sm-6" ng-show="datos.f01_tipo_per == 'J'">
                                    <p><center>Nombre : <strong>{{datos.f01_pri_nom_rep}} {{datos.f01_seg_nom_rep}} {{datos.f01_ape_pat_rep}} {{datos.f01_ape_mat_rep}} {{datos.f01_ape_cas_rep}}</strong></center></p>
                                </div>

                                <div class="col-md-6" ng-show="datos.f01_tipo_per == 'N'">
                                    <p><center>Documento de identificaci&oacute;n : <strong>{{datos.f01_tip_doc_prop}} {{datos.f01_num_dos_prop}} {{datos.f01_expedido_prop}}</strong></center></p>
                                </div>

                                 <div class="col-md-6" ng-show="datos.f01_tipo_per == 'J'">
                                    <p><center>Documento de identificaci&oacute;n : <strong>{{datos.f01_tip_doc_rep}} {{datos.f01_num_doc_rep}} {{datos.f01_expedido_rep}}</strong></center></p>
                                </div>
                                <br>
                            </div>
                            <div class="col-sm-12">
                                <p>Toda modificacion a los datos establecidos en la licencia de funcionamiento deberan ser comunicados a la sub alcaldia correspondiente. El incumplimiento a la renovación de la licencia de funcionamiento será sancionado conforme a lo establecido en el articulo 21 de la Ley Municipal Autonómica 217/2016.</p>
                             </div>

                    </div>
                    </div>
                    </form>
                </div>
                     <div class="modal-footer">
                         <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                     </div>
                 </div>
             </div>
         </div>
    </div>
</div>
